!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("token-io",[],t):"object"==typeof exports?exports["token-io"]=t():e["token-io"]=t()}(this,function(){return function(e){function t(n){if(r[n])return r[n].exports;var a=r[n]={exports:{},id:n,loaded:!1};return e[n].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t,r){r(1),e.exports=r(3)},function(e,t,r){(function(t,r){!function(t){"use strict";function n(e,t,r,n){var a=Object.create((t||i).prototype),o=new d(n||[]);return a._invoke=l(e,r,o),a}function a(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}function i(){}function o(){}function u(){}function s(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function c(e){this.arg=e}function f(e){function t(t,r){var n=e[t](r),a=n.value;return a instanceof c?Promise.resolve(a.arg).then(i,o):Promise.resolve(a).then(function(e){return n.value=e,n})}function n(e,r){function n(){return t(e,r)}return a=a?a.then(n,n):new Promise(function(e){e(n())})}"object"==typeof r&&r.domain&&(t=r.domain.bind(t));var a,i=t.bind(e,"next"),o=t.bind(e,"throw");t.bind(e,"return");this._invoke=n}function l(e,t,r){var n=_;return function(i,o){if(n===x)throw new Error("Generator is already running");if(n===R){if("throw"===i)throw o;return v()}for(;;){var u=r.delegate;if(u){if("return"===i||"throw"===i&&u.iterator[i]===g){r.delegate=null;var s=u.iterator.return;if(s){var c=a(s,u.iterator,o);if("throw"===c.type){i="throw",o=c.arg;continue}}if("return"===i)continue}var c=a(u.iterator[i],u.iterator,o);if("throw"===c.type){r.delegate=null,i="throw",o=c.arg;continue}i="next",o=g;var f=c.arg;if(!f.done)return n=A,f;r[u.resultName]=f.value,r.next=u.nextLoc,r.delegate=null}if("next"===i)r._sent=o,n===A?r.sent=o:r.sent=g;else if("throw"===i){if(n===_)throw n=R,o;r.dispatchException(o)&&(i="next",o=g)}else"return"===i&&r.abrupt("return",o);n=x;var c=a(e,t,r);if("normal"===c.type){n=r.done?R:A;var f={value:c.arg,done:r.done};if(c.arg!==E)return f;r.delegate&&"next"===i&&(o=g)}else"throw"===c.type&&(n=R,i="throw",o=c.arg)}}}function h(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function p(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function d(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(h,this),this.reset(!0)}function y(e){if(e){var t=e[w];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(m.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=g,t.done=!0,t};return n.next=n}}return{next:v}}function v(){return{value:g,done:!0}}var g,m=Object.prototype.hasOwnProperty,w="function"==typeof Symbol&&Symbol.iterator||"@@iterator",b="object"==typeof e,k=t.regeneratorRuntime;if(k)return void(b&&(e.exports=k));k=t.regeneratorRuntime=b?e.exports:{},k.wrap=n;var _="suspendedStart",A="suspendedYield",x="executing",R="completed",E={},I=u.prototype=i.prototype;o.prototype=I.constructor=u,u.constructor=o,o.displayName="GeneratorFunction",k.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===o||"GeneratorFunction"===(t.displayName||t.name))},k.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):e.__proto__=u,e.prototype=Object.create(I),e},k.awrap=function(e){return new c(e)},s(f.prototype),k.async=function(e,t,r,a){var i=new f(n(e,t,r,a));return k.isGeneratorFunction(t)?i:i.next().then(function(e){return e.done?e.value:i.next()})},s(I),I[w]=function(){return this},I.toString=function(){return"[object Generator]"},k.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},k.values=y,d.prototype={constructor:d,reset:function(e){if(this.prev=0,this.next=0,this.sent=g,this.done=!1,this.delegate=null,this.tryEntries.forEach(p),!e)for(var t in this)"t"===t.charAt(0)&&m.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=g)},stop:function(){this.done=!0;var e=this.tryEntries[0],t=e.completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){function t(t,n){return i.type="throw",i.arg=e,r.next=t,!!n}if(this.done)throw e;for(var r=this,n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n],i=a.completion;if("root"===a.tryLoc)return t("end");if(a.tryLoc<=this.prev){var o=m.call(a,"catchLoc"),u=m.call(a,"finallyLoc");if(o&&u){if(this.prev<a.catchLoc)return t(a.catchLoc,!0);if(this.prev<a.finallyLoc)return t(a.finallyLoc)}else if(o){if(this.prev<a.catchLoc)return t(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return t(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&m.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var a=n;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?this.next=a.finallyLoc:this.complete(i),E},complete:function(e,t){if("throw"===e.type)throw e.arg;"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=e.arg,this.next="end"):"normal"===e.type&&t&&(this.next=t)},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),p(r),E}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;p(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:y(e),resultName:t,nextLoc:r},E}}}("object"==typeof t?t:"object"==typeof window?window:"object"==typeof self?self:this)}).call(t,function(){return this}(),r(2))},function(e,t){function r(){throw new Error("setTimeout has not been defined")}function n(){throw new Error("clearTimeout has not been defined")}function a(e){if(f===setTimeout)return setTimeout(e,0);if((f===r||!f)&&setTimeout)return f=setTimeout,setTimeout(e,0);try{return f(e,0)}catch(t){try{return f.call(null,e,0)}catch(t){return f.call(this,e,0)}}}function i(e){if(l===clearTimeout)return clearTimeout(e);if((l===n||!l)&&clearTimeout)return l=clearTimeout,clearTimeout(e);try{return l(e)}catch(t){try{return l.call(null,e)}catch(t){return l.call(this,e)}}}function o(){y&&p&&(y=!1,p.length?d=p.concat(d):v=-1,d.length&&u())}function u(){if(!y){var e=a(o);y=!0;for(var t=d.length;t;){for(p=d,d=[];++v<t;)p&&p[v].run();v=-1,t=d.length}p=null,y=!1,i(e)}}function s(e,t){this.fun=e,this.array=t}function c(){}var f,l,h=e.exports={};!function(){try{f="function"==typeof setTimeout?setTimeout:r}catch(e){f=r}try{l="function"==typeof clearTimeout?clearTimeout:n}catch(e){l=n}}();var p,d=[],y=!1,v=-1;h.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];d.push(new s(e,t)),1!==d.length||y||a(u)},s.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=c,h.addListener=c,h.once=c,h.off=c,h.removeListener=c,h.removeAllListeners=c,h.emit=c,h.prependListener=c,h.prependOnceListener=c,h.listeners=function(e){return[]},h.binding=function(e){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(e){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var a=r(4),i=n(a);e.exports=i.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(5),s=n(u),c=r(29),f=n(c),l=r(32),h=n(l),p=r(34),d=n(p),y=r(35),v=n(y),g=r(11),m=n(g),w=r(38),b=n(w),k=r(41),_=n(k),A=r(69),x=n(A),R=r(72),E=n(R);r(73).polyfill();var I=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"prd",r=arguments[1],n=arguments[2],i=arguments[3],o=arguments[4],u=arguments[5];a(this,e),this._env=t,this._globalRpcErrorCallback=i,this._developerKey=r,this._loggingEnabled=o,this._customSdkUrl=u,this._unauthenticatedClient=new x.default(t,r,this._globalRpcErrorCallback,o,u),this.KeyLevel=_.default.KeyLevel,this.Crypto=s.default,this.Util=m.default,this.BrowserCryptoEngine=f.default,this.MemoryCryptoEngine=h.default,this.ManualCryptoEngine=d.default,n&&v.default.setDirRoot(n),this.UnsecuredFileCryptoEngine=v.default,this.TokenRequest=E.default}return o(e,[{key:"aliasExists",value:function(e,t){var r=this;return m.default.callAsync(this.aliasExists,function(){var n;return regeneratorRuntime.async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,regeneratorRuntime.awrap(r._unauthenticatedClient.resolveAlias(e,t));case 2:return n=a.sent,a.abrupt("return",!(!n.data.member||!n.data.member.id)&&""!==n.data.member.id);case 4:case"end":return a.stop()}},null,r)})}},{key:"resolveAlias",value:function(e,t){var r=this;return m.default.callAsync(this.resolveAlias,function(){var n;return regeneratorRuntime.async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,regeneratorRuntime.awrap(r._unauthenticatedClient.resolveAlias(e,t));case 2:return n=a.sent,a.abrupt("return",n.data.member);case 4:case"end":return a.stop()}},null,r)})}},{key:"createMember",value:function(e,t,r,n){var a=this;return m.default.callAsync(this.createMember,function(){var i,o,u,s,c,f;return regeneratorRuntime.async(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,regeneratorRuntime.awrap(a._unauthenticatedClient.createMemberId(r));case 2:return i=l.sent,o=new t(i.data.memberId),l.next=6,regeneratorRuntime.awrap(o.generateKey("PRIVILEGED"));case 6:return u=l.sent,l.next=9,regeneratorRuntime.awrap(o.generateKey("STANDARD"));case 9:return s=l.sent,l.next=12,regeneratorRuntime.awrap(o.generateKey("LOW"));case 12:return c=l.sent,l.next=15,regeneratorRuntime.awrap(a._unauthenticatedClient.approveFirstKeys(i.data.memberId,[u,s,c],o));case 15:if(f=new b.default(a._env,i.data.memberId,o,a._developerKey,a._globalRpcErrorCallback,a._loggingEnabled,a._customSdkUrl),!e||0===Object.keys(e).length){l.next=19;break}return l.next=19,regeneratorRuntime.awrap(f.addAlias(e,n));case 19:return l.abrupt("return",f);case 20:case"end":return l.stop()}},null,a)})}},{key:"createBusinessMember",value:function(e,t,r){return this.createMember(e,t,"BUSINESS",r)}},{key:"provisionDevice",value:function(e,t,r){var n=this;return m.default.callAsync(this.provisionDevice,function(){var a,i,o,u,s;return regeneratorRuntime.async(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,regeneratorRuntime.awrap(n._unauthenticatedClient.resolveAlias(e,r));case 2:if(a=c.sent,a.data.member&&a.data.member.id){c.next=5;break}throw new Error("Invalid alias");case 5:return i=new t(a.data.member.id),c.next=8,regeneratorRuntime.awrap(i.generateKey("PRIVILEGED"));case 8:return o=c.sent,c.next=11,regeneratorRuntime.awrap(i.generateKey("STANDARD"));case 11:return u=c.sent,c.next=14,regeneratorRuntime.awrap(i.generateKey("LOW"));case 14:return s=c.sent,c.abrupt("return",{memberId:a.data.member.id,keys:[o,u,s]});case 16:case"end":return c.stop()}},null,n)})}},{key:"provisionDeviceLow",value:function(e,t,r){var n=this,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:_.default.lowKeyExpiration;return m.default.callAsync(this.provisionDeviceLow,function(){var i,o,u;return regeneratorRuntime.async(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,regeneratorRuntime.awrap(n._unauthenticatedClient.resolveAlias(e,r));case 2:if(i=s.sent,i.data.member&&i.data.member.id){s.next=5;break}throw new Error("Invalid alias");case 5:return o=new t(i.data.member.id),s.next=8,regeneratorRuntime.awrap(o.generateKey("LOW",a));case 8:return u=s.sent,s.abrupt("return",{memberId:i.data.member.id,keys:[u]});case 10:case"end":return s.stop()}},null,n)})}},{key:"getMember",value:function(e,t){var r=this;return m.default.callSync(this.getMember,function(){t||"function"!=typeof e.getActiveMemberId||(t=e.getActiveMemberId());var n=new e(t);return new b.default(r._env,t,n,r._developerKey,r._globalRpcErrorCallback,r._loggingEnabled,r._customSdkUrl)})}},{key:"notifyLinkAccounts",value:function(e,t,r){var n=this,a={linkAccounts:{bankAuthorization:t}};return m.default.callAsync(this.notifyLinkAccounts,function(){var t;return regeneratorRuntime.async(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,regeneratorRuntime.awrap(n._unauthenticatedClient.notify(e,a,r));case 2:return t=i.sent,i.abrupt("return",t.data.status);case 4:case"end":return i.stop()}},null,n)})}},{key:"notifyAddKey",value:function(e,t,r,n,a,o){var u=this,c={addKey:{name:t,expiresMs:a,key:i({id:r.id,level:n,algorithm:r.algorithm,publicKey:s.default.strKey(r.publicKey)},r.expiresAtMs&&{expiresAtMs:r.expiresAtMs})}};return m.default.callAsync(this.notifyAddKey,function(){var t;return regeneratorRuntime.async(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,regeneratorRuntime.awrap(u._unauthenticatedClient.notify(e,c,o));case 2:return t=r.sent,r.abrupt("return",t.data.status);case 4:case"end":return r.stop()}},null,u)})}},{key:"notifyLinkAccountsAndAddKey",value:function(e,t,r,n,a,o){var u=this,c={linkAccountsAndAddKey:{linkAccounts:{bankAuthorization:t},addKey:{name:r,key:i({id:n.id,level:a,algorithm:n.algorithm,publicKey:s.default.strKey(n.publicKey)},n.expiresAtMs&&{expiresAtMs:n.expiresAtMs})}}};return m.default.callAsync(this.notifyLinkAccountsAndAddKey,function(){var t;return regeneratorRuntime.async(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,regeneratorRuntime.awrap(u._unauthenticatedClient.notify(e,c,o));case 2:return t=r.sent,r.abrupt("return",t.data.status);case 4:case"end":return r.stop()}},null,u)})}},{key:"notifyPaymentRequest",value:function(e){var t=this;return e.refId||(e.refId=m.default.generateNonce()),m.default.callAsync(this.notifyPaymentRequest,function(){var r;return regeneratorRuntime.async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,regeneratorRuntime.awrap(t._unauthenticatedClient.notifyPaymentRequest(e));case 2:return r=n.sent,n.abrupt("return",r.data.status);case 4:case"end":return n.stop()}},null,t)})}},{key:"notifyEndorseAndAddKey",value:function(e,t,r,n,a,i){var o=this,u={payload:e,addKey:{keys:t,deviceMetadata:r},tokenRequestId:n,bankId:a,state:i};return m.default.callAsync(this.notifyEndorseAndAddKey,function(){var e;return regeneratorRuntime.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(o._unauthenticatedClient.notifyEndorseAndAddKey(u));case 2:return e=t.sent,t.abrupt("return",{notificationId:e.data.notificationId,status:e.data.status});case 4:case"end":return t.stop()}},null,o)})}},{key:"invalidateNotification",value:function(e){var t=this;return m.default.callAsync(this.invalidateNotification,function(){var r;return regeneratorRuntime.async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,regeneratorRuntime.awrap(t._unauthenticatedClient.invalidateNotification(e));case 2:return r=n.sent,n.abrupt("return",r.data.status);case 4:case"end":return n.stop()}},null,t)})}},{key:"getBanks",value:function(e){var t=this;return m.default.callAsync(this.getBanks,function(){var r;return regeneratorRuntime.async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,regeneratorRuntime.awrap(t._unauthenticatedClient.getBanks(e));case 2:return r=n.sent,n.abrupt("return",r.data);case 4:case"end":return n.stop()}},null,t)})}},{key:"retrieveTokenRequest",value:function(e){var t=this;return m.default.callAsync(this.retrieveTokenRequest,function(){var r;return regeneratorRuntime.async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,regeneratorRuntime.awrap(t._unauthenticatedClient.retrieveTokenRequest(e));case 2:return r=n.sent,n.abrupt("return",r.data.tokenRequest);case 4:case"end":return n.stop()}},null,t)})}},{key:"generateTokenRequestUrl",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return m.default.callSync(this.generateTokenRequestUrl,function(){var a={csrfTokenHash:m.default.hashString(n),innerState:r},i=encodeURIComponent(JSON.stringify(a));return(t._customSdkUrl||_.default.webAppUrls[t._env])+("/request-token/"+e+"?state="+i)})}},{key:"parseTokenRequestCallbackUrl",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return m.default.callAsync(this.parseTokenRequestCallbackUrl,function(){var n,a,i,o;return regeneratorRuntime.async(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,regeneratorRuntime.awrap(t._unauthenticatedClient.getTokenMember());case 2:if(n=u.sent,a=m.default.parseParamsFromUrl(e),i={tokenId:decodeURIComponent(a.tokenId),state:JSON.parse(decodeURIComponent(a.state)),signature:JSON.parse(decodeURIComponent(a.signature))},i.state.csrfTokenHash===m.default.hashString(r)){u.next=7;break}throw new Error("Invalid state.");case 7:return o=m.default.getSigningKey(n.keys,i.signature),u.next=10,regeneratorRuntime.awrap(s.default.verifyJson({state:encodeURIComponent(JSON.stringify(i.state)),tokenId:i.tokenId},i.signature.signature,s.default.bufferKey(o.publicKey)));case 10:return u.abrupt("return",{tokenId:i.tokenId,innerState:i.state.innerState});case 11:case"end":return u.stop()}},null,t)})}},{key:"getTokenId",value:function(e){var t=this;return m.default.callAsync(this.getTokenId,function(){var r;return regeneratorRuntime.async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,regeneratorRuntime.awrap(t._unauthenticatedClient.getTokenId(e));case 2:return r=n.sent,n.abrupt("return",r.data.tokenId);case 4:case"end":return n.stop()}},null,t)})}}],[{key:"enableIframePassthrough",value:function(e){m.default.enableIframePassthrough(_.default.corsDomainSuffix,_.default.urls[e])}},{key:"disableIframePassthrough",value:function(){m.default.disableIframePassthrough(_.default.corsDomainSuffix)}}]),e}();t.default=I},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(6),u=n(o),s=r(10),c=n(s),f=r(28),l=n(f),h=r(23),p=n(h),d=r(19),y=r(11),v=n(y),g=v.default.isIE11()?c.default:l.default,m=function(){function e(){a(this,e)}return i(e,null,[{key:"generateKeys",value:function(e,t,r){return regeneratorRuntime.async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,regeneratorRuntime.awrap(g.generateKeys(e,t,r));case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}},null,this)}},{key:"signJson",value:function(t,r){return regeneratorRuntime.async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,regeneratorRuntime.awrap(e.sign((0,u.default)(t),r));case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}},null,this)}},{key:"sign",value:function(e,t){return regeneratorRuntime.async(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,regeneratorRuntime.awrap(g.sign(e,t));case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}},null,this)}},{key:"createSignerFromKeypair",value:function(t){var r=this;return{sign:function(n){return regeneratorRuntime.async(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,regeneratorRuntime.awrap(e.sign(n,t));case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}},null,r)},signJson:function(n){return regeneratorRuntime.async(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,regeneratorRuntime.awrap(e.signJson(n,t));case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}},null,r)},getKeyId:function(){return t.id}}}},{key:"verifyJson",value:function(t,r,n){return regeneratorRuntime.async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,regeneratorRuntime.awrap(e.verify((0,u.default)(t),r,n));case 2:case"end":return a.stop()}},null,this)}},{key:"verify",value:function(e,t,r){return regeneratorRuntime.async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,regeneratorRuntime.awrap(g.verify(e,t,r));case 2:case"end":return n.stop()}},null,this)}},{key:"createVerifierFromKeypair",value:function(t){var r=this;return{verify:function(n,a){return regeneratorRuntime.async(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,regeneratorRuntime.awrap(e.verify(n,a,t.publicKey));case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}},null,r)},verifyJson:function(n,a){return regeneratorRuntime.async(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,regeneratorRuntime.awrap(e.verifyJson(n,a,t.publicKey));case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}},null,r)}}}},{key:"strKey",value:function(e){return(0,p.default)(e)}},{key:"wrapBuffer",value:function(e){return new Uint8Array(new d.Buffer(e))}},{key:"bufferKey",value:function(t){return e.wrapBuffer(p.default.toBuffer(t))}}]),e}();t.default=m},function(e,t,r){var n="undefined"!=typeof JSON?JSON:r(7);e.exports=function(e,t){t||(t={}),"function"==typeof t&&(t={cmp:t});var r=t.space||"";"number"==typeof r&&(r=Array(r+1).join(" "));var o="boolean"==typeof t.cycles&&t.cycles,u=t.replacer||function(e,t){return t},s=t.cmp&&function(e){return function(t){return function(r,n){var a={key:r,value:t[r]},i={key:n,value:t[n]};return e(a,i)}}}(t.cmp),c=[];return function e(t,f,l,h){var p=r?"\n"+new Array(h+1).join(r):"",d=r?": ":":";if(l&&l.toJSON&&"function"==typeof l.toJSON&&(l=l.toJSON()),l=u.call(t,f,l),void 0!==l){if("object"!=typeof l||null===l)return n.stringify(l);if(a(l)){for(var y=[],v=0;v<l.length;v++){var g=e(l,v,l[v],h+1)||n.stringify(null);y.push(p+r+g)}return"["+y.join(",")+p+"]"}if(c.indexOf(l)!==-1){if(o)return n.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}c.push(l);for(var m=i(l).sort(s&&s(l)),y=[],v=0;v<m.length;v++){var f=m[v],w=e(l,f,l[f],h+1);if(w){var b=n.stringify(f)+d+w;y.push(p+r+b)}}return c.splice(c.indexOf(l),1),"{"+y.join(",")+p+"}"}}({"":e},"",e,0)};var a=Array.isArray||function(e){return"[object Array]"==={}.toString.call(e)},i=Object.keys||function(e){var t=Object.prototype.hasOwnProperty||function(){return!0},r=[];for(var n in e)t.call(e,n)&&r.push(n);return r}},function(e,t,r){t.parse=r(8),t.stringify=r(9)},function(e,t){var r,n,a,i,o={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},u=function(e){throw{name:"SyntaxError",message:e,at:r,text:a}},s=function(e){return e&&e!==n&&u("Expected '"+e+"' instead of '"+n+"'"),n=a.charAt(r),r+=1,n},c=function(){var e,t="";for("-"===n&&(t="-",s("-"));n>="0"&&n<="9";)t+=n,s();if("."===n)for(t+=".";s()&&n>="0"&&n<="9";)t+=n;if("e"===n||"E"===n)for(t+=n,s(),"-"!==n&&"+"!==n||(t+=n,s());n>="0"&&n<="9";)t+=n,s();return e=+t,isFinite(e)?e:void u("Bad number")},f=function(){var e,t,r,a="";if('"'===n)for(;s();){if('"'===n)return s(),a;if("\\"===n)if(s(),"u"===n){for(r=0,t=0;t<4&&(e=parseInt(s(),16),isFinite(e));t+=1)r=16*r+e;a+=String.fromCharCode(r)}else{if("string"!=typeof o[n])break;a+=o[n]}else a+=n}u("Bad string")},l=function(){for(;n&&n<=" ";)s()},h=function(){switch(n){case"t":return s("t"),s("r"),s("u"),s("e"),!0;case"f":return s("f"),s("a"),s("l"),s("s"),s("e"),!1;case"board_rows":return s("board_rows"),s("u"),s("l"),s("l"),null}u("Unexpected '"+n+"'")},p=function(){var e=[];if("["===n){if(s("["),l(),"]"===n)return s("]"),e;for(; n;){if(e.push(i()),l(),"]"===n)return s("]"),e;s(","),l()}}u("Bad array")},d=function(){var e,t={};if("{"===n){if(s("{"),l(),"}"===n)return s("}"),t;for(; n;){if(e=f(),l(),s(":"),Object.hasOwnProperty.call(t,e)&&u('Duplicate key "'+e+'"'),t[e]=i(),l(),"}"===n)return s("}"),t;s(","),l()}}u("Bad object")};i=function(){switch(l(),n){case"{":return d();case"[":return p();case'"':return f();case"-":return c();default:return n>="0"&&n<="9"?c():h()}},e.exports=function(e,t){var o;return a=e,r=0,n=" ",o=i(),l(),n&&u("Syntax error"),"function"==typeof t?function e(r,n){var a,i,o=r[n];if(o&&"object"==typeof o)for(a in o)Object.prototype.hasOwnProperty.call(o,a)&&(i=e(o,a),void 0!==i?o[a]=i:delete o[a]);return t.call(r,n,o)}({"":o},""):o}},function(e,t){function r(e){return u.lastIndex=0,u.test(e)?'"'+e.replace(u,function(e){var t=s[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function n(e,t){var u,s,c,f,l,h=a,p=t[e];switch(p&&"object"==typeof p&&"function"==typeof p.toJSON&&(p=p.toJSON(e)),"function"==typeof o&&(p=o.call(t,e,p)),typeof p){case"string":return r(p);case"number":return isFinite(p)?String(p):"null";case"boolean":case"null":return String(p);case"object":if(!p)return"null";if(a+=i,l=[],"[object Array]"===Object.prototype.toString.apply(p)){for(f=p.length,u=0;u<f;u+=1)l[u]=n(u,p)||"null";return c=0===l.length?"[]":a?"[\n"+a+l.join(",\n"+a)+"\n"+h+"]":"["+l.join(",")+"]",a=h,c}if(o&&"object"==typeof o)for(f=o.length,u=0;u<f;u+=1)s=o[u],"string"==typeof s&&(c=n(s,p),c&&l.push(r(s)+(a?": ":":")+c));else for(s in p)Object.prototype.hasOwnProperty.call(p,s)&&(c=n(s,p),c&&l.push(r(s)+(a?": ":":")+c));return c=0===l.length?"{}":a?"{\n"+a+l.join(",\n"+a)+"\n"+h+"}":"{"+l.join(",")+"}",a=h,c}}var a,i,o,u=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,s={"\b":"\\field_size","\t":"\\t","\n":"\\board_rows","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};e.exports=function(e,t,r){var u;if(a="",i="","number"==typeof r)for(u=0;u<r;u+=1)i+=" ";else"string"==typeof r&&(i=r);if(o=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON.stringify");return n("",{"":e})}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(11),u=n(o),s=r(25),c=n(s),f=r(26),l=n(f),h=r(22),p=n(h),d=function(){function e(){a(this,e)}return i(e,null,[{key:"generateKeys",value:function(e,t){var r;arguments.length>2&&void 0!==arguments[2]&&arguments[2];return regeneratorRuntime.async(function(n){for(;;)switch(n.prev=n.next){case 0:return r=l.default.sign.keyPair(),r.id=(0,c.default)((0,p.default)(r.publicKey)).substring(0,16),r.algorithm="ED25519",r.level=e,r.privateKey=r.secretKey,void 0!==t&&(r.expiresAtMs=(new Date).getTime()+t),delete r.secretKey,n.abrupt("return",r);case 8:case"end":return n.stop()}},null,this)}},{key:"sign",value:function(e,t){var r;return regeneratorRuntime.async(function(n){for(;;)switch(n.prev=n.next){case 0:return r=u.default.wrapBuffer(e),n.abrupt("return",(0,c.default)(l.default.sign.detached(r,t.privateKey)));case 2:case"end":return n.stop()}},null,this)}},{key:"verify",value:function(e,t,r){var n,a,i;return regeneratorRuntime.async(function(o){for(;;)switch(o.prev=o.next){case 0:if(n=u.default.wrapBuffer(e),a=u.default.bufferKey(t),i=l.default.sign.detached.verify(n,a,r)){o.next=5;break}throw new Error("Invalid signature "+t+" on message "+e+" with pk "+r);case 5:case"end":return o.stop()}},null,this)}}]),e}();t.default=d},function(e,t,r){(function(e){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(16),s=n(u),c=r(22),f=n(c),l=r(6),h=n(l),p=r(23),d=n(p),y=r(19),v=function(){function t(){a(this,t)}return o(t,null,[{key:"generateNonce",value:function(){return Math.random().toString(36).slice(-9)+Math.random().toString(36).slice(-9)}},{key:"randomAlias",value:function(){return{type:"EMAIL",value:"test-"+t.generateNonce()+"+noverify@example.com"}}},{key:"tokenAlias",value:function(){return{type:"DOMAIN",value:"token.io"}}},{key:"tokenRealm",value:function(){return"token"}},{key:"stringEndsWith",value:function(e,t){return null!==e&&""!==e&&null!==t&&""!==t&&(e=e.toString(),t=t.toString(),e.indexOf(t,e.length-t.length)!==-1)}},{key:"getByte",value:function(e,t){if(0===t)return 255&e;if(1===t)return(65535&e)>>8;if(2===t)return(16777215&e)>>16;var r=(e&255<<24)>>24;return r<0?256+r:r}},{key:"countDecimals",value:function(e){return Math.floor(e)===e?0:e.toString().split(".")[1].length||0}},{key:"callAsync",value:function(e,t){var r;return regeneratorRuntime.async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,regeneratorRuntime.awrap(t());case 3:return n.abrupt("return",n.sent);case 6:return n.prev=6,n.t0=n.catch(0),r=void 0!==n.t0.response&&void 0!==n.t0.response.data?n.t0.response.data:"UNKNOWN",n.t0.info=e.name+": "+n.t0.message+". Reason: "+r,n.abrupt("return",Promise.reject(n.t0));case 11:case"end":return n.stop()}},null,this,[[0,6]])}},{key:"callSync",value:function(e,t){try{return t()}catch(t){var r=void 0!==t.response&&void 0!==t.response.data?t.response.data:"UNKNOWN";throw t.info=e.name+": "+t.message+". Reason: "+r,t}}},{key:"hashAndSerializeAlias",value:function(t){return"USERNAME"===t.type?t.value:s.default.encode((0,f.default)(e.from((0,h.default)(t),"utf8")))}},{key:"hashString",value:function(t){return s.default.encode((0,f.default)(e.from(t,"utf8")))}},{key:"enableIframePassthrough",value:function(e,r){if(t.stringEndsWith(document.domain,e)||document.domain===e.substring(1)){var n=function(){window.oldXMLHttpRequest=window.XMLHttpRequest,window.oldFetch=window.fetch,window.XMLHttpRequest=this.contentWindow.XMLHttpRequest,window.fetch=this.contentWindow.fetch},a=document.getElementById("tokenApiIframe");null===a&&(a=document.createElement("iframe"),a.id="tokenApiIframe",a.src=r+"/iframe",a.style.position="absolute",a.style.left="-9999px",a.onload=n,document.body.appendChild(a))}}},{key:"disableIframePassthrough",value:function(e){if(t.stringEndsWith(document.domain,e)||document.domain===e.substring(1)){window.oldXMLHttpRequest&&(window.XMLHttpRequest=window.oldXMLHttpRequest),window.oldFetch&&(window.fetch=window.oldFetch);var r=document.getElementById("tokenApiIframe");null!==r&&document.body.removeChild(r)}}},{key:"getSigningKey",value:function(e,t){var r=!0,n=!1,a=void 0;try{
for(var i,o=e[Symbol.iterator]();!(r=(i=o.next()).done);r=!0){var u=i.value;if(u.id===t.keyId)return u}}catch(e){n=!0,a=e}finally{try{!r&&o.return&&o.return()}finally{if(n)throw a}}throw new Error("Invalid signature")}},{key:"strKey",value:function(e){return(0,d.default)(e)}},{key:"wrapBuffer",value:function(e){return new Uint8Array(new y.Buffer(e))}},{key:"bufferKey",value:function(e){return t.wrapBuffer(d.default.toBuffer(e))}},{key:"tokenKey",value:function(e,r){return i({id:e.id,level:r,algorithm:e.algorithm,publicKey:t.strKey(e.publicKey)},e.expiresAtMs&&{expiresAtMs:e.expiresAtMs})}},{key:"parseParamsFromUrl",value:function(e){var t=e.split("?")[1],r={};return t.split("&").forEach(function(e){var t=e.split("=");r[t[0]]=decodeURIComponent(t[1])}),r}},{key:"setUpHttpErrorLogging",value:function(e){e.interceptors.response.use(function(e){return e},function(e){return console.log(e.response),Promise.reject(e)})}},{key:"isFirefox",value:function(){return"undefined"!=typeof window.InstallTrigger}},{key:"isIE11",value:function(){return window.MSInputMethodContext&&document.documentMode}},{key:"isEdge",value:function(){return/Edge/.test(window.navigator.userAgent)}}]),t}();t.default=v}).call(t,r(12).Buffer)},function(e,t,r){(function(e){/*!
	 * The buffer module from node.js, for the browser.
	 *
	 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
	 * @license  MIT
	 */
"use strict";function n(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}function a(){return o.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function i(e,t){if(a()<t)throw new RangeError("Invalid typed array length");return o.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t),e.__proto__=o.prototype):(null===e&&(e=new o(t)),e.length=t),e}function o(e,t,r){if(!(o.TYPED_ARRAY_SUPPORT||this instanceof o))return new o(e,t,r);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return f(this,e)}return u(this,e,t,r)}function u(e,t,r,n){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?p(e,t,r,n):"string"==typeof t?l(e,t,r):d(e,t)}function s(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function c(e,t,r,n){return s(t),t<=0?i(e,t):void 0!==r?"string"==typeof n?i(e,t).fill(r,n):i(e,t).fill(r):i(e,t)}function f(e,t){if(s(t),e=i(e,t<0?0:0|y(t)),!o.TYPED_ARRAY_SUPPORT)for(var r=0;r<t;++r)e[r]=0;return e}function l(e,t,r){if("string"==typeof r&&""!==r||(r="utf8"),!o.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|g(t,r);e=i(e,n);var a=e.write(t,r);return a!==n&&(e=e.slice(0,a)),e}function h(e,t){var r=t.length<0?0:0|y(t.length);e=i(e,r);for(var n=0;n<r;n+=1)e[n]=255&t[n];return e}function p(e,t,r,n){if(t.byteLength,r<0||t.byteLength<r)throw new RangeError("'offset' is out of bounds");if(t.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");return t=void 0===r&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,r):new Uint8Array(t,r,n),o.TYPED_ARRAY_SUPPORT?(e=t,e.__proto__=o.prototype):e=h(e,t),e}function d(e,t){if(o.isBuffer(t)){var r=0|y(t.length);return e=i(e,r),0===e.length?e:(t.copy(e,0,0,r),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||G(t.length)?i(e,0):h(e,t);if("Buffer"===t.type&&$(t.data))return h(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function y(e){if(e>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|e}function v(e){return+e!=e&&(e=0),o.alloc(+e)}function g(e,t){if(o.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var r=e.length;if(0===r)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return z(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return X(e).length;default:if(n)return z(e).length;t=(""+t).toLowerCase(),n=!0}}function m(e,t,r){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if(r>>>=0,t>>>=0,r<=t)return"";for(e||(e="utf8");;)switch(e){case"hex":return O(this,t,r);case"utf8":case"utf-8":return S(this,t,r);case"ascii":return U(this,t,r);case"latin1":case"binary":return B(this,t,r);case"base64":return T(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return M(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function w(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function b(e,t,r,n,a){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=a?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(a)return-1;r=e.length-1}else if(r<0){if(!a)return-1;r=0}if("string"==typeof t&&(t=o.from(t,n)),o.isBuffer(t))return 0===t.length?-1:k(e,t,r,n,a);if("number"==typeof t)return t&=255,o.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?a?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):k(e,[t],r,n,a);throw new TypeError("val must be string, number or Buffer")}function k(e,t,r,n,a){function i(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}var o=1,u=e.length,s=t.length;if(void 0!==n&&(n=String(n).toLowerCase(),"ucs2"===n||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;o=2,u/=2,s/=2,r/=2}var c;if(a){var f=-1;for(c=r;c<u;c++)if(i(e,c)===i(t,f===-1?0:c-f)){if(f===-1&&(f=c),c-f+1===s)return f*o}else f!==-1&&(c-=c-f),f=-1}else for(r+s>u&&(r=u-s),c=r;c>=0;c--){for(var l=!0,h=0;h<s;h++)if(i(e,c+h)!==i(t,h)){l=!1;break}if(l)return c}return-1}function _(e,t,r,n){r=Number(r)||0;var a=e.length-r;n?(n=Number(n),n>a&&(n=a)):n=a;var i=t.length;if(i%2!==0)throw new TypeError("Invalid hex string");n>i/2&&(n=i/2);for(var o=0;o<n;++o){var u=parseInt(t.substr(2*o,2),16);if(isNaN(u))return o;e[r+o]=u}return o}function A(e,t,r,n){return W(z(t,e.length-r),e,r,n)}function x(e,t,r,n){return W(J(t),e,r,n)}function R(e,t,r,n){return x(e,t,r,n)}function E(e,t,r,n){return W(X(t),e,r,n)}function I(e,t,r,n){return W(V(t,e.length-r),e,r,n)}function T(e,t,r){return 0===t&&r===e.length?Z.fromByteArray(e):Z.fromByteArray(e.slice(t,r))}function S(e,t,r){r=Math.min(e.length,r);for(var n=[],a=t;a<r;){var i=e[a],o=null,u=i>239?4:i>223?3:i>191?2:1;if(a+u<=r){var s,c,f,l;switch(u){case 1:i<128&&(o=i);break;case 2:s=e[a+1],128===(192&s)&&(l=(31&i)<<6|63&s,l>127&&(o=l));break;case 3:s=e[a+1],c=e[a+2],128===(192&s)&&128===(192&c)&&(l=(15&i)<<12|(63&s)<<6|63&c,l>2047&&(l<55296||l>57343)&&(o=l));break;case 4:s=e[a+1],c=e[a+2],f=e[a+3],128===(192&s)&&128===(192&c)&&128===(192&f)&&(l=(15&i)<<18|(63&s)<<12|(63&c)<<6|63&f,l>65535&&l<1114112&&(o=l))}}null===o?(o=65533,u=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|1023&o),n.push(o),a+=u}return P(n)}function P(e){var t=e.length;if(t<=ee)return String.fromCharCode.apply(String,e);for(var r="",n=0;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=ee));return r}function U(e,t,r){var n="";r=Math.min(e.length,r);for(var a=t;a<r;++a)n+=String.fromCharCode(127&e[a]);return n}function B(e,t,r){var n="";r=Math.min(e.length,r);for(var a=t;a<r;++a)n+=String.fromCharCode(e[a]);return n}function O(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var a="",i=t;i<r;++i)a+=H(e[i]);return a}function M(e,t,r){for(var n=e.slice(t,r),a="",i=0;i<n.length;i+=2)a+=String.fromCharCode(n[i]+256*n[i+1]);return a}function L(e,t,r){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function K(e,t,r,n,a,i){if(!o.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>a||t<i)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function C(e,t,r,n){t<0&&(t=65535+t+1);for(var a=0,i=Math.min(e.length-r,2);a<i;++a)e[r+a]=(t&255<<8*(n?a:1-a))>>>8*(n?a:1-a)}function j(e,t,r,n){t<0&&(t=4294967295+t+1);for(var a=0,i=Math.min(e.length-r,4);a<i;++a)e[r+a]=t>>>8*(n?a:3-a)&255}function D(e,t,r,n,a,i){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function N(e,t,r,n,a){return a||D(e,t,r,4,3.4028234663852886e38,-3.4028234663852886e38),Q.write(e,t,r,n,23,4),r+4}function Y(e,t,r,n,a){return a||D(e,t,r,8,1.7976931348623157e308,-1.7976931348623157e308),Q.write(e,t,r,n,52,8),r+8}function q(e){if(e=F(e).replace(te,""),e.length<2)return"";for(;e.length%4!==0;)e+="=";return e}function F(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function H(e){return e<16?"0"+e.toString(16):e.toString(16)}function z(e,t){t=t||1/0;for(var r,n=e.length,a=null,i=[],o=0;o<n;++o){if(r=e.charCodeAt(o),r>55295&&r<57344){if(!a){if(r>56319){(t-=3)>-1&&i.push(239,191,189);continue}if(o+1===n){(t-=3)>-1&&i.push(239,191,189);continue}a=r;continue}if(r<56320){(t-=3)>-1&&i.push(239,191,189),a=r;continue}r=(a-55296<<10|r-56320)+65536}else a&&(t-=3)>-1&&i.push(239,191,189);if(a=null,r<128){if((t-=1)<0)break;i.push(r)}else if(r<2048){if((t-=2)<0)break;i.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;i.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return i}function J(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}function V(e,t){for(var r,n,a,i=[],o=0;o<e.length&&!((t-=2)<0);++o)r=e.charCodeAt(o),n=r>>8,a=r%256,i.push(a),i.push(n);return i}function X(e){return Z.toByteArray(q(e))}function W(e,t,r,n){for(var a=0;a<n&&!(a+r>=t.length||a>=e.length);++a)t[a+r]=e[a];return a}function G(e){return e!==e}var Z=r(13),Q=r(14),$=r(15);t.Buffer=o,t.SlowBuffer=v,t.INSPECT_MAX_BYTES=50,o.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:n(),t.kMaxLength=a(),o.poolSize=8192,o._augment=function(e){return e.__proto__=o.prototype,e},o.from=function(e,t,r){return u(null,e,t,r)},o.TYPED_ARRAY_SUPPORT&&(o.prototype.__proto__=Uint8Array.prototype,o.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&o[Symbol.species]===o&&Object.defineProperty(o,Symbol.species,{value:null,configurable:!0})),o.alloc=function(e,t,r){return c(null,e,t,r)},o.allocUnsafe=function(e){return f(null,e)},o.allocUnsafeSlow=function(e){return f(null,e)},o.isBuffer=function(e){return!(null==e||!e._isBuffer)},o.compare=function(e,t){if(!o.isBuffer(e)||!o.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var r=e.length,n=t.length,a=0,i=Math.min(r,n);a<i;++a)if(e[a]!==t[a]){r=e[a],n=t[a];break}return r<n?-1:n<r?1:0},o.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(e,t){if(!$(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return o.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var n=o.allocUnsafe(t),a=0;for(r=0;r<e.length;++r){var i=e[r];if(!o.isBuffer(i))throw new TypeError('"list" argument must be an Array of Buffers');i.copy(n,a),a+=i.length}return n},o.byteLength=g,o.prototype._isBuffer=!0,o.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)w(this,t,t+1);return this},o.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)w(this,t,t+3),w(this,t+1,t+2);return this},o.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)w(this,t,t+7),w(this,t+1,t+6),w(this,t+2,t+5),w(this,t+3,t+4);return this},o.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?S(this,0,e):m.apply(this,arguments)},o.prototype.equals=function(e){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===o.compare(this,e)},o.prototype.inspect=function(){var e="",r=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(e+=" ... ")),"<Buffer "+e+">"},o.prototype.compare=function(e,t,r,n,a){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===a&&(a=this.length),t<0||r>e.length||n<0||a>this.length)throw new RangeError("out of range index");if(n>=a&&t>=r)return 0;if(n>=a)return-1;if(t>=r)return 1;if(t>>>=0,r>>>=0,n>>>=0,a>>>=0,this===e)return 0;for(var i=a-n,u=r-t,s=Math.min(i,u),c=this.slice(n,a),f=e.slice(t,r),l=0;l<s;++l)if(c[l]!==f[l]){i=c[l],u=f[l];break}return i<u?-1:u<i?1:0},o.prototype.includes=function(e,t,r){return this.indexOf(e,t,r)!==-1},o.prototype.indexOf=function(e,t,r){return b(this,e,t,r,!0)},o.prototype.lastIndexOf=function(e,t,r){return b(this,e,t,r,!1)},o.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var a=this.length-t;if((void 0===r||r>a)&&(r=a),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var i=!1;;)switch(n){case"hex":return _(this,e,t,r);case"utf8":case"utf-8":return A(this,e,t,r);case"ascii":return x(this,e,t,r);case"latin1":case"binary":return R(this,e,t,r);case"base64":return E(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,e,t,r);default:if(i)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),i=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var ee=4096;o.prototype.slice=function(e,t){var r=this.length;e=~~e,t=void 0===t?r:~~t,e<0?(e+=r,e<0&&(e=0)):e>r&&(e=r),t<0?(t+=r,t<0&&(t=0)):t>r&&(t=r),t<e&&(t=e);var n;if(o.TYPED_ARRAY_SUPPORT)n=this.subarray(e,t),n.__proto__=o.prototype;else{var a=t-e;n=new o(a,void 0);for(var i=0;i<a;++i)n[i]=this[i+e]}return n},o.prototype.readUIntLE=function(e,t,r){e|=0,t|=0,r||L(e,t,this.length);for(var n=this[e],a=1,i=0;++i<t&&(a*=256);)n+=this[e+i]*a;return n},o.prototype.readUIntBE=function(e,t,r){e|=0,t|=0,r||L(e,t,this.length);for(var n=this[e+--t],a=1;t>0&&(a*=256);)n+=this[e+--t]*a;return n},o.prototype.readUInt8=function(e,t){return t||L(e,1,this.length),this[e]},o.prototype.readUInt16LE=function(e,t){return t||L(e,2,this.length),this[e]|this[e+1]<<8},o.prototype.readUInt16BE=function(e,t){return t||L(e,2,this.length),this[e]<<8|this[e+1]},o.prototype.readUInt32LE=function(e,t){return t||L(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},o.prototype.readUInt32BE=function(e,t){return t||L(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},o.prototype.readIntLE=function(e,t,r){e|=0,t|=0,r||L(e,t,this.length);for(var n=this[e],a=1,i=0;++i<t&&(a*=256);)n+=this[e+i]*a;return a*=128,n>=a&&(n-=Math.pow(2,8*t)),n},o.prototype.readIntBE=function(e,t,r){e|=0,t|=0,r||L(e,t,this.length);for(var n=t,a=1,i=this[e+--n];n>0&&(a*=256);)i+=this[e+--n]*a;return a*=128,i>=a&&(i-=Math.pow(2,8*t)),i},o.prototype.readInt8=function(e,t){return t||L(e,1,this.length),128&this[e]?(255-this[e]+1)*-1:this[e]},o.prototype.readInt16LE=function(e,t){t||L(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},o.prototype.readInt16BE=function(e,t){t||L(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},o.prototype.readInt32LE=function(e,t){return t||L(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},o.prototype.readInt32BE=function(e,t){return t||L(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},o.prototype.readFloatLE=function(e,t){return t||L(e,4,this.length),Q.read(this,e,!0,23,4)},o.prototype.readFloatBE=function(e,t){return t||L(e,4,this.length),Q.read(this,e,!1,23,4)},o.prototype.readDoubleLE=function(e,t){return t||L(e,8,this.length),Q.read(this,e,!0,52,8)},o.prototype.readDoubleBE=function(e,t){return t||L(e,8,this.length),Q.read(this,e,!1,52,8)},o.prototype.writeUIntLE=function(e,t,r,n){if(e=+e,t|=0,r|=0,!n){var a=Math.pow(2,8*r)-1;K(this,e,t,r,a,0)}var i=1,o=0;for(this[t]=255&e;++o<r&&(i*=256);)this[t+o]=e/i&255;return t+r},o.prototype.writeUIntBE=function(e,t,r,n){if(e=+e,t|=0,r|=0,!n){var a=Math.pow(2,8*r)-1;K(this,e,t,r,a,0)}var i=r-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+r},o.prototype.writeUInt8=function(e,t,r){return e=+e,t|=0,r||K(this,e,t,1,255,0),o.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},o.prototype.writeUInt16LE=function(e,t,r){return e=+e,t|=0,r||K(this,e,t,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):C(this,e,t,!0),t+2},o.prototype.writeUInt16BE=function(e,t,r){return e=+e,t|=0,r||K(this,e,t,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):C(this,e,t,!1),t+2},o.prototype.writeUInt32LE=function(e,t,r){return e=+e,t|=0,r||K(this,e,t,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):j(this,e,t,!0),t+4},o.prototype.writeUInt32BE=function(e,t,r){return e=+e,t|=0,r||K(this,e,t,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):j(this,e,t,!1),t+4},o.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t|=0,!n){var a=Math.pow(2,8*r-1);K(this,e,t,r,a-1,-a)}var i=0,o=1,u=0;for(this[t]=255&e;++i<r&&(o*=256);)e<0&&0===u&&0!==this[t+i-1]&&(u=1),this[t+i]=(e/o>>0)-u&255;return t+r},o.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t|=0,!n){var a=Math.pow(2,8*r-1);K(this,e,t,r,a-1,-a)}var i=r-1,o=1,u=0;for(this[t+i]=255&e;--i>=0&&(o*=256);)e<0&&0===u&&0!==this[t+i+1]&&(u=1),this[t+i]=(e/o>>0)-u&255;return t+r},o.prototype.writeInt8=function(e,t,r){return e=+e,t|=0,r||K(this,e,t,1,127,-128),o.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},o.prototype.writeInt16LE=function(e,t,r){return e=+e,t|=0,r||K(this,e,t,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):C(this,e,t,!0),t+2},o.prototype.writeInt16BE=function(e,t,r){return e=+e,t|=0,r||K(this,e,t,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):C(this,e,t,!1),t+2},o.prototype.writeInt32LE=function(e,t,r){return e=+e,t|=0,r||K(this,e,t,4,2147483647,-2147483648),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):j(this,e,t,!0),t+4},o.prototype.writeInt32BE=function(e,t,r){return e=+e,t|=0,r||K(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):j(this,e,t,!1),t+4},o.prototype.writeFloatLE=function(e,t,r){return N(this,e,t,!0,r)},o.prototype.writeFloatBE=function(e,t,r){return N(this,e,t,!1,r)},o.prototype.writeDoubleLE=function(e,t,r){return Y(this,e,t,!0,r)},o.prototype.writeDoubleBE=function(e,t,r){return Y(this,e,t,!1,r)},o.prototype.copy=function(e,t,r,n){if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var a,i=n-r;if(this===e&&r<t&&t<n)for(a=i-1;a>=0;--a)e[a+t]=this[a+r];else if(i<1e3||!o.TYPED_ARRAY_SUPPORT)for(a=0;a<i;++a)e[a+t]=this[a+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+i),t);return i},o.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===e.length){var a=e.charCodeAt(0);a<256&&(e=a)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!o.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0);var i;if("number"==typeof e)for(i=t;i<r;++i)this[i]=e;else{var u=o.isBuffer(e)?e:z(new o(e,n).toString()),s=u.length;for(i=0;i<r-t;++i)this[i+t]=u[i%s]}return this};var te=/[^+\/0-9A-Za-z-_]/g}).call(t,function(){return this}())},function(e,t){"use strict";function r(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===e[t-2]?2:"="===e[t-1]?1:0}function n(e){return 3*e.length/4-r(e)}function a(e){var t,n,a,i,o,u=e.length;i=r(e),o=new f(3*u/4-i),n=i>0?u-4:u;var s=0;for(t=0;t<n;t+=4)a=c[e.charCodeAt(t)]<<18|c[e.charCodeAt(t+1)]<<12|c[e.charCodeAt(t+2)]<<6|c[e.charCodeAt(t+3)],o[s++]=a>>16&255,o[s++]=a>>8&255,o[s++]=255&a;return 2===i?(a=c[e.charCodeAt(t)]<<2|c[e.charCodeAt(t+1)]>>4,o[s++]=255&a):1===i&&(a=c[e.charCodeAt(t)]<<10|c[e.charCodeAt(t+1)]<<4|c[e.charCodeAt(t+2)]>>2,o[s++]=a>>8&255,o[s++]=255&a),o}function i(e){return s[e>>18&63]+s[e>>12&63]+s[e>>6&63]+s[63&e]}function o(e,t,r){for(var n,a=[],o=t;o<r;o+=3)n=(e[o]<<16)+(e[o+1]<<8)+e[o+2],a.push(i(n));return a.join("")}function u(e){for(var t,r=e.length,n=r%3,a="",i=[],u=16383,c=0,f=r-n;c<f;c+=u)i.push(o(e,c,c+u>f?f:c+u));return 1===n?(t=e[r-1],a+=s[t>>2],a+=s[t<<4&63],a+="=="):2===n&&(t=(e[r-2]<<8)+e[r-1],a+=s[t>>10],a+=s[t>>4&63],a+=s[t<<2&63],a+="="),i.push(a),i.join("")}t.byteLength=n,t.toByteArray=a,t.fromByteArray=u;for(var s=[],c=[],f="undefined"!=typeof Uint8Array?Uint8Array:Array,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",h=0,p=l.length;h<p;++h)s[h]=l[h],c[l.charCodeAt(h)]=h;c["-".charCodeAt(0)]=62,c["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,r,n,a){var i,o,u=8*a-n-1,s=(1<<u)-1,c=s>>1,f=-7,l=r?a-1:0,h=r?-1:1,p=e[t+l];for(l+=h,i=p&(1<<-f)-1,p>>=-f,f+=u;f>0;i=256*i+e[t+l],l+=h,f-=8);for(o=i&(1<<-f)-1,i>>=-f,f+=n;f>0;o=256*o+e[t+l],l+=h,f-=8);if(0===i)i=1-c;else{if(i===s)return o?NaN:(p?-1:1)*(1/0);o+=Math.pow(2,n),i-=c}return(p?-1:1)*o*Math.pow(2,i-n)},t.write=function(e,t,r,n,a,i){var o,u,s,c=8*i-a-1,f=(1<<c)-1,l=f>>1,h=23===a?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:i-1,d=n?1:-1,y=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(u=isNaN(t)?1:0,o=f):(o=Math.floor(Math.log(t)/Math.LN2),t*(s=Math.pow(2,-o))<1&&(o--,s*=2),t+=o+l>=1?h/s:h*Math.pow(2,1-l),t*s>=2&&(o++,s/=2),o+l>=f?(u=0,o=f):o+l>=1?(u=(t*s-1)*Math.pow(2,a),o+=l):(u=t*Math.pow(2,l-1)*Math.pow(2,a),o=0));a>=8;e[r+p]=255&u,p+=d,u/=256,a-=8);for(o=o<<a|u,c+=a;c>0;e[r+p]=255&o,p+=d,o/=256,c-=8);e[r+p-d]|=128*y}},function(e,t){var r={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}},function(e,t,r){var n=r(17),a="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";e.exports=n(a)},function(e,t,r){var n=r(18).Buffer;e.exports=function(e){function t(t){if(0===t.length)return"";for(var r=[0],n=0;n<t.length;++n){for(var a=0,i=t[n];a<r.length;++a)i+=r[a]<<8,r[a]=i%o,i=i/o|0;for(;i>0;)r.push(i%o),i=i/o|0}for(var u="",s=0;0===t[s]&&s<t.length-1;++s)u+=e[0];for(var c=r.length-1;c>=0;--c)u+=e[r[c]];return u}function r(e){if(0===e.length)return n.allocUnsafe(0);for(var t=[0],r=0;r<e.length;r++){var a=i[e[r]];if(void 0===a)return;for(var s=0,c=a;s<t.length;++s)c+=t[s]*o,t[s]=255&c,c>>=8;for(;c>0;)t.push(255&c),c>>=8}for(var f=0;e[f]===u&&f<e.length-1;++f)t.push(0);return n.from(t.reverse())}function a(e){var t=r(e);if(t)return t;throw new Error("Non-base"+o+" character")}for(var i={},o=e.length,u=e.charAt(0),s=0;s<e.length;s++){var c=e.charAt(s);if(void 0!==i[c])throw new TypeError(c+" is ambiguous");i[c]=s}return{encode:t,decodeUnsafe:r,decode:a}}},function(e,t,r){function n(e,t){for(var r in e)t[r]=e[r]}function a(e,t,r){return o(e,t,r)}var i=r(19),o=i.Buffer;o.from&&o.alloc&&o.allocUnsafe&&o.allocUnsafeSlow?e.exports=i:(n(i,t),t.Buffer=a),n(o,a),a.from=function(e,t,r){if("number"==typeof e)throw new TypeError("Argument must not be a number");return o(e,t,r)},a.alloc=function(e,t,r){if("number"!=typeof e)throw new TypeError("Argument must be a number");var n=o(e);return void 0!==t?"string"==typeof r?n.fill(t,r):n.fill(t):n.fill(0),n},a.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return o(e)},a.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i.SlowBuffer(e)}},function(e,t,r){(function(e){function n(){return e.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function e(t){return this instanceof e?(this.length=0,this.parent=void 0,"number"==typeof t?a(this,t):"string"==typeof t?i(this,t,arguments.length>1?arguments[1]:"utf8"):o(this,t)):arguments.length>1?new e(t,arguments[1]):new e(t)}function a(t,r){if(t=p(t,r<0?0:0|d(r)),!e.TYPED_ARRAY_SUPPORT)for(var n=0;n<r;n++)t[n]=0;return t}function i(e,t,r){"string"==typeof r&&""!==r||(r="utf8");var n=0|v(t,r);return e=p(e,n),e.write(t,r),e}function o(t,r){if(e.isBuffer(r))return u(t,r);if(X(r))return s(t,r);if(null==r)throw new TypeError("must start with number, buffer, array or string");if("undefined"!=typeof ArrayBuffer){if(r.buffer instanceof ArrayBuffer)return c(t,r);if(r instanceof ArrayBuffer)return f(t,r)}return r.length?l(t,r):h(t,r)}function u(e,t){var r=0|d(t.length);return e=p(e,r),t.copy(e,0,0,r),e}function s(e,t){var r=0|d(t.length);e=p(e,r);for(var n=0;n<r;n+=1)e[n]=255&t[n];return e}function c(e,t){var r=0|d(t.length);e=p(e,r);for(var n=0;n<r;n+=1)e[n]=255&t[n];return e}function f(t,r){return e.TYPED_ARRAY_SUPPORT?(r.byteLength,t=e._augment(new Uint8Array(r))):t=c(t,new Uint8Array(r)),t}function l(e,t){var r=0|d(t.length);e=p(e,r);for(var n=0;n<r;n+=1)e[n]=255&t[n];return e}function h(e,t){var r,n=0;"Buffer"===t.type&&X(t.data)&&(r=t.data,n=0|d(r.length)),e=p(e,n);for(var a=0;a<n;a+=1)e[a]=255&r[a];return e}function p(t,r){e.TYPED_ARRAY_SUPPORT?t=e._augment(new Uint8Array(r)):(t.length=r,t._isBuffer=!0);var n=0!==r&&r<=e.poolSize>>>1;return n&&(t.parent=W),t}function d(e){if(e>=n())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n().toString(16)+" bytes");return 0|e}function y(t,r){if(!(this instanceof y))return new y(t,r);var n=new e(t,r);return delete n.parent,n}function v(e,t){"string"!=typeof e&&(e=""+e);var r=e.length;if(0===r)return 0;for(var n=!1;;)switch(t){case"ascii":case"binary":case"raw":case"raws":return r;case"utf8":case"utf-8":return Y(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return H(e).length;default:if(n)return Y(e).length;t=(""+t).toLowerCase(),n=!0}}function g(e,t,r){var n=!1;if(t|=0,r=void 0===r||r===1/0?this.length:0|r,e||(e="utf8"),t<0&&(t=0),r>this.length&&(r=this.length),r<=t)return"";for(;;)switch(e){case"hex":return S(this,t,r);case"utf8":case"utf-8":return R(this,t,r);case"ascii":return I(this,t,r);case"binary":return T(this,t,r);case"base64":return x(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function m(e,t,r,n){r=Number(r)||0;var a=e.length-r;n?(n=Number(n),n>a&&(n=a)):n=a;var i=t.length;if(i%2!==0)throw new Error("Invalid hex string");n>i/2&&(n=i/2);for(var o=0;o<n;o++){var u=parseInt(t.substr(2*o,2),16);if(isNaN(u))throw new Error("Invalid hex string");e[r+o]=u}return o}function w(e,t,r,n){return z(Y(t,e.length-r),e,r,n)}function b(e,t,r,n){return z(q(t),e,r,n)}function k(e,t,r,n){return b(e,t,r,n)}function _(e,t,r,n){return z(H(t),e,r,n)}function A(e,t,r,n){return z(F(t,e.length-r),e,r,n)}function x(e,t,r){return 0===t&&r===e.length?J.fromByteArray(e):J.fromByteArray(e.slice(t,r))}function R(e,t,r){r=Math.min(e.length,r);for(var n=[],a=t;a<r;){var i=e[a],o=null,u=i>239?4:i>223?3:i>191?2:1;if(a+u<=r){var s,c,f,l;switch(u){case 1:i<128&&(o=i);break;case 2:s=e[a+1],128===(192&s)&&(l=(31&i)<<6|63&s,l>127&&(o=l));break;case 3:s=e[a+1],c=e[a+2],128===(192&s)&&128===(192&c)&&(l=(15&i)<<12|(63&s)<<6|63&c,l>2047&&(l<55296||l>57343)&&(o=l));break;case 4:s=e[a+1],c=e[a+2],f=e[a+3],128===(192&s)&&128===(192&c)&&128===(192&f)&&(l=(15&i)<<18|(63&s)<<12|(63&c)<<6|63&f,l>65535&&l<1114112&&(o=l))}}null===o?(o=65533,u=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|1023&o),n.push(o),a+=u}return E(n)}function E(e){var t=e.length;if(t<=G)return String.fromCharCode.apply(String,e);for(var r="",n=0;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=G));return r}function I(e,t,r){var n="";r=Math.min(e.length,r);for(var a=t;a<r;a++)n+=String.fromCharCode(127&e[a]);return n}function T(e,t,r){var n="";r=Math.min(e.length,r);for(var a=t;a<r;a++)n+=String.fromCharCode(e[a]);return n}function S(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var a="",i=t;i<r;i++)a+=N(e[i]);return a}function P(e,t,r){for(var n=e.slice(t,r),a="",i=0;i<n.length;i+=2)a+=String.fromCharCode(n[i]+256*n[i+1]);return a}function U(e,t,r){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function B(t,r,n,a,i,o){if(!e.isBuffer(t))throw new TypeError("buffer must be a Buffer instance");if(r>i||r<o)throw new RangeError("value is out of bounds");if(n+a>t.length)throw new RangeError("index out of range")}function O(e,t,r,n){t<0&&(t=65535+t+1);for(var a=0,i=Math.min(e.length-r,2);a<i;a++)e[r+a]=(t&255<<8*(n?a:1-a))>>>8*(n?a:1-a)}function M(e,t,r,n){t<0&&(t=4294967295+t+1);for(var a=0,i=Math.min(e.length-r,4);a<i;a++)e[r+a]=t>>>8*(n?a:3-a)&255}function L(e,t,r,n,a,i){if(t>a||t<i)throw new RangeError("value is out of bounds");if(r+n>e.length)throw new RangeError("index out of range");if(r<0)throw new RangeError("index out of range")}function K(e,t,r,n,a){return a||L(e,t,r,4,3.4028234663852886e38,-3.4028234663852886e38),V.write(e,t,r,n,23,4),r+4}function C(e,t,r,n,a){return a||L(e,t,r,8,1.7976931348623157e308,-1.7976931348623157e308),V.write(e,t,r,n,52,8),r+8}function j(e){if(e=D(e).replace(Q,""),e.length<2)return"";for(;e.length%4!==0;)e+="=";return e}function D(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function N(e){return e<16?"0"+e.toString(16):e.toString(16)}function Y(e,t){t=t||1/0;for(var r,n=e.length,a=null,i=[],o=0;o<n;o++){if(r=e.charCodeAt(o),r>55295&&r<57344){if(!a){if(r>56319){(t-=3)>-1&&i.push(239,191,189);continue}if(o+1===n){(t-=3)>-1&&i.push(239,191,189);continue}a=r;continue}if(r<56320){(t-=3)>-1&&i.push(239,191,189),a=r;continue}r=a-55296<<10|r-56320|65536}else a&&(t-=3)>-1&&i.push(239,191,189);if(a=null,r<128){if((t-=1)<0)break;i.push(r)}else if(r<2048){if((t-=2)<0)break;i.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;i.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return i}function q(e){for(var t=[],r=0;r<e.length;r++)t.push(255&e.charCodeAt(r));return t}function F(e,t){for(var r,n,a,i=[],o=0;o<e.length&&!((t-=2)<0);o++)r=e.charCodeAt(o),n=r>>8,a=r%256,i.push(a),i.push(n);return i}function H(e){return J.toByteArray(j(e))}function z(e,t,r,n){for(var a=0;a<n&&!(a+r>=t.length||a>=e.length);a++)t[a+r]=e[a];return a}/*!
	 * The buffer module from node.js, for the browser.
	 *
	 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
	 * @license  MIT
	 */
var J=r(20),V=r(14),X=r(21);t.Buffer=e,t.SlowBuffer=y,t.INSPECT_MAX_BYTES=50,e.poolSize=8192;var W={};e.TYPED_ARRAY_SUPPORT=function(){function e(){}try{var t=new Uint8Array(1);return t.foo=function(){return 42},t.constructor=e,42===t.foo()&&t.constructor===e&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(e){return!1}}(),e.isBuffer=function(e){return!(null==e||!e._isBuffer)},e.compare=function(t,r){if(!e.isBuffer(t)||!e.isBuffer(r))throw new TypeError("Arguments must be Buffers");if(t===r)return 0;for(var n=t.length,a=r.length,i=0,o=Math.min(n,a);i<o&&t[i]===r[i];)++i;return i!==o&&(n=t[i],a=r[i]),n<a?-1:a<n?1:0},e.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},e.concat=function(t,r){if(!X(t))throw new TypeError("list argument must be an Array of Buffers.");if(0===t.length)return new e(0);var n;if(void 0===r)for(r=0,n=0;n<t.length;n++)r+=t[n].length;var a=new e(r),i=0;for(n=0;n<t.length;n++){var o=t[n];o.copy(a,i),i+=o.length}return a},e.byteLength=v,e.prototype.length=void 0,e.prototype.parent=void 0,e.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?R(this,0,e):g.apply(this,arguments)},e.prototype.equals=function(t){if(!e.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===e.compare(this,t)},e.prototype.inspect=function(){var e="",r=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(e+=" ... ")),"<Buffer "+e+">"},e.prototype.compare=function(t){if(!e.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t?0:e.compare(this,t)},e.prototype.indexOf=function(t,r){function n(e,t,r){for(var n=-1,a=0;r+a<e.length;a++)if(e[r+a]===t[n===-1?0:a-n]){if(n===-1&&(n=a),a-n+1===t.length)return r+n}else n=-1;return-1}if(r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r>>=0,0===this.length)return-1;if(r>=this.length)return-1;if(r<0&&(r=Math.max(this.length+r,0)),"string"==typeof t)return 0===t.length?-1:String.prototype.indexOf.call(this,t,r);if(e.isBuffer(t))return n(this,t,r);if("number"==typeof t)return e.TYPED_ARRAY_SUPPORT&&"function"===Uint8Array.prototype.indexOf?Uint8Array.prototype.indexOf.call(this,t,r):n(this,[t],r);throw new TypeError("val must be string, number or Buffer")},e.prototype.get=function(e){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(e)},e.prototype.set=function(e,t){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(e,t)},e.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else if(isFinite(t))t|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0);else{var a=n;n=t,t=0|r,r=a}var i=this.length-t;if((void 0===r||r>i)&&(r=i),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return m(this,e,t,r);case"utf8":case"utf-8":return w(this,e,t,r);case"ascii":return b(this,e,t,r);case"binary":return k(this,e,t,r);case"base64":return _(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,e,t,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},e.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var G=4096;e.prototype.slice=function(t,r){var n=this.length;t=~~t,r=void 0===r?n:~~r,t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),r<0?(r+=n,r<0&&(r=0)):r>n&&(r=n),r<t&&(r=t);var a;if(e.TYPED_ARRAY_SUPPORT)a=e._augment(this.subarray(t,r));else{var i=r-t;a=new e(i,void 0);for(var o=0;o<i;o++)a[o]=this[o+t]}return a.length&&(a.parent=this.parent||this),a},e.prototype.readUIntLE=function(e,t,r){e|=0,t|=0,r||U(e,t,this.length);for(var n=this[e],a=1,i=0;++i<t&&(a*=256);)n+=this[e+i]*a;return n},e.prototype.readUIntBE=function(e,t,r){e|=0,t|=0,r||U(e,t,this.length);for(var n=this[e+--t],a=1;t>0&&(a*=256);)n+=this[e+--t]*a;return n},e.prototype.readUInt8=function(e,t){return t||U(e,1,this.length),this[e]},e.prototype.readUInt16LE=function(e,t){return t||U(e,2,this.length),this[e]|this[e+1]<<8},e.prototype.readUInt16BE=function(e,t){return t||U(e,2,this.length),this[e]<<8|this[e+1]},e.prototype.readUInt32LE=function(e,t){return t||U(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},e.prototype.readUInt32BE=function(e,t){return t||U(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},e.prototype.readIntLE=function(e,t,r){e|=0,t|=0,r||U(e,t,this.length);for(var n=this[e],a=1,i=0;++i<t&&(a*=256);)n+=this[e+i]*a;return a*=128,n>=a&&(n-=Math.pow(2,8*t)),n},e.prototype.readIntBE=function(e,t,r){e|=0,t|=0,r||U(e,t,this.length);for(var n=t,a=1,i=this[e+--n];n>0&&(a*=256);)i+=this[e+--n]*a;return a*=128,i>=a&&(i-=Math.pow(2,8*t)),i},e.prototype.readInt8=function(e,t){return t||U(e,1,this.length),128&this[e]?(255-this[e]+1)*-1:this[e]},e.prototype.readInt16LE=function(e,t){t||U(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},e.prototype.readInt16BE=function(e,t){t||U(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},e.prototype.readInt32LE=function(e,t){return t||U(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},e.prototype.readInt32BE=function(e,t){return t||U(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},e.prototype.readFloatLE=function(e,t){return t||U(e,4,this.length),V.read(this,e,!0,23,4)},e.prototype.readFloatBE=function(e,t){return t||U(e,4,this.length),V.read(this,e,!1,23,4)},e.prototype.readDoubleLE=function(e,t){return t||U(e,8,this.length),V.read(this,e,!0,52,8)},e.prototype.readDoubleBE=function(e,t){return t||U(e,8,this.length),V.read(this,e,!1,52,8)},e.prototype.writeUIntLE=function(e,t,r,n){e=+e,t|=0,r|=0,n||B(this,e,t,r,Math.pow(2,8*r),0);var a=1,i=0;for(this[t]=255&e;++i<r&&(a*=256);)this[t+i]=e/a&255;return t+r},e.prototype.writeUIntBE=function(e,t,r,n){e=+e,t|=0,r|=0,n||B(this,e,t,r,Math.pow(2,8*r),0);var a=r-1,i=1;for(this[t+a]=255&e;--a>=0&&(i*=256);)this[t+a]=e/i&255;return t+r},e.prototype.writeUInt8=function(t,r,n){return t=+t,r|=0,n||B(this,t,r,1,255,0),e.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[r]=t,r+1},e.prototype.writeUInt16LE=function(t,r,n){return t=+t,r|=0,n||B(this,t,r,2,65535,0),e.TYPED_ARRAY_SUPPORT?(this[r]=t,this[r+1]=t>>>8):O(this,t,r,!0),r+2},e.prototype.writeUInt16BE=function(t,r,n){return t=+t,r|=0,n||B(this,t,r,2,65535,0),e.TYPED_ARRAY_SUPPORT?(this[r]=t>>>8,this[r+1]=t):O(this,t,r,!1),r+2},e.prototype.writeUInt32LE=function(t,r,n){return t=+t,r|=0,n||B(this,t,r,4,4294967295,0),e.TYPED_ARRAY_SUPPORT?(this[r+3]=t>>>24,this[r+2]=t>>>16,this[r+1]=t>>>8,this[r]=t):M(this,t,r,!0),r+4},e.prototype.writeUInt32BE=function(t,r,n){return t=+t,r|=0,n||B(this,t,r,4,4294967295,0),e.TYPED_ARRAY_SUPPORT?(this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=t):M(this,t,r,!1),r+4},e.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t|=0,!n){var a=Math.pow(2,8*r-1);B(this,e,t,r,a-1,-a)}var i=0,o=1,u=e<0?1:0;for(this[t]=255&e;++i<r&&(o*=256);)this[t+i]=(e/o>>0)-u&255;return t+r},e.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t|=0,!n){var a=Math.pow(2,8*r-1);B(this,e,t,r,a-1,-a)}var i=r-1,o=1,u=e<0?1:0;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=(e/o>>0)-u&255;return t+r},e.prototype.writeInt8=function(t,r,n){return t=+t,r|=0,n||B(this,t,r,1,127,-128),e.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[r]=t,r+1},e.prototype.writeInt16LE=function(t,r,n){return t=+t,r|=0,n||B(this,t,r,2,32767,-32768),e.TYPED_ARRAY_SUPPORT?(this[r]=t,this[r+1]=t>>>8):O(this,t,r,!0),r+2},e.prototype.writeInt16BE=function(t,r,n){return t=+t,r|=0,n||B(this,t,r,2,32767,-32768),e.TYPED_ARRAY_SUPPORT?(this[r]=t>>>8,this[r+1]=t):O(this,t,r,!1),r+2},e.prototype.writeInt32LE=function(t,r,n){return t=+t,r|=0,n||B(this,t,r,4,2147483647,-2147483648),e.TYPED_ARRAY_SUPPORT?(this[r]=t,this[r+1]=t>>>8,this[r+2]=t>>>16,this[r+3]=t>>>24):M(this,t,r,!0),r+4},e.prototype.writeInt32BE=function(t,r,n){return t=+t,r|=0,n||B(this,t,r,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),e.TYPED_ARRAY_SUPPORT?(this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=t):M(this,t,r,!1),r+4},e.prototype.writeFloatLE=function(e,t,r){return K(this,e,t,!0,r)},e.prototype.writeFloatBE=function(e,t,r){return K(this,e,t,!1,r)},e.prototype.writeDoubleLE=function(e,t,r){return C(this,e,t,!0,r)},e.prototype.writeDoubleBE=function(e,t,r){return C(this,e,t,!1,r)},e.prototype.copy=function(t,r,n,a){if(n||(n=0),a||0===a||(a=this.length),r>=t.length&&(r=t.length),r||(r=0),a>0&&a<n&&(a=n),a===n)return 0;if(0===t.length||0===this.length)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(a<0)throw new RangeError("sourceEnd out of bounds");a>this.length&&(a=this.length),t.length-r<a-n&&(a=t.length-r+n);var i,o=a-n;if(this===t&&n<r&&r<a)for(i=o-1;i>=0;i--)t[i+r]=this[i+n];else if(o<1e3||!e.TYPED_ARRAY_SUPPORT)for(i=0;i<o;i++)t[i+r]=this[i+n];else t._set(this.subarray(n,n+o),r);return o},e.prototype.fill=function(e,t,r){if(e||(e=0),t||(t=0),r||(r=this.length),r<t)throw new RangeError("end < start");if(r!==t&&0!==this.length){if(t<0||t>=this.length)throw new RangeError("start out of bounds");if(r<0||r>this.length)throw new RangeError("end out of bounds");var n;if("number"==typeof e)for(n=t;n<r;n++)this[n]=e;else{var a=Y(e.toString()),i=a.length;for(n=t;n<r;n++)this[n]=a[n%i]}return this}},e.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(e.TYPED_ARRAY_SUPPORT)return new e(this).buffer;for(var t=new Uint8Array(this.length),r=0,n=t.length;r<n;r+=1)t[r]=this[r];return t.buffer}throw new TypeError("Buffer.toArrayBuffer not supported in this browser")};var Z=e.prototype;e._augment=function(t){return t.constructor=e,t._isBuffer=!0,t._set=t.set,t.get=Z.get,t.set=Z.set,t.write=Z.write,t.toString=Z.toString,t.toLocaleString=Z.toString,t.toJSON=Z.toJSON,t.equals=Z.equals,t.compare=Z.compare,t.indexOf=Z.indexOf,t.copy=Z.copy,t.slice=Z.slice,t.readUIntLE=Z.readUIntLE,t.readUIntBE=Z.readUIntBE,t.readUInt8=Z.readUInt8,t.readUInt16LE=Z.readUInt16LE,t.readUInt16BE=Z.readUInt16BE,t.readUInt32LE=Z.readUInt32LE,t.readUInt32BE=Z.readUInt32BE,t.readIntLE=Z.readIntLE,t.readIntBE=Z.readIntBE,t.readInt8=Z.readInt8,t.readInt16LE=Z.readInt16LE,t.readInt16BE=Z.readInt16BE,t.readInt32LE=Z.readInt32LE,t.readInt32BE=Z.readInt32BE,t.readFloatLE=Z.readFloatLE,t.readFloatBE=Z.readFloatBE,t.readDoubleLE=Z.readDoubleLE,t.readDoubleBE=Z.readDoubleBE,t.writeUInt8=Z.writeUInt8,t.writeUIntLE=Z.writeUIntLE,t.writeUIntBE=Z.writeUIntBE,t.writeUInt16LE=Z.writeUInt16LE,t.writeUInt16BE=Z.writeUInt16BE,t.writeUInt32LE=Z.writeUInt32LE,t.writeUInt32BE=Z.writeUInt32BE,t.writeIntLE=Z.writeIntLE,t.writeIntBE=Z.writeIntBE,t.writeInt8=Z.writeInt8,t.writeInt16LE=Z.writeInt16LE,t.writeInt16BE=Z.writeInt16BE,t.writeInt32LE=Z.writeInt32LE,t.writeInt32BE=Z.writeInt32BE,t.writeFloatLE=Z.writeFloatLE,t.writeFloatBE=Z.writeFloatBE,t.writeDoubleLE=Z.writeDoubleLE,t.writeDoubleBE=Z.writeDoubleBE,t.fill=Z.fill,t.inspect=Z.inspect,t.toArrayBuffer=Z.toArrayBuffer,t};var Q=/[^+\/0-9A-Za-z-_]/g}).call(t,r(12).Buffer)},function(e,t,r){var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";!function(e){"use strict";function t(e){var t=e.charCodeAt(0);return t===o||t===l?62:t===u||t===h?63:t<s?-1:t<s+10?t-s+26+26:t<f+26?t-f:t<c+26?t-c+26:void 0}function r(e){function r(e){c[l++]=e}var n,a,o,u,s,c;if(e.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var f=e.length;s="="===e.charAt(f-2)?2:"="===e.charAt(f-1)?1:0,c=new i(3*e.length/4-s),o=s>0?e.length-4:e.length;var l=0;for(n=0,a=0;n<o;n+=4,a+=3)u=t(e.charAt(n))<<18|t(e.charAt(n+1))<<12|t(e.charAt(n+2))<<6|t(e.charAt(n+3)),r((16711680&u)>>16),r((65280&u)>>8),r(255&u);return 2===s?(u=t(e.charAt(n))<<2|t(e.charAt(n+1))>>4,r(255&u)):1===s&&(u=t(e.charAt(n))<<10|t(e.charAt(n+1))<<4|t(e.charAt(n+2))>>2,r(u>>8&255),r(255&u)),c}function a(e){function t(e){return n.charAt(e)}function r(e){return t(e>>18&63)+t(e>>12&63)+t(e>>6&63)+t(63&e)}var a,i,o,u=e.length%3,s="";for(a=0,o=e.length-u;a<o;a+=3)i=(e[a]<<16)+(e[a+1]<<8)+e[a+2],s+=r(i);switch(u){case 1:i=e[e.length-1],s+=t(i>>2),s+=t(i<<4&63),s+="==";break;case 2:i=(e[e.length-2]<<8)+e[e.length-1],s+=t(i>>10),s+=t(i>>4&63),s+=t(i<<2&63),s+="="}return s}var i="undefined"!=typeof Uint8Array?Uint8Array:Array,o="+".charCodeAt(0),u="/".charCodeAt(0),s="0".charCodeAt(0),c="a".charCodeAt(0),f="A".charCodeAt(0),l="-".charCodeAt(0),h="_".charCodeAt(0);e.toByteArray=r,e.fromByteArray=a}(t)},function(e,t){var r=Array.isArray,n=Object.prototype.toString;e.exports=r||function(e){return!!e&&"[object Array]"==n.call(e)}},function(e,t,r){var n;!function(t,a){var i={};a(i);var o=i.default;for(var u in i)o[u]=i[u];"object"==typeof e&&"object"==typeof e.exports?e.exports=o:(n=function(){return o}.call(i,r,i,e),!(void 0!==n&&(e.exports=n)))}(this,function(e){"use strict";function t(e,t,r,n,a){for(var o,u,s,c,f,l,h,p,d,y,v,g,m;a>=64;){for(o=t[0],u=t[1],s=t[2],c=t[3],f=t[4],l=t[5],h=t[6],p=t[7],y=0;y<16;y++)v=n+4*y,e[y]=(255&r[v])<<24|(255&r[v+1])<<16|(255&r[v+2])<<8|255&r[v+3];for(y=16;y<64;y++)d=e[y-2],g=(d>>>17|d<<15)^(d>>>19|d<<13)^d>>>10,d=e[y-15],m=(d>>>7|d<<25)^(d>>>18|d<<14)^d>>>3,e[y]=(g+e[y-7]|0)+(m+e[y-16]|0);for(y=0;y<64;y++)g=(((f>>>6|f<<26)^(f>>>11|f<<21)^(f>>>25|f<<7))+(f&l^~f&h)|0)+(p+(i[y]+e[y]|0)|0)|0,m=((o>>>2|o<<30)^(o>>>13|o<<19)^(o>>>22|o<<10))+(o&u^o&s^u&s)|0,p=h,h=l,l=f,f=c+g|0,c=s,s=u,u=o,o=g+m|0;t[0]+=o,t[1]+=u,t[2]+=s,t[3]+=c,t[4]+=f,t[5]+=l,t[6]+=h,t[7]+=p,n+=64,a-=64}return n}function r(e){var t=(new o).update(e),r=t.digest();return t.clean(),r}function n(e,t){var r=new u(e).update(t),n=r.digest();return r.clean(),n}function a(e,t,r,n){for(var a=new u(e),i=a.digestLength,o=new Uint8Array(4),s=new Uint8Array(i),c=new Uint8Array(i),f=new Uint8Array(n),l=0;l*i<n;l++){var h=l+1;o[0]=h>>>24&255,o[1]=h>>>16&255,o[2]=h>>>8&255,o[3]=h>>>0&255,a.reset(),a.update(t),a.update(o),a.finish(c);for(var p=0;p<i;p++)s[p]=c[p];for(var p=2;p<=r;p++){a.reset(),a.update(c).finish(c);for(var d=0;d<i;d++)s[d]^=c[d]}for(var p=0;p<i&&l*i+p<n;p++)f[l*i+p]=s[p]}for(var l=0;l<i;l++)s[l]=c[l]=0;for(var l=0;l<4;l++)o[l]=0;return a.clean(),f}e.digestLength=32,e.blockSize=64;var i=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),o=function(){function r(){this.digestLength=e.digestLength,this.blockSize=e.blockSize,this.state=new Int32Array(8),this.temp=new Int32Array(64),this.buffer=new Uint8Array(128),this.bufferLength=0,this.bytesHashed=0,this.finished=!1,this.reset()}return r.prototype.reset=function(){return this.state[0]=1779033703,this.state[1]=3144134277,this.state[2]=1013904242,this.state[3]=2773480762,this.state[4]=1359893119,this.state[5]=2600822924,this.state[6]=528734635,this.state[7]=1541459225,this.bufferLength=0,this.bytesHashed=0,this.finished=!1,this},r.prototype.clean=function(){for(var e=0;e<this.buffer.length;e++)this.buffer[e]=0;for(var e=0;e<this.temp.length;e++)this.temp[e]=0;this.reset()},r.prototype.update=function(e,r){if(void 0===r&&(r=e.length),this.finished)throw new Error("SHA256: can't update because hash was finished.");var n=0;if(this.bytesHashed+=r,this.bufferLength>0){for(;this.bufferLength<64&&r>0;)this.buffer[this.bufferLength++]=e[n++],r--;64===this.bufferLength&&(t(this.temp,this.state,this.buffer,0,64),this.bufferLength=0)}for(r>=64&&(n=t(this.temp,this.state,e,n,r),r%=64);r>0;)this.buffer[this.bufferLength++]=e[n++],r--;return this},r.prototype.finish=function(e){if(!this.finished){var r=this.bytesHashed,n=this.bufferLength,a=r/536870912|0,i=r<<3,o=r%64<56?64:128;this.buffer[n]=128;for(var u=n+1;u<o-8;u++)this.buffer[u]=0;this.buffer[o-8]=a>>>24&255,this.buffer[o-7]=a>>>16&255,this.buffer[o-6]=a>>>8&255,this.buffer[o-5]=a>>>0&255,this.buffer[o-4]=i>>>24&255,this.buffer[o-3]=i>>>16&255,this.buffer[o-2]=i>>>8&255,this.buffer[o-1]=i>>>0&255,t(this.temp,this.state,this.buffer,0,o),this.finished=!0}for(var u=0;u<8;u++)e[4*u+0]=this.state[u]>>>24&255,e[4*u+1]=this.state[u]>>>16&255,e[4*u+2]=this.state[u]>>>8&255,e[4*u+3]=this.state[u]>>>0&255;return this},r.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},r.prototype._saveState=function(e){for(var t=0;t<this.state.length;t++)e[t]=this.state[t]},r.prototype._restoreState=function(e,t){for(var r=0;r<this.state.length;r++)this.state[r]=e[r];this.bytesHashed=t,this.finished=!1,this.bufferLength=0},r}();e.Hash=o;var u=function(){function e(e){this.inner=new o,this.outer=new o,this.blockSize=this.inner.blockSize,this.digestLength=this.inner.digestLength;var t=new Uint8Array(this.blockSize);if(e.length>this.blockSize)(new o).update(e).finish(t).clean();else for(var r=0;r<e.length;r++)t[r]=e[r];for(var r=0;r<t.length;r++)t[r]^=54;this.inner.update(t);for(var r=0;r<t.length;r++)t[r]^=106;this.outer.update(t),this.istate=new Uint32Array(this.digestLength/4),this.ostate=new Uint32Array(this.digestLength/4),this.inner._saveState(this.istate),this.outer._saveState(this.ostate);for(var r=0;r<t.length;r++)t[r]=0}return e.prototype.reset=function(){return this.inner._restoreState(this.istate,this.inner.blockSize),this.outer._restoreState(this.ostate,this.outer.blockSize),this},e.prototype.clean=function(){for(var e=0;e<this.istate.length;e++)this.ostate[e]=this.istate[e]=0;this.inner.clean(),this.outer.clean()},e.prototype.update=function(e){return this.inner.update(e),this},e.prototype.finish=function(e){return this.outer.finished?this.outer.finish(e):(this.inner.finish(e),this.outer.update(e,this.digestLength).finish(e)),this},e.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},e}();e.HMAC=u,e.hash=r,e.__esModule=!0,e.default=r,e.hmac=n,e.pbkdf2=a})},function(e,t,r){(function(e){"use strict";function n(t,r){return void 0===r&&(r="utf8"),o(e.isBuffer(t)?t.toString("base64"):new e(t,r).toString("base64"))}function a(t,r){return void 0===r&&(r="utf8"),new e(i(t),"base64").toString(r)}function i(e){return e=e.toString(),s.default(e).replace(/\-/g,"+").replace(/_/g,"/")}function o(e){return e.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function u(t){return new e(i(t),"base64")}var s=r(24),c=n;c.encode=n,c.decode=a,c.toBase64=i,c.fromBase64=o,c.toBuffer=u,Object.defineProperty(t,"__esModule",{value:!0}),t.default=c}).call(t,r(12).Buffer)},function(e,t,r){(function(e){"use strict";function r(t){var r=4,n=t.length,a=n%r;if(!a)return t;var i=n,o=r-a,u=n+o,s=new e(u);for(s.write(t);o--;)s.write("=",i++);return s.toString()}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r}).call(t,r(12).Buffer)},function(e,t,r){e.exports=r(23).default,e.exports.default=e.exports},function(e,t,r){!function(e){"use strict";function t(e,t,r,n){e[t]=r>>24&255,e[t+1]=r>>16&255,e[t+2]=r>>8&255,e[t+3]=255&r,e[t+4]=n>>24&255,e[t+5]=n>>16&255,e[t+6]=n>>8&255,e[t+7]=255&n}function n(e,t,r,n,a){var i,o=0;for(i=0;i<a;i++)o|=e[t+i]^r[n+i];return(1&o-1>>>8)-1}function a(e,t,r,a){return n(e,t,r,a,16)}function i(e,t,r,a){return n(e,t,r,a,32)}function o(e,t,r,n){for(var a,i=255&n[0]|(255&n[1])<<8|(255&n[2])<<16|(255&n[3])<<24,o=255&r[0]|(255&r[1])<<8|(255&r[2])<<16|(255&r[3])<<24,u=255&r[4]|(255&r[5])<<8|(255&r[6])<<16|(255&r[7])<<24,s=255&r[8]|(255&r[9])<<8|(255&r[10])<<16|(255&r[11])<<24,c=255&r[12]|(255&r[13])<<8|(255&r[14])<<16|(255&r[15])<<24,f=255&n[4]|(255&n[5])<<8|(255&n[6])<<16|(255&n[7])<<24,l=255&t[0]|(255&t[1])<<8|(255&t[2])<<16|(255&t[3])<<24,h=255&t[4]|(255&t[5])<<8|(255&t[6])<<16|(255&t[7])<<24,p=255&t[8]|(255&t[9])<<8|(255&t[10])<<16|(255&t[11])<<24,d=255&t[12]|(255&t[13])<<8|(255&t[14])<<16|(255&t[15])<<24,y=255&n[8]|(255&n[9])<<8|(255&n[10])<<16|(255&n[11])<<24,v=255&r[16]|(255&r[17])<<8|(255&r[18])<<16|(255&r[19])<<24,g=255&r[20]|(255&r[21])<<8|(255&r[22])<<16|(255&r[23])<<24,m=255&r[24]|(255&r[25])<<8|(255&r[26])<<16|(255&r[27])<<24,w=255&r[28]|(255&r[29])<<8|(255&r[30])<<16|(255&r[31])<<24,b=255&n[12]|(255&n[13])<<8|(255&n[14])<<16|(255&n[15])<<24,k=i,_=o,A=u,x=s,R=c,E=f,I=l,T=h,S=p,P=d,U=y,B=v,O=g,M=m,L=w,K=b,C=0;C<20;C+=2)a=k+O|0,R^=a<<7|a>>>25,a=R+k|0,S^=a<<9|a>>>23,a=S+R|0,O^=a<<13|a>>>19,a=O+S|0,k^=a<<18|a>>>14,a=E+_|0,P^=a<<7|a>>>25,a=P+E|0,M^=a<<9|a>>>23,a=M+P|0,_^=a<<13|a>>>19,a=_+M|0,E^=a<<18|a>>>14,a=U+I|0,L^=a<<7|a>>>25,a=L+U|0,A^=a<<9|a>>>23,a=A+L|0,I^=a<<13|a>>>19,a=I+A|0,U^=a<<18|a>>>14,a=K+B|0,x^=a<<7|a>>>25,a=x+K|0,T^=a<<9|a>>>23,a=T+x|0,B^=a<<13|a>>>19,a=B+T|0,K^=a<<18|a>>>14,a=k+x|0,_^=a<<7|a>>>25,a=_+k|0,A^=a<<9|a>>>23,a=A+_|0,x^=a<<13|a>>>19,a=x+A|0,k^=a<<18|a>>>14,a=E+R|0,I^=a<<7|a>>>25,a=I+E|0,T^=a<<9|a>>>23,a=T+I|0,R^=a<<13|a>>>19,a=R+T|0,E^=a<<18|a>>>14,a=U+P|0,B^=a<<7|a>>>25,a=B+U|0,S^=a<<9|a>>>23,a=S+B|0,P^=a<<13|a>>>19,a=P+S|0,U^=a<<18|a>>>14,a=K+L|0,O^=a<<7|a>>>25,a=O+K|0,M^=a<<9|a>>>23,a=M+O|0,L^=a<<13|a>>>19,a=L+M|0,K^=a<<18|a>>>14;k=k+i|0,_=_+o|0,A=A+u|0,x=x+s|0,R=R+c|0,E=E+f|0,I=I+l|0,T=T+h|0,S=S+p|0,P=P+d|0,U=U+y|0,B=B+v|0,O=O+g|0,M=M+m|0,L=L+w|0,K=K+b|0,e[0]=k>>>0&255,e[1]=k>>>8&255,e[2]=k>>>16&255,e[3]=k>>>24&255,e[4]=_>>>0&255,e[5]=_>>>8&255,e[6]=_>>>16&255,e[7]=_>>>24&255,e[8]=A>>>0&255,e[9]=A>>>8&255,e[10]=A>>>16&255,e[11]=A>>>24&255,e[12]=x>>>0&255,e[13]=x>>>8&255,e[14]=x>>>16&255,e[15]=x>>>24&255,e[16]=R>>>0&255,e[17]=R>>>8&255,e[18]=R>>>16&255,e[19]=R>>>24&255,e[20]=E>>>0&255,e[21]=E>>>8&255,e[22]=E>>>16&255,e[23]=E>>>24&255,e[24]=I>>>0&255,e[25]=I>>>8&255,e[26]=I>>>16&255,e[27]=I>>>24&255,e[28]=T>>>0&255,e[29]=T>>>8&255,e[30]=T>>>16&255,e[31]=T>>>24&255,e[32]=S>>>0&255,e[33]=S>>>8&255,e[34]=S>>>16&255,e[35]=S>>>24&255,e[36]=P>>>0&255,e[37]=P>>>8&255,e[38]=P>>>16&255,e[39]=P>>>24&255,e[40]=U>>>0&255,e[41]=U>>>8&255,e[42]=U>>>16&255,e[43]=U>>>24&255,e[44]=B>>>0&255,e[45]=B>>>8&255,e[46]=B>>>16&255,e[47]=B>>>24&255,e[48]=O>>>0&255,e[49]=O>>>8&255,e[50]=O>>>16&255,e[51]=O>>>24&255,e[52]=M>>>0&255,e[53]=M>>>8&255,e[54]=M>>>16&255,e[55]=M>>>24&255,e[56]=L>>>0&255,e[57]=L>>>8&255,e[58]=L>>>16&255,e[59]=L>>>24&255,e[60]=K>>>0&255,e[61]=K>>>8&255,e[62]=K>>>16&255,e[63]=K>>>24&255}function u(e,t,r,n){for(var a,i=255&n[0]|(255&n[1])<<8|(255&n[2])<<16|(255&n[3])<<24,o=255&r[0]|(255&r[1])<<8|(255&r[2])<<16|(255&r[3])<<24,u=255&r[4]|(255&r[5])<<8|(255&r[6])<<16|(255&r[7])<<24,s=255&r[8]|(255&r[9])<<8|(255&r[10])<<16|(255&r[11])<<24,c=255&r[12]|(255&r[13])<<8|(255&r[14])<<16|(255&r[15])<<24,f=255&n[4]|(255&n[5])<<8|(255&n[6])<<16|(255&n[7])<<24,l=255&t[0]|(255&t[1])<<8|(255&t[2])<<16|(255&t[3])<<24,h=255&t[4]|(255&t[5])<<8|(255&t[6])<<16|(255&t[7])<<24,p=255&t[8]|(255&t[9])<<8|(255&t[10])<<16|(255&t[11])<<24,d=255&t[12]|(255&t[13])<<8|(255&t[14])<<16|(255&t[15])<<24,y=255&n[8]|(255&n[9])<<8|(255&n[10])<<16|(255&n[11])<<24,v=255&r[16]|(255&r[17])<<8|(255&r[18])<<16|(255&r[19])<<24,g=255&r[20]|(255&r[21])<<8|(255&r[22])<<16|(255&r[23])<<24,m=255&r[24]|(255&r[25])<<8|(255&r[26])<<16|(255&r[27])<<24,w=255&r[28]|(255&r[29])<<8|(255&r[30])<<16|(255&r[31])<<24,b=255&n[12]|(255&n[13])<<8|(255&n[14])<<16|(255&n[15])<<24,k=i,_=o,A=u,x=s,R=c,E=f,I=l,T=h,S=p,P=d,U=y,B=v,O=g,M=m,L=w,K=b,C=0;C<20;C+=2)a=k+O|0,R^=a<<7|a>>>25,a=R+k|0,S^=a<<9|a>>>23,a=S+R|0,O^=a<<13|a>>>19,a=O+S|0,k^=a<<18|a>>>14,a=E+_|0,P^=a<<7|a>>>25,a=P+E|0,M^=a<<9|a>>>23,a=M+P|0,_^=a<<13|a>>>19,a=_+M|0,E^=a<<18|a>>>14,a=U+I|0,L^=a<<7|a>>>25,a=L+U|0,A^=a<<9|a>>>23,a=A+L|0,I^=a<<13|a>>>19,a=I+A|0,U^=a<<18|a>>>14,a=K+B|0,x^=a<<7|a>>>25,a=x+K|0,T^=a<<9|a>>>23,a=T+x|0,B^=a<<13|a>>>19,a=B+T|0,K^=a<<18|a>>>14,a=k+x|0,_^=a<<7|a>>>25,a=_+k|0,A^=a<<9|a>>>23,a=A+_|0,x^=a<<13|a>>>19,a=x+A|0,k^=a<<18|a>>>14,a=E+R|0,I^=a<<7|a>>>25,a=I+E|0,T^=a<<9|a>>>23,a=T+I|0,R^=a<<13|a>>>19,a=R+T|0,E^=a<<18|a>>>14,a=U+P|0,B^=a<<7|a>>>25,a=B+U|0,S^=a<<9|a>>>23,a=S+B|0,P^=a<<13|a>>>19,a=P+S|0,U^=a<<18|a>>>14,a=K+L|0,O^=a<<7|a>>>25,a=O+K|0,M^=a<<9|a>>>23,a=M+O|0,L^=a<<13|a>>>19,a=L+M|0,K^=a<<18|a>>>14;e[0]=k>>>0&255,e[1]=k>>>8&255,e[2]=k>>>16&255,e[3]=k>>>24&255,e[4]=E>>>0&255,e[5]=E>>>8&255,e[6]=E>>>16&255,e[7]=E>>>24&255,e[8]=U>>>0&255,e[9]=U>>>8&255,e[10]=U>>>16&255,e[11]=U>>>24&255,e[12]=K>>>0&255,e[13]=K>>>8&255,e[14]=K>>>16&255,e[15]=K>>>24&255,e[16]=I>>>0&255,e[17]=I>>>8&255,e[18]=I>>>16&255,e[19]=I>>>24&255,e[20]=T>>>0&255,e[21]=T>>>8&255,e[22]=T>>>16&255,e[23]=T>>>24&255,e[24]=S>>>0&255,e[25]=S>>>8&255,e[26]=S>>>16&255,e[27]=S>>>24&255,e[28]=P>>>0&255,e[29]=P>>>8&255,e[30]=P>>>16&255,e[31]=P>>>24&255}function s(e,t,r,n){o(e,t,r,n)}function c(e,t,r,n){u(e,t,r,n)}function f(e,t,r,n,a,i,o){var u,c,f=new Uint8Array(16),l=new Uint8Array(64);for(c=0;c<16;c++)f[c]=0;for(c=0;c<8;c++)f[c]=i[c];for(;a>=64;){for(s(l,f,o,he),c=0;c<64;c++)e[t+c]=r[n+c]^l[c];for(u=1,c=8;c<16;c++)u=u+(255&f[c])|0,f[c]=255&u,u>>>=8;a-=64,t+=64,n+=64}if(a>0)for(s(l,f,o,he),c=0;c<a;c++)e[t+c]=r[n+c]^l[c];return 0}function l(e,t,r,n,a){var i,o,u=new Uint8Array(16),c=new Uint8Array(64);for(o=0;o<16;o++)u[o]=0;for(o=0;o<8;o++)u[o]=n[o];for(;r>=64;){for(s(c,u,a,he),o=0;o<64;o++)e[t+o]=c[o];for(i=1,o=8;o<16;o++)i=i+(255&u[o])|0,u[o]=255&i,i>>>=8;r-=64,t+=64}if(r>0)for(s(c,u,a,he),o=0;o<r;o++)e[t+o]=c[o];return 0}function h(e,t,r,n,a){var i=new Uint8Array(32);c(i,n,a,he);for(var o=new Uint8Array(8),u=0;u<8;u++)o[u]=n[u+16];return l(e,t,r,o,i)}function p(e,t,r,n,a,i,o){var u=new Uint8Array(32);c(u,i,o,he);for(var s=new Uint8Array(8),l=0;l<8;l++)s[l]=i[l+16];return f(e,t,r,n,a,s,u)}function d(e,t,r,n,a,i){var o=new pe(i);return o.update(r,n,a),o.finish(e,t),0}function y(e,t,r,n,i,o){var u=new Uint8Array(16);return d(u,0,r,n,i,o),a(e,t,u,0)}function v(e,t,r,n,a){var i;if(r<32)return-1;for(p(e,0,t,0,r,n,a),d(e,16,e,32,r-32,e),i=0;i<16;i++)e[i]=0;return 0}function g(e,t,r,n,a){var i,o=new Uint8Array(32);if(r<32)return-1;if(h(o,0,32,n,a),0!==y(t,16,t,32,r-32,o))return-1;for(p(e,0,t,0,r,n,a),i=0;i<32;i++)e[i]=0;return 0}function m(e,t){var r;for(r=0;r<16;r++)e[r]=0|t[r]}function w(e){var t,r,n=1;for(t=0;t<16;t++)r=e[t]+n+65535,n=Math.floor(r/65536),e[t]=r-65536*n;e[0]+=n-1+37*(n-1)}function b(e,t,r){for(var n,a=~(r-1),i=0;i<16;i++)n=a&(e[i]^t[i]),e[i]^=n,t[i]^=n}function k(e,t){var r,n,a,i=ee(),o=ee();for(r=0;r<16;r++)o[r]=t[r];for(w(o),w(o),w(o),n=0;n<2;n++){for(i[0]=o[0]-65517,r=1;r<15;r++)i[r]=o[r]-65535-(i[r-1]>>16&1),i[r-1]&=65535;i[15]=o[15]-32767-(i[14]>>16&1),a=i[15]>>16&1,i[14]&=65535,b(o,i,1-a)}for(r=0;r<16;r++)e[2*r]=255&o[r],e[2*r+1]=o[r]>>8}function _(e,t){var r=new Uint8Array(32),n=new Uint8Array(32);return k(r,e),k(n,t),i(r,0,n,0)}function A(e){var t=new Uint8Array(32);return k(t,e),1&t[0]}function x(e,t){var r;for(r=0;r<16;r++)e[r]=t[2*r]+(t[2*r+1]<<8);e[15]&=32767}function R(e,t,r){for(var n=0;n<16;n++)e[n]=t[n]+r[n]}function E(e,t,r){for(var n=0;n<16;n++)e[n]=t[n]-r[n]}function I(e,t,r){var n,a,i=0,o=0,u=0,s=0,c=0,f=0,l=0,h=0,p=0,d=0,y=0,v=0,g=0,m=0,w=0,b=0,k=0,_=0,A=0,x=0,R=0,E=0,I=0,T=0,S=0,P=0,U=0,B=0,O=0,M=0,L=0,K=r[0],C=r[1],j=r[2],D=r[3],N=r[4],Y=r[5],q=r[6],F=r[7],H=r[8],z=r[9],J=r[10],V=r[11],X=r[12],W=r[13],G=r[14],Z=r[15];n=t[0],i+=n*K,o+=n*C,u+=n*j,s+=n*D,c+=n*N,f+=n*Y,l+=n*q,h+=n*F,p+=n*H,d+=n*z,y+=n*J,v+=n*V,g+=n*X,m+=n*W,w+=n*G,b+=n*Z,n=t[1],o+=n*K,u+=n*C,s+=n*j,c+=n*D,f+=n*N,l+=n*Y,h+=n*q,p+=n*F,d+=n*H,y+=n*z,v+=n*J,g+=n*V,m+=n*X,w+=n*W,b+=n*G,k+=n*Z,n=t[2],u+=n*K,s+=n*C,c+=n*j,f+=n*D,l+=n*N,h+=n*Y,p+=n*q,d+=n*F,y+=n*H,v+=n*z,g+=n*J,m+=n*V,w+=n*X,b+=n*W,k+=n*G,_+=n*Z,n=t[3],s+=n*K,c+=n*C,f+=n*j,l+=n*D,h+=n*N,p+=n*Y,d+=n*q,y+=n*F,v+=n*H,g+=n*z,m+=n*J,w+=n*V,b+=n*X,k+=n*W,_+=n*G,A+=n*Z,n=t[4],c+=n*K,f+=n*C,l+=n*j,h+=n*D,p+=n*N,d+=n*Y,y+=n*q,v+=n*F,g+=n*H,m+=n*z,w+=n*J,b+=n*V,k+=n*X,_+=n*W,A+=n*G,x+=n*Z,n=t[5],f+=n*K,l+=n*C,h+=n*j,p+=n*D,d+=n*N,y+=n*Y,v+=n*q,g+=n*F,m+=n*H,w+=n*z,b+=n*J,k+=n*V,_+=n*X,A+=n*W,x+=n*G,R+=n*Z,n=t[6],l+=n*K,h+=n*C,p+=n*j,d+=n*D,y+=n*N,v+=n*Y,g+=n*q,m+=n*F,w+=n*H,b+=n*z,k+=n*J,_+=n*V,A+=n*X,x+=n*W,R+=n*G,E+=n*Z,n=t[7],h+=n*K,p+=n*C,d+=n*j,y+=n*D,v+=n*N,g+=n*Y,m+=n*q,w+=n*F,b+=n*H,k+=n*z,_+=n*J,A+=n*V,x+=n*X,R+=n*W,E+=n*G,I+=n*Z,n=t[8],p+=n*K,d+=n*C,y+=n*j,v+=n*D,g+=n*N,m+=n*Y,w+=n*q,b+=n*F,k+=n*H,_+=n*z,A+=n*J,x+=n*V,R+=n*X,E+=n*W,I+=n*G,T+=n*Z,n=t[9],d+=n*K,y+=n*C,v+=n*j,g+=n*D,m+=n*N,w+=n*Y,b+=n*q,k+=n*F,_+=n*H,A+=n*z,x+=n*J,R+=n*V,E+=n*X,I+=n*W,T+=n*G,S+=n*Z,n=t[10],y+=n*K,v+=n*C,g+=n*j,m+=n*D,w+=n*N,b+=n*Y,k+=n*q,_+=n*F,A+=n*H,x+=n*z,R+=n*J,E+=n*V,I+=n*X,T+=n*W,S+=n*G,P+=n*Z,n=t[11],v+=n*K,g+=n*C,m+=n*j,w+=n*D,b+=n*N,k+=n*Y,_+=n*q,A+=n*F,x+=n*H,R+=n*z,E+=n*J,I+=n*V;T+=n*X;S+=n*W,P+=n*G,U+=n*Z,n=t[12],g+=n*K,m+=n*C,w+=n*j,b+=n*D,k+=n*N,_+=n*Y,A+=n*q,x+=n*F,R+=n*H,E+=n*z,I+=n*J,T+=n*V,S+=n*X,P+=n*W,U+=n*G,B+=n*Z,n=t[13],m+=n*K,w+=n*C,b+=n*j,k+=n*D,_+=n*N,A+=n*Y,x+=n*q,R+=n*F,E+=n*H,I+=n*z,T+=n*J,S+=n*V,P+=n*X,U+=n*W,B+=n*G,O+=n*Z,n=t[14],w+=n*K,b+=n*C,k+=n*j,_+=n*D,A+=n*N,x+=n*Y,R+=n*q,E+=n*F,I+=n*H,T+=n*z,S+=n*J,P+=n*V,U+=n*X,B+=n*W,O+=n*G,M+=n*Z,n=t[15],b+=n*K,k+=n*C,_+=n*j,A+=n*D,x+=n*N,R+=n*Y,E+=n*q,I+=n*F,T+=n*H,S+=n*z,P+=n*J,U+=n*V,B+=n*X,O+=n*W,M+=n*G,L+=n*Z,i+=38*k,o+=38*_,u+=38*A,s+=38*x,c+=38*R,f+=38*E,l+=38*I,h+=38*T,p+=38*S,d+=38*P,y+=38*U,v+=38*B,g+=38*O,m+=38*M,w+=38*L,a=1,n=i+a+65535,a=Math.floor(n/65536),i=n-65536*a,n=o+a+65535,a=Math.floor(n/65536),o=n-65536*a,n=u+a+65535,a=Math.floor(n/65536),u=n-65536*a,n=s+a+65535,a=Math.floor(n/65536),s=n-65536*a,n=c+a+65535,a=Math.floor(n/65536),c=n-65536*a,n=f+a+65535,a=Math.floor(n/65536),f=n-65536*a,n=l+a+65535,a=Math.floor(n/65536),l=n-65536*a,n=h+a+65535,a=Math.floor(n/65536),h=n-65536*a,n=p+a+65535,a=Math.floor(n/65536),p=n-65536*a,n=d+a+65535,a=Math.floor(n/65536),d=n-65536*a,n=y+a+65535,a=Math.floor(n/65536),y=n-65536*a,n=v+a+65535,a=Math.floor(n/65536),v=n-65536*a,n=g+a+65535,a=Math.floor(n/65536),g=n-65536*a,n=m+a+65535,a=Math.floor(n/65536),m=n-65536*a,n=w+a+65535,a=Math.floor(n/65536),w=n-65536*a,n=b+a+65535,a=Math.floor(n/65536),b=n-65536*a,i+=a-1+37*(a-1),a=1,n=i+a+65535,a=Math.floor(n/65536),i=n-65536*a,n=o+a+65535,a=Math.floor(n/65536),o=n-65536*a,n=u+a+65535,a=Math.floor(n/65536),u=n-65536*a,n=s+a+65535,a=Math.floor(n/65536),s=n-65536*a,n=c+a+65535,a=Math.floor(n/65536),c=n-65536*a,n=f+a+65535,a=Math.floor(n/65536),f=n-65536*a,n=l+a+65535,a=Math.floor(n/65536),l=n-65536*a,n=h+a+65535,a=Math.floor(n/65536),h=n-65536*a,n=p+a+65535,a=Math.floor(n/65536),p=n-65536*a,n=d+a+65535,a=Math.floor(n/65536),d=n-65536*a,n=y+a+65535,a=Math.floor(n/65536),y=n-65536*a,n=v+a+65535,a=Math.floor(n/65536),v=n-65536*a,n=g+a+65535,a=Math.floor(n/65536),g=n-65536*a,n=m+a+65535,a=Math.floor(n/65536),m=n-65536*a,n=w+a+65535,a=Math.floor(n/65536),w=n-65536*a,n=b+a+65535,a=Math.floor(n/65536),b=n-65536*a,i+=a-1+37*(a-1),e[0]=i,e[1]=o,e[2]=u,e[3]=s,e[4]=c,e[5]=f,e[6]=l,e[7]=h,e[8]=p,e[9]=d,e[10]=y,e[11]=v,e[12]=g,e[13]=m;e[14]=w;e[15]=b}function T(e,t){I(e,t,t)}function S(e,t){var r,n=ee();for(r=0;r<16;r++)n[r]=t[r];for(r=253;r>=0;r--)T(n,n),2!==r&&4!==r&&I(n,n,t);for(r=0;r<16;r++)e[r]=n[r]}function P(e,t){var r,n=ee();for(r=0;r<16;r++)n[r]=t[r];for(r=250;r>=0;r--)T(n,n),1!==r&&I(n,n,t);for(r=0;r<16;r++)e[r]=n[r]}function U(e,t,r){var n,a,i=new Uint8Array(32),o=new Float64Array(80),u=ee(),s=ee(),c=ee(),f=ee(),l=ee(),h=ee();for(a=0;a<31;a++)i[a]=t[a];for(i[31]=127&t[31]|64,i[0]&=248,x(o,r),a=0;a<16;a++)s[a]=o[a],f[a]=u[a]=c[a]=0;
for(u[0]=f[0]=1,a=254;a>=0;--a)n=i[a>>>3]>>>(7&a)&1,b(u,s,n),b(c,f,n),R(l,u,c),E(u,u,c),R(c,s,f),E(s,s,f),T(f,l),T(h,u),I(u,c,u),I(c,s,l),R(l,u,c),E(u,u,c),T(s,u),E(c,f,h),I(u,c,oe),R(u,u,f),I(c,c,u),I(u,f,h),I(f,s,o),T(s,l),b(u,s,n),b(c,f,n);for(a=0;a<16;a++)o[a+16]=u[a],o[a+32]=c[a],o[a+48]=s[a],o[a+64]=f[a];var p=o.subarray(32),d=o.subarray(16);return S(p,p),I(d,d,p),k(e,d),0}function B(e,t){return U(e,t,ne)}function O(e,t){return te(t,32),B(e,t)}function M(e,t,r){var n=new Uint8Array(32);return U(n,r,t),c(e,re,n,he)}function L(e,t,r,n,a,i){var o=new Uint8Array(32);return M(o,a,i),de(e,t,r,n,o)}function K(e,t,r,n,a,i){var o=new Uint8Array(32);return M(o,a,i),ye(e,t,r,n,o)}function C(e,t,r,n){for(var a,i,o,u,s,c,f,l,h,p,d,y,v,g,m,w,b,k,_,A,x,R,E,I,T,S,P=new Int32Array(16),U=new Int32Array(16),B=e[0],O=e[1],M=e[2],L=e[3],K=e[4],C=e[5],j=e[6],D=e[7],N=t[0],Y=t[1],q=t[2],F=t[3],H=t[4],z=t[5],J=t[6],V=t[7],X=0;n>=128;){for(_=0;_<16;_++)A=8*_+X,P[_]=r[A+0]<<24|r[A+1]<<16|r[A+2]<<8|r[A+3],U[_]=r[A+4]<<24|r[A+5]<<16|r[A+6]<<8|r[A+7];for(_=0;_<80;_++)if(a=B,i=O,o=M,u=L,s=K,c=C,f=j,l=D,h=N,p=Y,d=q,y=F,v=H,g=z,m=J,w=V,x=D,R=V,E=65535&R,I=R>>>16,T=65535&x,S=x>>>16,x=(K>>>14|H<<18)^(K>>>18|H<<14)^(H>>>9|K<<23),R=(H>>>14|K<<18)^(H>>>18|K<<14)^(K>>>9|H<<23),E+=65535&R,I+=R>>>16,T+=65535&x,S+=x>>>16,x=K&C^~K&j,R=H&z^~H&J,E+=65535&R,I+=R>>>16,T+=65535&x,S+=x>>>16,x=ve[2*_],R=ve[2*_+1],E+=65535&R,I+=R>>>16,T+=65535&x,S+=x>>>16,x=P[_%16],R=U[_%16],E+=65535&R,I+=R>>>16,T+=65535&x,S+=x>>>16,I+=E>>>16,T+=I>>>16,S+=T>>>16,b=65535&T|S<<16,k=65535&E|I<<16,x=b,R=k,E=65535&R,I=R>>>16,T=65535&x,S=x>>>16,x=(B>>>28|N<<4)^(N>>>2|B<<30)^(N>>>7|B<<25),R=(N>>>28|B<<4)^(B>>>2|N<<30)^(B>>>7|N<<25),E+=65535&R,I+=R>>>16,T+=65535&x,S+=x>>>16,x=B&O^B&M^O&M,R=N&Y^N&q^Y&q,E+=65535&R,I+=R>>>16,T+=65535&x,S+=x>>>16,I+=E>>>16,T+=I>>>16,S+=T>>>16,l=65535&T|S<<16,w=65535&E|I<<16,x=u,R=y,E=65535&R,I=R>>>16,T=65535&x,S=x>>>16,x=b,R=k,E+=65535&R,I+=R>>>16,T+=65535&x,S+=x>>>16,I+=E>>>16,T+=I>>>16,S+=T>>>16,u=65535&T|S<<16,y=65535&E|I<<16,O=a,M=i,L=o,K=u,C=s,j=c,D=f,B=l,Y=h,q=p,F=d,H=y,z=v,J=g,V=m,N=w,_%16===15)for(A=0;A<16;A++)x=P[A],R=U[A],E=65535&R,I=R>>>16,T=65535&x,S=x>>>16,x=P[(A+9)%16],R=U[(A+9)%16],E+=65535&R,I+=R>>>16,T+=65535&x,S+=x>>>16,b=P[(A+1)%16],k=U[(A+1)%16],x=(b>>>1|k<<31)^(b>>>8|k<<24)^b>>>7,R=(k>>>1|b<<31)^(k>>>8|b<<24)^(k>>>7|b<<25),E+=65535&R,I+=R>>>16,T+=65535&x,S+=x>>>16,b=P[(A+14)%16],k=U[(A+14)%16],x=(b>>>19|k<<13)^(k>>>29|b<<3)^b>>>6,R=(k>>>19|b<<13)^(b>>>29|k<<3)^(k>>>6|b<<26),E+=65535&R,I+=R>>>16,T+=65535&x,S+=x>>>16,I+=E>>>16,T+=I>>>16,S+=T>>>16,P[A]=65535&T|S<<16,U[A]=65535&E|I<<16;x=B,R=N,E=65535&R,I=R>>>16,T=65535&x,S=x>>>16,x=e[0],R=t[0],E+=65535&R,I+=R>>>16,T+=65535&x,S+=x>>>16,I+=E>>>16,T+=I>>>16,S+=T>>>16,e[0]=B=65535&T|S<<16,t[0]=N=65535&E|I<<16,x=O,R=Y,E=65535&R,I=R>>>16,T=65535&x,S=x>>>16,x=e[1],R=t[1],E+=65535&R,I+=R>>>16,T+=65535&x,S+=x>>>16,I+=E>>>16,T+=I>>>16,S+=T>>>16,e[1]=O=65535&T|S<<16,t[1]=Y=65535&E|I<<16,x=M,R=q,E=65535&R,I=R>>>16,T=65535&x,S=x>>>16,x=e[2],R=t[2],E+=65535&R,I+=R>>>16,T+=65535&x,S+=x>>>16,I+=E>>>16,T+=I>>>16,S+=T>>>16,e[2]=M=65535&T|S<<16,t[2]=q=65535&E|I<<16,x=L,R=F,E=65535&R,I=R>>>16,T=65535&x,S=x>>>16,x=e[3],R=t[3],E+=65535&R,I+=R>>>16,T+=65535&x,S+=x>>>16,I+=E>>>16,T+=I>>>16,S+=T>>>16,e[3]=L=65535&T|S<<16,t[3]=F=65535&E|I<<16,x=K,R=H,E=65535&R,I=R>>>16,T=65535&x,S=x>>>16,x=e[4],R=t[4],E+=65535&R,I+=R>>>16,T+=65535&x,S+=x>>>16,I+=E>>>16,T+=I>>>16,S+=T>>>16,e[4]=K=65535&T|S<<16,t[4]=H=65535&E|I<<16,x=C,R=z,E=65535&R,I=R>>>16,T=65535&x,S=x>>>16,x=e[5],R=t[5],E+=65535&R,I+=R>>>16,T+=65535&x,S+=x>>>16,I+=E>>>16,T+=I>>>16,S+=T>>>16,e[5]=C=65535&T|S<<16,t[5]=z=65535&E|I<<16,x=j,R=J,E=65535&R,I=R>>>16,T=65535&x,S=x>>>16,x=e[6],R=t[6],E+=65535&R,I+=R>>>16,T+=65535&x,S+=x>>>16,I+=E>>>16,T+=I>>>16,S+=T>>>16,e[6]=j=65535&T|S<<16,t[6]=J=65535&E|I<<16,x=D,R=V,E=65535&R,I=R>>>16,T=65535&x,S=x>>>16,x=e[7],R=t[7],E+=65535&R,I+=R>>>16,T+=65535&x,S+=x>>>16,I+=E>>>16,T+=I>>>16,S+=T>>>16,e[7]=D=65535&T|S<<16,t[7]=V=65535&E|I<<16,X+=128,n-=128}return n}function j(e,r,n){var a,i=new Int32Array(8),o=new Int32Array(8),u=new Uint8Array(256),s=n;for(i[0]=1779033703,i[1]=3144134277,i[2]=1013904242,i[3]=2773480762,i[4]=1359893119,i[5]=2600822924,i[6]=528734635,i[7]=1541459225,o[0]=4089235720,o[1]=2227873595,o[2]=4271175723,o[3]=1595750129,o[4]=2917565137,o[5]=725511199,o[6]=4215389547,o[7]=327033209,C(i,o,r,n),n%=128,a=0;a<n;a++)u[a]=r[s-n+a];for(u[n]=128,n=256-128*(n<112?1:0),u[n-9]=0,t(u,n-8,s/536870912|0,s<<3),C(i,o,u,n),a=0;a<8;a++)t(e,8*a,i[a],o[a]);return 0}function D(e,t){var r=ee(),n=ee(),a=ee(),i=ee(),o=ee(),u=ee(),s=ee(),c=ee(),f=ee();E(r,e[1],e[0]),E(f,t[1],t[0]),I(r,r,f),R(n,e[0],e[1]),R(f,t[0],t[1]),I(n,n,f),I(a,e[3],t[3]),I(a,a,se),I(i,e[2],t[2]),R(i,i,i),E(o,n,r),E(u,i,a),R(s,i,a),R(c,n,r),I(e[0],o,u),I(e[1],c,s),I(e[2],s,u),I(e[3],o,c)}function N(e,t,r){var n;for(n=0;n<4;n++)b(e[n],t[n],r)}function Y(e,t){var r=ee(),n=ee(),a=ee();S(a,t[2]),I(r,t[0],a),I(n,t[1],a),k(e,n),e[31]^=A(r)<<7}function q(e,t,r){var n,a;for(m(e[0],ae),m(e[1],ie),m(e[2],ie),m(e[3],ae),a=255;a>=0;--a)n=r[a/8|0]>>(7&a)&1,N(e,t,n),D(t,e),D(e,e),N(e,t,n)}function F(e,t){var r=[ee(),ee(),ee(),ee()];m(r[0],ce),m(r[1],fe),m(r[2],ie),I(r[3],ce,fe),q(e,r,t)}function H(e,t,r){var n,a=new Uint8Array(64),i=[ee(),ee(),ee(),ee()];for(r||te(t,32),j(a,t,32),a[0]&=248,a[31]&=127,a[31]|=64,F(i,a),Y(e,i),n=0;n<32;n++)t[n+32]=e[n];return 0}function z(e,t){var r,n,a,i;for(n=63;n>=32;--n){for(r=0,a=n-32,i=n-12;a<i;++a)t[a]+=r-16*t[n]*ge[a-(n-32)],r=t[a]+128>>8,t[a]-=256*r;t[a]+=r,t[n]=0}for(r=0,a=0;a<32;a++)t[a]+=r-(t[31]>>4)*ge[a],r=t[a]>>8,t[a]&=255;for(a=0;a<32;a++)t[a]-=r*ge[a];for(n=0;n<32;n++)t[n+1]+=t[n]>>8,e[n]=255&t[n]}function J(e){var t,r=new Float64Array(64);for(t=0;t<64;t++)r[t]=e[t];for(t=0;t<64;t++)e[t]=0;z(e,r)}function V(e,t,r,n){var a,i,o=new Uint8Array(64),u=new Uint8Array(64),s=new Uint8Array(64),c=new Float64Array(64),f=[ee(),ee(),ee(),ee()];j(o,n,32),o[0]&=248,o[31]&=127,o[31]|=64;var l=r+64;for(a=0;a<r;a++)e[64+a]=t[a];for(a=0;a<32;a++)e[32+a]=o[32+a];for(j(s,e.subarray(32),r+32),J(s),F(f,s),Y(e,f),a=32;a<64;a++)e[a]=n[a];for(j(u,e,r+64),J(u),a=0;a<64;a++)c[a]=0;for(a=0;a<32;a++)c[a]=s[a];for(a=0;a<32;a++)for(i=0;i<32;i++)c[a+i]+=u[a]*o[i];return z(e.subarray(32),c),l}function X(e,t){var r=ee(),n=ee(),a=ee(),i=ee(),o=ee(),u=ee(),s=ee();return m(e[2],ie),x(e[1],t),T(a,e[1]),I(i,a,ue),E(a,a,e[2]),R(i,e[2],i),T(o,i),T(u,o),I(s,u,o),I(r,s,a),I(r,r,i),P(r,r),I(r,r,a),I(r,r,i),I(r,r,i),I(e[0],r,i),T(n,e[0]),I(n,n,i),_(n,a)&&I(e[0],e[0],le),T(n,e[0]),I(n,n,i),_(n,a)?-1:(A(e[0])===t[31]>>7&&E(e[0],ae,e[0]),I(e[3],e[0],e[1]),0)}function W(e,t,r,n){var a,o,u=new Uint8Array(32),s=new Uint8Array(64),c=[ee(),ee(),ee(),ee()],f=[ee(),ee(),ee(),ee()];if(o=-1,r<64)return-1;if(X(f,n))return-1;for(a=0;a<r;a++)e[a]=t[a];for(a=0;a<32;a++)e[a+32]=n[a];if(j(s,e,r),J(s),q(c,f,s),F(f,t.subarray(32)),D(c,f),Y(u,c),r-=64,i(t,0,u,0)){for(a=0;a<r;a++)e[a]=0;return-1}for(a=0;a<r;a++)e[a]=t[a+64];return o=r}function G(e,t){if(e.length!==me)throw new Error("bad key size");if(t.length!==we)throw new Error("bad nonce size")}function Z(e,t){if(e.length!==xe)throw new Error("bad public key size");if(t.length!==Re)throw new Error("bad secret key size")}function Q(){for(var e=0;e<arguments.length;e++)if(!(arguments[e]instanceof Uint8Array))throw new TypeError("unexpected type, use Uint8Array")}function $(e){for(var t=0;t<e.length;t++)e[t]=0}var ee=function(e){var t,r=new Float64Array(16);if(e)for(t=0;t<e.length;t++)r[t]=e[t];return r},te=function(){throw new Error("no PRNG")},re=new Uint8Array(16),ne=new Uint8Array(32);ne[0]=9;var ae=ee(),ie=ee([1]),oe=ee([56129,1]),ue=ee([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),se=ee([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),ce=ee([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),fe=ee([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),le=ee([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]),he=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]),pe=function(e){this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.leftover=0,this.fin=0;var t,r,n,a,i,o,u,s;t=255&e[0]|(255&e[1])<<8,this.r[0]=8191&t,r=255&e[2]|(255&e[3])<<8,this.r[1]=8191&(t>>>13|r<<3),n=255&e[4]|(255&e[5])<<8,this.r[2]=7939&(r>>>10|n<<6),a=255&e[6]|(255&e[7])<<8,this.r[3]=8191&(n>>>7|a<<9),i=255&e[8]|(255&e[9])<<8,this.r[4]=255&(a>>>4|i<<12),this.r[5]=i>>>1&8190,o=255&e[10]|(255&e[11])<<8,this.r[6]=8191&(i>>>14|o<<2),u=255&e[12]|(255&e[13])<<8,this.r[7]=8065&(o>>>11|u<<5),s=255&e[14]|(255&e[15])<<8,this.r[8]=8191&(u>>>8|s<<8),this.r[9]=s>>>5&127,this.pad[0]=255&e[16]|(255&e[17])<<8,this.pad[1]=255&e[18]|(255&e[19])<<8,this.pad[2]=255&e[20]|(255&e[21])<<8,this.pad[3]=255&e[22]|(255&e[23])<<8,this.pad[4]=255&e[24]|(255&e[25])<<8,this.pad[5]=255&e[26]|(255&e[27])<<8,this.pad[6]=255&e[28]|(255&e[29])<<8,this.pad[7]=255&e[30]|(255&e[31])<<8};pe.prototype.blocks=function(e,t,r){for(var n,a,i,o,u,s,c,f,l,h,p,d,y,v,g,m,w,b,k,_=this.fin?0:2048,A=this.h[0],x=this.h[1],R=this.h[2],E=this.h[3],I=this.h[4],T=this.h[5],S=this.h[6],P=this.h[7],U=this.h[8],B=this.h[9],O=this.r[0],M=this.r[1],L=this.r[2],K=this.r[3],C=this.r[4],j=this.r[5],D=this.r[6],N=this.r[7],Y=this.r[8],q=this.r[9];r>=16;)n=255&e[t+0]|(255&e[t+1])<<8,A+=8191&n,a=255&e[t+2]|(255&e[t+3])<<8,x+=8191&(n>>>13|a<<3),i=255&e[t+4]|(255&e[t+5])<<8,R+=8191&(a>>>10|i<<6),o=255&e[t+6]|(255&e[t+7])<<8,E+=8191&(i>>>7|o<<9),u=255&e[t+8]|(255&e[t+9])<<8,I+=8191&(o>>>4|u<<12),T+=u>>>1&8191,s=255&e[t+10]|(255&e[t+11])<<8,S+=8191&(u>>>14|s<<2),c=255&e[t+12]|(255&e[t+13])<<8,P+=8191&(s>>>11|c<<5),f=255&e[t+14]|(255&e[t+15])<<8,U+=8191&(c>>>8|f<<8),B+=f>>>5|_,l=0,h=l,h+=A*O,h+=x*(5*q),h+=R*(5*Y),h+=E*(5*N),h+=I*(5*D),l=h>>>13,h&=8191,h+=T*(5*j),h+=S*(5*C),h+=P*(5*K),h+=U*(5*L),h+=B*(5*M),l+=h>>>13,h&=8191,p=l,p+=A*M,p+=x*O,p+=R*(5*q),p+=E*(5*Y),p+=I*(5*N),l=p>>>13,p&=8191,p+=T*(5*D),p+=S*(5*j),p+=P*(5*C),p+=U*(5*K),p+=B*(5*L),l+=p>>>13,p&=8191,d=l,d+=A*L,d+=x*M,d+=R*O,d+=E*(5*q),d+=I*(5*Y),l=d>>>13,d&=8191,d+=T*(5*N),d+=S*(5*D),d+=P*(5*j),d+=U*(5*C),d+=B*(5*K),l+=d>>>13,d&=8191,y=l,y+=A*K,y+=x*L,y+=R*M,y+=E*O,y+=I*(5*q),l=y>>>13,y&=8191,y+=T*(5*Y),y+=S*(5*N),y+=P*(5*D),y+=U*(5*j),y+=B*(5*C),l+=y>>>13,y&=8191,v=l,v+=A*C,v+=x*K,v+=R*L,v+=E*M,v+=I*O,l=v>>>13,v&=8191,v+=T*(5*q),v+=S*(5*Y),v+=P*(5*N),v+=U*(5*D),v+=B*(5*j),l+=v>>>13,v&=8191,g=l,g+=A*j,g+=x*C,g+=R*K,g+=E*L,g+=I*M,l=g>>>13,g&=8191,g+=T*O,g+=S*(5*q),g+=P*(5*Y),g+=U*(5*N),g+=B*(5*D),l+=g>>>13,g&=8191,m=l,m+=A*D,m+=x*j,m+=R*C,m+=E*K,m+=I*L,l=m>>>13,m&=8191,m+=T*M,m+=S*O,m+=P*(5*q),m+=U*(5*Y),m+=B*(5*N),l+=m>>>13,m&=8191,w=l,w+=A*N,w+=x*D,w+=R*j,w+=E*C,w+=I*K,l=w>>>13,w&=8191,w+=T*L,w+=S*M,w+=P*O,w+=U*(5*q),w+=B*(5*Y),l+=w>>>13,w&=8191,b=l,b+=A*Y,b+=x*N,b+=R*D,b+=E*j,b+=I*C,l=b>>>13,b&=8191,b+=T*K,b+=S*L,b+=P*M,b+=U*O,b+=B*(5*q),l+=b>>>13,b&=8191,k=l,k+=A*q,k+=x*Y,k+=R*N,k+=E*D,k+=I*j,l=k>>>13,k&=8191,k+=T*C,k+=S*K,k+=P*L,k+=U*M,k+=B*O,l+=k>>>13,k&=8191,l=(l<<2)+l|0,l=l+h|0,h=8191&l,l>>>=13,p+=l,A=h,x=p,R=d,E=y,I=v,T=g,S=m,P=w,U=b,B=k,t+=16,r-=16;this.h[0]=A,this.h[1]=x,this.h[2]=R,this.h[3]=E,this.h[4]=I,this.h[5]=T,this.h[6]=S,this.h[7]=P,this.h[8]=U,this.h[9]=B},pe.prototype.finish=function(e,t){var r,n,a,i,o=new Uint16Array(10);if(this.leftover){for(i=this.leftover,this.buffer[i++]=1;i<16;i++)this.buffer[i]=0;this.fin=1,this.blocks(this.buffer,0,16)}for(r=this.h[1]>>>13,this.h[1]&=8191,i=2;i<10;i++)this.h[i]+=r,r=this.h[i]>>>13,this.h[i]&=8191;for(this.h[0]+=5*r,r=this.h[0]>>>13,this.h[0]&=8191,this.h[1]+=r,r=this.h[1]>>>13,this.h[1]&=8191,this.h[2]+=r,o[0]=this.h[0]+5,r=o[0]>>>13,o[0]&=8191,i=1;i<10;i++)o[i]=this.h[i]+r,r=o[i]>>>13,o[i]&=8191;for(o[9]-=8192,n=(1^r)-1,i=0;i<10;i++)o[i]&=n;for(n=~n,i=0;i<10;i++)this.h[i]=this.h[i]&n|o[i];for(this.h[0]=65535&(this.h[0]|this.h[1]<<13),this.h[1]=65535&(this.h[1]>>>3|this.h[2]<<10),this.h[2]=65535&(this.h[2]>>>6|this.h[3]<<7),this.h[3]=65535&(this.h[3]>>>9|this.h[4]<<4),this.h[4]=65535&(this.h[4]>>>12|this.h[5]<<1|this.h[6]<<14),this.h[5]=65535&(this.h[6]>>>2|this.h[7]<<11),this.h[6]=65535&(this.h[7]>>>5|this.h[8]<<8),this.h[7]=65535&(this.h[8]>>>8|this.h[9]<<5),a=this.h[0]+this.pad[0],this.h[0]=65535&a,i=1;i<8;i++)a=(this.h[i]+this.pad[i]|0)+(a>>>16)|0,this.h[i]=65535&a;e[t+0]=this.h[0]>>>0&255,e[t+1]=this.h[0]>>>8&255,e[t+2]=this.h[1]>>>0&255,e[t+3]=this.h[1]>>>8&255,e[t+4]=this.h[2]>>>0&255,e[t+5]=this.h[2]>>>8&255,e[t+6]=this.h[3]>>>0&255,e[t+7]=this.h[3]>>>8&255,e[t+8]=this.h[4]>>>0&255,e[t+9]=this.h[4]>>>8&255,e[t+10]=this.h[5]>>>0&255,e[t+11]=this.h[5]>>>8&255,e[t+12]=this.h[6]>>>0&255,e[t+13]=this.h[6]>>>8&255,e[t+14]=this.h[7]>>>0&255,e[t+15]=this.h[7]>>>8&255},pe.prototype.update=function(e,t,r){var n,a;if(this.leftover){for(a=16-this.leftover,a>r&&(a=r),n=0;n<a;n++)this.buffer[this.leftover+n]=e[t+n];if(r-=a,t+=a,this.leftover+=a,this.leftover<16)return;this.blocks(this.buffer,0,16),this.leftover=0}if(r>=16&&(a=r-r%16,this.blocks(e,t,a),t+=a,r-=a),r){for(n=0;n<r;n++)this.buffer[this.leftover+n]=e[t+n];this.leftover+=r}};var de=v,ye=g,ve=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],ge=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]),me=32,we=24,be=32,ke=16,_e=32,Ae=32,xe=32,Re=32,Ee=32,Ie=we,Te=be,Se=ke,Pe=64,Ue=32,Be=64,Oe=32,Me=64;e.lowlevel={crypto_core_hsalsa20:c,crypto_stream_xor:p,crypto_stream:h,crypto_stream_salsa20_xor:f,crypto_stream_salsa20:l,crypto_onetimeauth:d,crypto_onetimeauth_verify:y,crypto_verify_16:a,crypto_verify_32:i,crypto_secretbox:v,crypto_secretbox_open:g,crypto_scalarmult:U,crypto_scalarmult_base:B,crypto_box_beforenm:M,crypto_box_afternm:de,crypto_box:L,crypto_box_open:K,crypto_box_keypair:O,crypto_hash:j,crypto_sign:V,crypto_sign_keypair:H,crypto_sign_open:W,crypto_secretbox_KEYBYTES:me,crypto_secretbox_NONCEBYTES:we,crypto_secretbox_ZEROBYTES:be,crypto_secretbox_BOXZEROBYTES:ke,crypto_scalarmult_BYTES:_e,crypto_scalarmult_SCALARBYTES:Ae,crypto_box_PUBLICKEYBYTES:xe,crypto_box_SECRETKEYBYTES:Re,crypto_box_BEFORENMBYTES:Ee,crypto_box_NONCEBYTES:Ie,crypto_box_ZEROBYTES:Te,crypto_box_BOXZEROBYTES:Se,crypto_sign_BYTES:Pe,crypto_sign_PUBLICKEYBYTES:Ue,crypto_sign_SECRETKEYBYTES:Be,crypto_sign_SEEDBYTES:Oe,crypto_hash_BYTES:Me},e.randomBytes=function(e){var t=new Uint8Array(e);return te(t,e),t},e.secretbox=function(e,t,r){Q(e,t,r),G(r,t);for(var n=new Uint8Array(be+e.length),a=new Uint8Array(n.length),i=0;i<e.length;i++)n[i+be]=e[i];return v(a,n,n.length,t,r),a.subarray(ke)},e.secretbox.open=function(e,t,r){Q(e,t,r),G(r,t);for(var n=new Uint8Array(ke+e.length),a=new Uint8Array(n.length),i=0;i<e.length;i++)n[i+ke]=e[i];return n.length<32?null:0!==g(a,n,n.length,t,r)?null:a.subarray(be)},e.secretbox.keyLength=me,e.secretbox.nonceLength=we,e.secretbox.overheadLength=ke,e.scalarMult=function(e,t){if(Q(e,t),e.length!==Ae)throw new Error("bad board_rows size");if(t.length!==_e)throw new Error("bad p size");var r=new Uint8Array(_e);return U(r,e,t),r},e.scalarMult.base=function(e){if(Q(e),e.length!==Ae)throw new Error("bad board_rows size");var t=new Uint8Array(_e);return B(t,e),t},e.scalarMult.scalarLength=Ae,e.scalarMult.groupElementLength=_e,e.box=function(t,r,n,a){var i=e.box.before(n,a);return e.secretbox(t,r,i)},e.box.before=function(e,t){Q(e,t),Z(e,t);var r=new Uint8Array(Ee);return M(r,e,t),r},e.box.after=e.secretbox,e.box.open=function(t,r,n,a){var i=e.box.before(n,a);return e.secretbox.open(t,r,i)},e.box.open.after=e.secretbox.open,e.box.keyPair=function(){var e=new Uint8Array(xe),t=new Uint8Array(Re);return O(e,t),{publicKey:e,secretKey:t}},e.box.keyPair.fromSecretKey=function(e){if(Q(e),e.length!==Re)throw new Error("bad secret key size");var t=new Uint8Array(xe);return B(t,e),{publicKey:t,secretKey:new Uint8Array(e)}},e.box.publicKeyLength=xe,e.box.secretKeyLength=Re,e.box.sharedKeyLength=Ee,e.box.nonceLength=Ie,e.box.overheadLength=e.secretbox.overheadLength,e.sign=function(e,t){if(Q(e,t),t.length!==Be)throw new Error("bad secret key size");var r=new Uint8Array(Pe+e.length);return V(r,e,e.length,t),r},e.sign.open=function(e,t){if(Q(e,t),t.length!==Ue)throw new Error("bad public key size");var r=new Uint8Array(e.length),n=W(r,e,e.length,t);if(n<0)return null;for(var a=new Uint8Array(n),i=0;i<a.length;i++)a[i]=r[i];return a},e.sign.detached=function(t,r){for(var n=e.sign(t,r),a=new Uint8Array(Pe),i=0;i<a.length;i++)a[i]=n[i];return a},e.sign.detached.verify=function(e,t,r){if(Q(e,t,r),t.length!==Pe)throw new Error("bad signature size");if(r.length!==Ue)throw new Error("bad public key size");var n,a=new Uint8Array(Pe+e.length),i=new Uint8Array(Pe+e.length);for(n=0;n<Pe;n++)a[n]=t[n];for(n=0;n<e.length;n++)a[n+Pe]=e[n];return W(i,a,a.length,r)>=0},e.sign.keyPair=function(){var e=new Uint8Array(Ue),t=new Uint8Array(Be);return H(e,t),{publicKey:e,secretKey:t}},e.sign.keyPair.fromSecretKey=function(e){if(Q(e),e.length!==Be)throw new Error("bad secret key size");for(var t=new Uint8Array(Ue),r=0;r<t.length;r++)t[r]=e[32+r];return{publicKey:t,secretKey:new Uint8Array(e)}},e.sign.keyPair.fromSeed=function(e){if(Q(e),e.length!==Oe)throw new Error("bad seed size");for(var t=new Uint8Array(Ue),r=new Uint8Array(Be),n=0;n<32;n++)r[n]=e[n];return H(t,r,!0),{publicKey:t,secretKey:r}},e.sign.publicKeyLength=Ue,e.sign.secretKeyLength=Be,e.sign.seedLength=Oe,e.sign.signatureLength=Pe,e.hash=function(e){Q(e);var t=new Uint8Array(Me);return j(t,e,e.length),t},e.hash.hashLength=Me,e.verify=function(e,t){return Q(e,t),0!==e.length&&0!==t.length&&(e.length===t.length&&0===n(e,0,t,0,e.length))},e.setPRNG=function(e){te=e},function(){var t="undefined"!=typeof self?self.crypto||self.msCrypto:null;if(t&&t.getRandomValues){var n=65536;e.setPRNG(function(e,r){var a,i=new Uint8Array(r);for(a=0;a<r;a+=n)t.getRandomValues(i.subarray(a,a+Math.min(r-a,n)));for(a=0;a<r;a++)e[a]=i[a];$(i)})}else t=r(27),t&&t.randomBytes&&e.setPRNG(function(e,r){var n,a=t.randomBytes(r);for(n=0;n<r;n++)e[n]=a[n];$(a)})}()}("undefined"!=typeof e&&e.exports?e.exports:self.nacl=self.nacl||{})},function(e,t){},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(25),u=n(o),s=r(11),c=n(s),f=window.crypto,l="ECDSA_SHA256",h="RS256",p=c.default.isFirefox||c.default.isEdge()?h:l,d=function(){function e(){a(this,e)}return i(e,null,[{key:"generateKeys",value:function(t,r){var n,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return regeneratorRuntime.async(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,regeneratorRuntime.awrap(e._generateKeyPair(a));case 2:return n=i.sent,n.level=t,void 0!==r&&(n.expiresAtMs=(new Date).getTime()+r),i.abrupt("return",n);case 6:case"end":return i.stop()}},null,this)}},{key:"sign",value:function(t,r){var n,a;return regeneratorRuntime.async(function(i){for(;;)switch(i.prev=i.next){case 0:if(n=r.privateKey,"CryptoKey"===r.privateKey.constructor.name){i.next=5;break}return i.next=4,regeneratorRuntime.awrap(f.subtle.importKey("jwk",r.privateKey,e[p].import,!1,["sign"]));case 4:n=i.sent;case 5:return i.t0=Uint8Array,i.next=8,regeneratorRuntime.awrap(f.subtle.sign(e[p].sign,n,c.default.wrapBuffer(t)));case 8:return i.t1=i.sent,a=new i.t0(i.t1),p===l&&(a=e._P1363ToDer(a)),i.abrupt("return",(0,u.default)(a));case 12:case"end":return i.stop()}},null,this)}},{key:"verify",value:function(t,r,n){var a,i;return regeneratorRuntime.async(function(o){for(;;)switch(o.prev=o.next){case 0:return r=c.default.bufferKey(r),p===l&&(r=e._DerToP1363(r)),o.next=4,regeneratorRuntime.awrap(f.subtle.importKey("spki",n,e[p].import,!1,["verify"]));case 4:return a=o.sent,o.next=7,regeneratorRuntime.awrap(f.subtle.verify(e[p].verify,a,r,c.default.wrapBuffer(t)));case 7:if(i=o.sent){o.next=10;break}throw new Error("Invalid signature "+r+" on message "+t+" with pk "+n);case 10:case"end":return o.stop()}},null,this)}},{key:"_generateKeyPair",value:function(t){var r;return regeneratorRuntime.async(function(n){for(;;)switch(n.prev=n.next){case 0:return r=void 0,n.prev=1,n.next=4,regeneratorRuntime.awrap(f.subtle.generateKey(e[p].generate,t,["sign","verify"]));case 4:r=n.sent,n.next=13;break;case 7:return n.prev=7,n.t0=n.catch(1),p=h,n.next=12,regeneratorRuntime.awrap(f.subtle.generateKey(e[p].generate,t,["sign","verify"]));case 12:r=n.sent;case 13:if(r={publicKey:r.publicKey,privateKey:r.privateKey},!t){n.next=18;break}return n.next=17,regeneratorRuntime.awrap(f.subtle.exportKey("jwk",r.privateKey));case 17:r.privateKey=n.sent;case 18:return n.t1=Uint8Array,n.next=21,regeneratorRuntime.awrap(f.subtle.exportKey("spki",r.publicKey));case 21:return n.t2=n.sent,r.publicKey=new n.t1(n.t2),n.t3=u.default,n.next=26,regeneratorRuntime.awrap(f.subtle.digest("SHA-256",r.publicKey));case 26:return n.t4=n.sent,r.id=(0,n.t3)(n.t4).substring(0,16),r.algorithm=p,n.abrupt("return",r);case 30:case"end":return n.stop()}},null,this,[[1,7]])}},{key:"_P1363ToDer",value:function(e){var t=Array.from(e,function(e){return("00"+e.toString(16)).slice(-2)}).join(""),r=t.substr(0,t.length/2),n=t.substr(t.length/2);r=r.replace(/^(00)+/,""),n=n.replace(/^(00)+/,""),("0x80"&parseInt(r,16))>0&&(r="00"+r),("0x80"&parseInt(n,16))>0&&(n="00"+n);var a="02"+(r.length/2).toString(16).padStart(2,"0")+r,i="02"+(n.length/2).toString(16).padStart(2,"0")+n,o="30"+((a.length+i.length)/2).toString(16).padStart(2,"0")+a+i;return new Uint8Array(o.match(/[\da-f]{2}/gi).map(function(e){return parseInt(e,16)}))}},{key:"_DerToP1363",value:function(e){var t=Array.from(e,function(e){return("00"+e.toString(16)).slice(-2)}).join(""),r=2*parseInt(t.substr(6,2),16),n=t.substr(8,r),a=t.substr(12+r);n=n.length>64?n.substr(-64):n.padStart(64,"0"),a=a.length>64?a.substr(-64):a.padStart(64,"0");var i=""+n+a;return new Uint8Array(i.match(/[\da-f]{2}/gi).map(function(e){return parseInt(e,16)}))}},{key:l,get:function(){var e={};return e.generate=e.import={name:"ECDSA",namedCurve:"P-256"},e.sign=e.verify={name:"ECDSA",hash:{name:"SHA-256"}},e}},{key:h,get:function(){var e={};return e.generate={name:"RSASSA-PKCS1-v1_5",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},e.import=e.sign=e.verify={name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},e}}]),e}();t.default=d},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(30),c=n(s),f=r(31),l=n(f),h=new l.default,p=function(e){function t(e){return a(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,h))}return o(t,e),u(t,null,[{key:"getActiveMemberId",value:function(){return l.default.getActiveMemberId()}},{key:"setActiveMemberId",value:function(e){l.default.setActiveMemberId(e)}},{key:"clearAllKeys",value:function(){return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(h.clearAllKeys());case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},null,this)}}]),t}(c.default);t.default=p},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(5),u=n(o),s=function(){function e(t,r){if(a(this,e),!t)throw new Error("Invalid memberId");if(!r)throw new Error("Invalid keystore");this._memberId=t,this._keystore=r,t&&r.constructor.setActiveMemberId&&r.constructor.setActiveMemberId(t)}return i(e,[{key:"generateKey",value:function(e,t){var r,n;return regeneratorRuntime.async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,regeneratorRuntime.awrap(u.default.generateKeys(e,t));case 2:return r=a.sent,a.next=5,regeneratorRuntime.awrap(this._keystore.put(this._memberId,r));case 5:return n=a.sent,n&&n.privateKey&&delete n.privateKey,a.abrupt("return",n);case 8:case"end":return a.stop()}},null,this)}},{key:"createSigner",value:function(e){var t;return regeneratorRuntime.async(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,regeneratorRuntime.awrap(this._keystore.getByLevel(this._memberId,e));case 2:return t=r.sent,r.abrupt("return",u.default.createSignerFromKeypair(t));case 4:case"end":return r.stop()}},null,this)}},{key:"createVerifier",value:function(e){var t;return regeneratorRuntime.async(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,regeneratorRuntime.awrap(this._keystore.getById(this._memberId,e));case 2:return t=r.sent,r.abrupt("return",u.default.createVerifierFromKeypair(t));case 4:case"end":return r.stop()}},null,this)}}]),e}();t.default=s},function(e,t,r){"use strict";function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o="member_key",u=1,s="member_keys",c="readonly",f="readwrite",l=function(){function e(){a(this,e)}return i(e,[{key:"put",value:function(t,r){var a;return regeneratorRuntime.async(function(i){for(;;)switch(i.prev=i.next){case 0:if(t){i.next=2;break}throw new Error("Invalid memberId");case 2:if(r){i.next=4;break}throw new Error("Don't know what key to put");case 4:if(r.level){i.next=6;break}throw new Error("Don't know what level to put key");case 6:i.next=8;break;case 8:if(!(r.expiresAtMs<Date.now())){i.next=10;break}throw new Error("Key "+r.id+" has expired");case 10:return i.next=12,regeneratorRuntime.awrap(e._getObjectStore(s,f));case 12:return a=i.sent,i.abrupt("return",new Promise(function(i,o){var u=a.get(t);u.onsuccess=function(){var s=u.result||{},c=a.put(Object.assign(s,n({},r.level,r)),t);c.onsuccess=function(){e.setActiveMemberId(t),i(r)},c.onerror=function(){return o(new Error("Error saving member to database: "+c.error))}},u.onerror=function(){return o(new Error("Error getting member from database: "+u.error))}}));case 14:case"end":return i.stop()}},null,this)}},{key:"getByLevel",value:function(t,r){var n;return regeneratorRuntime.async(function(a){for(;;)switch(a.prev=a.next){case 0:if(t){a.next=2;break}throw new Error("Invalid memberId");case 2:if(r){a.next=4;break}throw new Error("Don't know what key level to get");case 4:a.next=6;break;case 6:return a.next=8,regeneratorRuntime.awrap(e._getObjectStore(s));case 8:return n=a.sent,a.abrupt("return",new Promise(function(a,i){var o=n.get(t);o.onsuccess=function(){var n=o.result;return n?n[r]?n[r].expiresAtMs<Date.now()?i(new Error("Key with level "+r+" has expired")):(e.setActiveMemberId(t),void a(o.result[r])):i(new Error("No key with level "+r+" found")):i(new Error("Member with id "+t+" not found"))},o.onerror=function(){return i(new Error("Error getting member from database: "+o.error))}}));case 10:case"end":return a.stop()}},null,this)}},{key:"getById",value:function(t,r){var n;return regeneratorRuntime.async(function(a){for(;;)switch(a.prev=a.next){case 0:if(t){a.next=2;break}throw new Error("Invalid memberId");case 2:if(r){a.next=4;break}throw new Error("Don't know id of key to get");case 4:a.next=6;break;case 6:return a.next=8,regeneratorRuntime.awrap(e._getObjectStore(s));case 8:return n=a.sent,a.abrupt("return",new Promise(function(a,i){var o=n.get(t);o.onsuccess=function(){var n=o.result;return n?(Object.values(n).forEach(function(n){n.id===r&&(n.expiresAtMs<Date.now()&&i(new Error("Key with id "+n.id+" has expired")),e.setActiveMemberId(t),a(n))}),void i(new Error("No key with id "+r+" found"))):i(new Error("member "+t+" not found"))},o.onerror=function(){return i(new Error("Error getting member from database: "+o.error))}}));case 10:case"end":return a.stop()}},null,this)}},{key:"listKeys",value:function(t){var r;return regeneratorRuntime.async(function(n){for(;;)switch(n.prev=n.next){case 0:if(t){n.next=2;break}throw new Error("Invalid memberId");case 2:n.next=4;break;case 4:return n.next=6,regeneratorRuntime.awrap(e._getObjectStore(s));case 6:return r=n.sent,n.abrupt("return",new Promise(function(n,a){var i=r.get(t);i.onsuccess=function(){var r=i.result;return r?(e.setActiveMemberId(t),void n(Object.values(r).filter(function(e){return!(e.expiresAtMs<Date.now())}))):a(new Error("member "+t+" not found"))},i.onerror=function(){return a(new Error("Error getting member from database: "+i.error))}}));case 8:case"end":return n.stop()}},null,this)}},{key:"clearAllKeys",value:function(){var t;return regeneratorRuntime.async(function(r){
for(;;)switch(r.prev=r.next){case 0:return r.next=2,regeneratorRuntime.awrap(e._getObjectStore(s,f));case 2:return t=r.sent,r.abrupt("return",new Promise(function(e,r){var n=t.clear();n.onsuccess=function(){return e()},n.onerror=function(){return r(new Error("Error clearing the database: "+n.error))}}));case 4:case"end":return r.stop()}},null,this)}}],[{key:"setActiveMemberId",value:function(e){localStorage.activeMemberId=e}},{key:"getActiveMemberId",value:function(){var e=localStorage.activeMemberId;if(!e)throw new Error("No active memberId on this browser");return e}},{key:"_openDb",value:function(e,t){return regeneratorRuntime.async(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",new Promise(function(r,n){indexedDB||n(new Error("Your browser does not support IndexedDB"));var a=indexedDB.open(e,t);a.onsuccess=function(){r(a.result)},a.onerror=function(){return n(new Error("Error opening database: "+a.error))},a.onupgradeneeded=function(e){var t=e.target.result;t.createObjectStore(s)}}));case 1:case"end":return r.stop()}},null,this)}},{key:"_getObjectStore",value:function(t){var r,n,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c;return regeneratorRuntime.async(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,regeneratorRuntime.awrap(e._openDb(o,u));case 2:return r=i.sent,n=r.transaction(t,a),n.oncomplete=function(){return r.close()},n.onerror=function(){throw new Error("Error opening transaction: "+n.error)},i.abrupt("return",n.objectStore(t));case 7:case"end":return i.stop()}},null,this)}}]),e}();t.default=l},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(30),c=n(s),f=r(33),l=n(f),h=new l.default,p=function(e){function t(e){return a(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,h))}return o(t,e),u(t,null,[{key:"getActiveMemberId",value:function(){var e=l.default.getActiveMemberId();if(!e)throw new Error("No active memberId on this browser");return e}}]),t}(c.default);t.default=p},function(e,t){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e){return Object.assign({},e)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i={},o=function(){function e(){r(this,e)}return a(e,[{key:"put",value:function(e,t){return regeneratorRuntime.async(function(r){for(;;)switch(r.prev=r.next){case 0:if(e){r.next=2;break}throw new Error("Invalid memberId");case 2:if(t){r.next=4;break}throw new Error("Don't know what key to put");case 4:if(t.level){r.next=6;break}throw new Error("Invalid key structure: has no privilege level");case 6:if(!(t.expiresAtMs<Date.now())){r.next=8;break}throw new Error("Key "+t.id+" has expired");case 8:return i[e]||(i[e]={}),i[e][t.level]=n(t),i.ACTIVE=e,r.abrupt("return",n(i[e][t.level]));case 12:case"end":return r.stop()}},null,this)}},{key:"getByLevel",value:function(e,t){return regeneratorRuntime.async(function(r){for(;;)switch(r.prev=r.next){case 0:if(e){r.next=2;break}throw new Error("Invalid memberId");case 2:if(t){r.next=4;break}throw new Error("Don't know what key level to get");case 4:if(i[e]){r.next=6;break}throw new Error("member "+e+" not found");case 6:if(i[e][t]){r.next=8;break}throw new Error("No key with level "+t+" found");case 8:if(!(i[e][t].expiresAtMs<Date.now())){r.next=10;break}throw new Error("Key with level "+t+" has expired");case 10:return r.abrupt("return",n(i[e][t]));case 11:case"end":return r.stop()}},null,this)}},{key:"getById",value:function(e,t){var r;return regeneratorRuntime.async(function(a){for(;;)switch(a.prev=a.next){case 0:if(i[e]){a.next=2;break}throw new Error("member "+e+" not found");case 2:if(t){a.next=4;break}throw new Error("Don't know id of key to get");case 4:a.t0=regeneratorRuntime.keys(i[e]);case 5:if((a.t1=a.t0()).done){a.next=14;break}if(r=a.t1.value,!Object.prototype.hasOwnProperty.call(i[e],r)){a.next=12;break}if(i[e][r].id!==t){a.next=12;break}if(!(i[e][r].expiresAtMs<Date.now())){a.next=11;break}throw new Error("Key with id "+i[e][r].id+" has expired");case 11:return a.abrupt("return",n(i[e][r]));case 12:a.next=5;break;case 14:throw new Error("No key with id "+t+" found");case 15:case"end":return a.stop()}},null,this)}},{key:"listKeys",value:function(e){return regeneratorRuntime.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(i[e]){t.next=2;break}throw new Error("member "+e+" not found");case 2:return t.abrupt("return",Object.keys(i[e]).map(function(t){return n(i[e][t])}).filter(function(e){return!(e.expiresAtMs<Date.now())}));case 3:case"end":return t.stop()}},null,this)}}],[{key:"setActiveMemberId",value:function(e){i.ACTIVE=e}},{key:"getActiveMemberId",value:function(){var e=i.ACTIVE;if(!e)throw new Error("No active memberId");return e}}]),e}();t.default=o},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e){return Object.assign({},e)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),c=r(33),f=n(c),l=r(30),h=n(l),p=r(5),d=n(p),y=r(25),v=n(y),g=r(22),m=n(g),w=[],b=new f.default,k=function(e){function t(e){if(a(this,t),w.length<1)throw new Error("Keys must be set before constructing.");return i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,b))}return o(t,e),s(t,null,[{key:"setKeys",value:function(e){var t,r,n,a,i,o;return regeneratorRuntime.async(function(u){for(;;)switch(u.prev=u.next){case 0:if(e&&Array.isArray(e)&&!(e.length<1)){u.next=2;break}throw new Error("invalid keys format");case 2:w=e,t=!0,r=!1,n=void 0,u.prev=6,a=w[Symbol.iterator]();case 8:if(t=(i=a.next()).done){u.next=19;break}if(o=i.value,o.publicKey&&o.privateKey&&o.level){u.next=12;break}throw new Error("Invalid keyPair format");case 12:"string"==typeof o.publicKey&&(o.publicKey=d.default.bufferKey(o.publicKey)),"string"==typeof o.privateKey&&(o.privateKey=d.default.bufferKey(o.privateKey)),o.id||(o.id=(0,v.default)((0,m.default)(o.publicKey)).substring(0,16)),o.algorithm="ED25519";case 16:t=!0,u.next=8;break;case 19:u.next=25;break;case 21:u.prev=21,u.t0=u.catch(6),r=!0,n=u.t0;case 25:u.prev=25,u.prev=26,!t&&a.return&&a.return();case 28:if(u.prev=28,!r){u.next=31;break}throw n;case 31:return u.finish(28);case 32:return u.finish(25);case 33:case"end":return u.stop()}},null,this,[[6,21,25,33],[26,,28,32]])}}]),s(t,[{key:"generateKey",value:function(e){var t,r,n,a,i,o,s;return regeneratorRuntime.async(function(c){for(;;)switch(c.prev=c.next){case 0:t=!0,r=!1,n=void 0,c.prev=3,a=w[Symbol.iterator]();case 5:if(t=(i=a.next()).done){c.next=14;break}if(o=i.value,o.level!==e){c.next=11;break}return s=u(o),s.privateKey&&delete s.privateKey,c.abrupt("return",s);case 11:t=!0,c.next=5;break;case 14:c.next=20;break;case 16:c.prev=16,c.t0=c.catch(3),r=!0,n=c.t0;case 20:c.prev=20,c.prev=21,!t&&a.return&&a.return();case 23:if(c.prev=23,!r){c.next=26;break}throw n;case 26:return c.finish(23);case 27:return c.finish(20);case 28:case"end":return c.stop()}},null,this,[[3,16,20,28],[21,,23,27]])}},{key:"createSigner",value:function(e){var t;return regeneratorRuntime.async(function(r){for(;;)switch(r.prev=r.next){case 0:if(t=w.filter(function(t){return t.level===e}),t&&t.length){r.next=3;break}throw new Error("No key with level "+e+" found");case 3:return r.abrupt("return",d.default.createSignerFromKeypair(u(t[0])));case 4:case"end":return r.stop()}},null,this)}},{key:"createVerifier",value:function(e){var t;return regeneratorRuntime.async(function(r){for(;;)switch(r.prev=r.next){case 0:if(t=w.filter(function(t){return t.id===e}),t&&t.length){r.next=3;break}throw new Error("No key with id "+e+" found");case 3:return r.abrupt("return",d.default.createVerifierFromKeypair(u(t[0])));case 4:case"end":return r.stop()}},null,this)}}]),t}(h.default);t.default=k},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(30),s=n(u),c=r(36),f=n(c),l=(new f.default,null),h=function(e){function t(e){throw a(this,t),new Error("Not available on browser")}return i(t,e),o(t,null,[{key:"setDirRoot",value:function(e){f.default.setDirRoot(e),l=e}}]),o(t,null,[{key:"getActiveMemberId",value:function(){var e=f.default.getActiveMemberId();if(!e)throw new Error("No active memberId on this browser");return e}}]),t}(s.default);t.default=h},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(5),u=n(o),s=r(37),c=n(s),f={activeMemberId:""},l=function(){function e(){a(this,e)}return i(e,[{key:"put",value:function(t,r){var n;return regeneratorRuntime.async(function(a){for(;;)switch(a.prev=a.next){case 0:if(t){a.next=2;break}throw new Error("Invalid memberId");case 2:if(r){a.next=4;break}throw new Error("Don't know what key to put");case 4:if(r.level){a.next=6;break}throw new Error("Don't know what level to put key");case 6:if(!(r.expiresAtMs<Date.now())){a.next=8;break}throw new Error("Key "+r.id+" has expired");case 8:throw new Error("Not available on browser");case 10:return a.next=12,regeneratorRuntime.awrap(this._loadMember(t));case 12:if(a.t0=a.sent,a.t0){a.next=15;break}a.t0={};case 15:return n=a.t0,n[r.level]=r,a.next=19,regeneratorRuntime.awrap(this._saveMember(t,n));case 19:return e.setActiveMemberId(t),a.abrupt("return",r);case 21:case"end":return a.stop()}},null,this)}},{key:"getByLevel",value:function(t,r){var n;return regeneratorRuntime.async(function(a){for(;;)switch(a.prev=a.next){case 0:if(t){a.next=2;break}throw new Error("Invalid memberId");case 2:if(r){a.next=4;break}throw new Error("Don't know what key level to get");case 4:throw new Error("Not available on browser");case 6:return a.next=8,regeneratorRuntime.awrap(this._loadMember(t));case 8:if(n=a.sent){a.next=11;break}throw new Error("Member with id "+t+" not found");case 11:if(n[r]){a.next=13;break}throw new Error("No key with level "+r+" found");case 13:if(!(n[r].expiresAtMs<Date.now())){a.next=15;break}throw new Error("Key with level "+r+" has expired");case 15:return e.setActiveMemberId(t),a.abrupt("return",n[r]);case 17:case"end":return a.stop()}},null,this)}},{key:"getById",value:function(t,r){var n,a;return regeneratorRuntime.async(function(i){for(;;)switch(i.prev=i.next){case 0:if(t){i.next=2;break}throw new Error("Invalid memberId");case 2:if(r){i.next=4;break}throw new Error("Don't know id of key to get");case 4:throw new Error("Not available on browser");case 6:return i.next=8,regeneratorRuntime.awrap(this._loadMember(t));case 8:if(n=i.sent){i.next=11;break}throw new Error("member "+t+" not found");case 11:i.t0=regeneratorRuntime.keys(n);case 12:if((i.t1=i.t0()).done){i.next=22;break}if(a=i.t1.value,!Object.prototype.hasOwnProperty.call(n,a)){i.next=20;break}if(n[a].id!==r){i.next=20;break}if(!(n[a].expiresAtMs<Date.now())){i.next=18;break}throw new Error("Key with id "+n[a].id+" has expired");case 18:return e.setActiveMemberId(t),i.abrupt("return",n[a]);case 20:i.next=12;break;case 22:throw new Error("No key with id "+r+" found");case 23:case"end":return i.stop()}},null,this)}},{key:"listKeys",value:function(t){var r,n,a;return regeneratorRuntime.async(function(i){for(;;)switch(i.prev=i.next){case 0:if(t){i.next=2;break}throw new Error("Invalid memberId");case 2:throw new Error("Not available on browser");case 4:return i.next=6,regeneratorRuntime.awrap(this._loadMember(t));case 6:if(r=i.sent){i.next=10;break}if(r){i.next=10;break}throw new Error("member "+t+" not found");case 10:e.setActiveMemberId(t),n=[];for(a in r)!r.hasOwnProperty(a)||r[a].expiresAtMs<Date.now()||n.push(r[a]);return i.abrupt("return",n);case 14:case"end":return i.stop()}},null,this)}},{key:"_saveMember",value:function(e,t){var r,n,a;return regeneratorRuntime.async(function(i){for(;;)switch(i.prev=i.next){case 0:r=[];for(n in t)t.hasOwnProperty(n)&&(a=Object.assign({},t[n]),a.publicKey&&(a.publicKey=u.default.strKey(a.publicKey)),a.privateKey&&(a.privateKey=u.default.strKey(a.privateKey)),r.push(a));return i.next=4,regeneratorRuntime.awrap(c.default.writeFile(e.split(":").join("_"),JSON.stringify({keys:r})));case 4:case"end":return i.stop()}},null,this)}},{key:"_loadMember",value:function(e){var t,r,n,a,i;return regeneratorRuntime.async(function(o){for(;;)switch(o.prev=o.next){case 0:return t=void 0,o.prev=1,o.next=4,regeneratorRuntime.awrap(c.default.readFile(e.split(":").join("_")));case 4:t=o.sent,o.next=10;break;case 7:o.prev=7,o.t0=o.catch(1),t='{"keys":[]}';case 10:for(r=JSON.parse(t).keys||[],n={},a=0;a<r.length;a++)i=r[a],i.publicKey&&(i.publicKey=u.default.bufferKey(i.publicKey)),i.privateKey&&(i.privateKey=u.default.bufferKey(i.privateKey)),n[i.level]=i;return o.abrupt("return",n);case 14:case"end":return o.stop()}},null,this,[[1,7]])}}],[{key:"setDirRoot",value:function(e){c.default.dirRoot=e}},{key:"setActiveMemberId",value:function(e){f.activeMemberId=e}},{key:"getActiveMemberId",value:function(){var e=f.activeMemberId;if(!e)throw new Error("No active memberId on this browser");return e}}]),e}();t.default=l},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=function(){function e(){n(this,e)}return a(e,null,[{key:"readFile",value:function(e){return Promise.reject("Not available on browser")}},{key:"writeFile",value:function(e,t){return Promise.reject("Not available on browser")}},{key:"_ensureExists",value:function(e,t){return Promise.reject("Not available on browser")}},{key:"_getFullFilename",value:function(e){return Promise.reject("Not available on browser")}}]),e}();i._options={encoding:"utf-8",mode:384},i.dirRoot=null,t.default=i},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(39),u=n(o),s=r(69),c=n(s),f=r(70),l=n(f),h=r(11),p=n(h),d=r(41),y=n(d),v=r(71),g=n(v),m=function(){function e(t,r,n,i,o,s,f){a(this,e),this._id=r,this._client=new u.default(t,r,n,i,o,s,f),this._unauthenticatedClient=new c.default(t,i,o,s,f)}return i(e,[{key:"memberId",value:function(){return this._id}},{key:"aliases",value:function(){var e=this;return p.default.callAsync(this.aliases,function(){var t;return regeneratorRuntime.async(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,regeneratorRuntime.awrap(e._client.getAliases());case 2:return t=r.sent,r.abrupt("return",t.data.aliases);case 4:case"end":return r.stop()}},null,e)})}},{key:"firstAlias",value:function(){var e=this;return p.default.callAsync(this.firstAlias,function(){var t;return regeneratorRuntime.async(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,regeneratorRuntime.awrap(e._client.getAliases());case 2:return t=r.sent,r.abrupt("return",t.data.aliases[0]);case 4:case"end":return r.stop()}},null,e)})}},{key:"keys",value:function(){var e=this;return p.default.callAsync(this.keys,function(){var t;return regeneratorRuntime.async(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,regeneratorRuntime.awrap(e._getMember());case 2:return t=r.sent,r.abrupt("return",t.keys);case 4:case"end":return r.stop()}},null,e)})}},{key:"useAccessToken",value:function(e){this._client.useAccessToken(e)}},{key:"clearAccessToken",value:function(){this._client.clearAccessToken()}},{key:"setCustomerInitiated",value:function(){this._client.setCustomerInitiated()}},{key:"approveKey",value:function(e){var t=this;return p.default.callAsync(this.approveKey,function(){var r;return regeneratorRuntime.async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,regeneratorRuntime.awrap(t._getPreviousHash());case 2:return r=n.sent,n.next=5,regeneratorRuntime.awrap(t._client.approveKey(r,e));case 5:case"end":return n.stop()}},null,t)})}},{key:"approveKeys",value:function(e){var t=this;return p.default.callAsync(this.approveKeys,function(){var r;return regeneratorRuntime.async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,regeneratorRuntime.awrap(t._getPreviousHash());case 2:return r=n.sent,n.next=5,regeneratorRuntime.awrap(t._client.approveKeys(r,e));case 5:case"end":return n.stop()}},null,t)})}},{key:"removeKey",value:function(e){var t=this;return p.default.callAsync(this.removeKey,function(){var r;return regeneratorRuntime.async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,regeneratorRuntime.awrap(t._getPreviousHash());case 2:return r=n.sent,n.next=5,regeneratorRuntime.awrap(t._client.removeKey(r,e));case 5:case"end":return n.stop()}},null,t)})}},{key:"removeKeys",value:function(e){var t=this;return p.default.callAsync(this.removeKeys,function(){var r;return regeneratorRuntime.async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,regeneratorRuntime.awrap(t._getPreviousHash());case 2:return r=n.sent,n.next=5,regeneratorRuntime.awrap(t._client.removeKeys(r,e));case 5:case"end":return n.stop()}},null,t)})}},{key:"addAlias",value:function(e,t){var r=this;return p.default.callAsync(this.addAlias,function(){var n;return regeneratorRuntime.async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,regeneratorRuntime.awrap(r._getPreviousHash());case 2:return n=a.sent,a.next=5,regeneratorRuntime.awrap(r._client.addAlias(n,e,t));case 5:case"end":return a.stop()}},null,r)})}},{key:"addAliases",value:function(e,t){var r=this;return p.default.callAsync(this.addAliases,function(){var n;return regeneratorRuntime.async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,regeneratorRuntime.awrap(r._getPreviousHash());case 2:return n=a.sent,a.next=5,regeneratorRuntime.awrap(r._client.addAliases(n,e,t));case 5:case"end":return a.stop()}},null,r)})}},{key:"removeAlias",value:function(e){var t=this;return p.default.callAsync(this.removeAlias,function(){var r;return regeneratorRuntime.async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,regeneratorRuntime.awrap(t._getPreviousHash());case 2:return r=n.sent,n.next=5,regeneratorRuntime.awrap(t._client.removeAlias(r,e));case 5:case"end":return n.stop()}},null,t)})}},{key:"removeAliases",value:function(e){var t=this;return p.default.callAsync(this.removeAliases,function(){var r;return regeneratorRuntime.async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,regeneratorRuntime.awrap(t._getPreviousHash());case 2:return r=n.sent,n.next=5,regeneratorRuntime.awrap(t._client.removeAliases(r,e));case 5:case"end":return n.stop()}},null,t)})}},{key:"useDefaultRecoveryRule",value:function(){var e=this;return p.default.callAsync(this.useDefaultRecoveryRule,function(){var t,r,n,a;return regeneratorRuntime.async(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,regeneratorRuntime.awrap(e._client.getDefaultRecoveryAgent());case 2:return t=i.sent,i.next=5,regeneratorRuntime.awrap(e._getPreviousHash());case 5:return r=i.sent,n={recoveryRule:{primaryAgent:t.data.memberId}},i.next=9,regeneratorRuntime.awrap(e._client.addRecoveryRule(r,n));case 9:return a=i.sent,i.abrupt("return",a.data.member.recoveryRule);case 11:case"end":return i.stop()}},null,e)})}},{key:"linkAccounts",value:function(e){var t=this;return p.default.callAsync(this.linkAccounts,function(){var r,n;return regeneratorRuntime.async(function(a){for(;;)switch(a.prev=a.next){case 0:if(!e.accessToken){a.next=7;break}return a.next=3,regeneratorRuntime.awrap(t._client.linkAccountsOauth(e));case 3:if(r=a.sent,"FAILURE_BANK_AUTHORIZATION_REQUIRED"!==r.data.status){a.next=6;break}throw new Error("Cannot link accounts. Must send bankAuthorization retrieved through push notification");case 6:return a.abrupt("return",r.data.accounts);case 7:return a.next=9,regeneratorRuntime.awrap(t._client.linkAccounts(e));case 9:return n=a.sent,a.abrupt("return",n.data.accounts);case 11:case"end":return a.stop()}},null,t)})}},{key:"unlinkAccounts",value:function(e){var t=this;return p.default.callAsync(this.unlinkAccounts,function(){return regeneratorRuntime.async(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,regeneratorRuntime.awrap(t._client.unlinkAccounts(e));case 2:case"end":return r.stop()}},null,t)})}},{key:"getAccounts",value:function(){var e=this;return p.default.callAsync(this.getAccounts,function(){var t;return regeneratorRuntime.async(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,regeneratorRuntime.awrap(e._client.getAccounts());case 2:return t=r.sent,r.abrupt("return",void 0===t.data.accounts?[]:t.data.accounts);case 4:case"end":return r.stop()}},null,e)})}},{key:"getAccount",value:function(e){var t=this;return p.default.callAsync(this.getAccount,function(){var r;return regeneratorRuntime.async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,regeneratorRuntime.awrap(t._client.getAccount(e));case 2:return r=n.sent,n.abrupt("return",void 0===r.data.account?[]:r.data.account);case 4:case"end":return n.stop()}},null,t)})}},{key:"getDefaultAccount",value:function(){var e=this;return p.default.callAsync(this.getDefaultAccount,function(){var t;return regeneratorRuntime.async(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,regeneratorRuntime.awrap(e._client.getDefaultAccount(e.memberId()));case 2:return t=r.sent,r.abrupt("return",t.data.account);case 4:case"end":return r.stop()}},null,e)})}},{key:"setDefaultAccount",value:function(e){var t=this;return p.default.callAsync(this.setDefaultAccount,function(){var r;return regeneratorRuntime.async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,regeneratorRuntime.awrap(t._client.setDefaultAccount(e,t.memberId()));case 2:return r=n.sent,n.abrupt("return",r.data.account);case 4:case"end":return n.stop()}},null,t)})}},{key:"isDefaultAccount",value:function(e){var t=this;return p.default.callAsync(this.isDefaultAccount,function(){return regeneratorRuntime.async(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,regeneratorRuntime.awrap(t.getDefaultAccount().id);case 2:return r.t0=r.sent,r.t1=e,r.abrupt("return",r.t0===r.t1);case 5:case"end":return r.stop()}},null,t)})}},{key:"getBankInfo",value:function(e){var t=this;return p.default.callAsync(this.getBankInfo,function(){var r;return regeneratorRuntime.async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,regeneratorRuntime.awrap(t._client.getBankInfo(e));case 2:return r=n.sent,n.abrupt("return",r.data.info);case 4:case"end":return n.stop()}},null,t)})}},{key:"subscribeToNotifications",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"token",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return p.default.callAsync(this.subscribeToNotifications,function(){var n;return regeneratorRuntime.async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,regeneratorRuntime.awrap(e._client.subscribeToNotifications(t,r));case 2:return n=a.sent,a.abrupt("return",n.data.subscriber);case 4:case"end":return a.stop()}},null,e)})}},{key:"getSubscribers",value:function(){var e=this;return p.default.callAsync(this.getSubscribers,function(){var t;return regeneratorRuntime.async(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,regeneratorRuntime.awrap(e._client.getSubscribers());case 2:return t=r.sent,r.abrupt("return",void 0===t.data.subscribers?[]:t.data.subscribers);case 4:case"end":return r.stop()}},null,e)})}},{key:"getSubscriber",value:function(e){var t=this;return p.default.callAsync(this.getSubscriber,function(){var r;return regeneratorRuntime.async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,regeneratorRuntime.awrap(t._client.getSubscriber(e));case 2:return r=n.sent,n.abrupt("return",r.data.subscriber);case 4:case"end":return n.stop()}},null,t)})}},{key:"getNotifications",value:function(e,t){var r=this;return p.default.callAsync(this.getNotifications,function(){var n,a;return regeneratorRuntime.async(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,regeneratorRuntime.awrap(r._client.getNotifications(e,t));case 2:return n=i.sent,a=void 0===n.data.notifications?[]:n.data.notifications,i.abrupt("return",{data:a,offset:n.data.offset});case 5:case"end":return i.stop()}},null,r)})}},{key:"getNotification",value:function(e){var t=this;return p.default.callAsync(this.getNotification,function(){var r;return regeneratorRuntime.async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,regeneratorRuntime.awrap(t._client.getNotification(e));case 2:return r=n.sent,n.abrupt("return",r.data.notification);case 4:case"end":return n.stop()}},null,t)})}},{key:"unsubscribeFromNotifications",value:function(e){var t=this;return p.default.callAsync(this.unsubscribeFromNotifications,function(){return regeneratorRuntime.async(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,regeneratorRuntime.awrap(t._client.unsubscribeFromNotifications(e));case 2:case"end":return r.stop()}},null,t)})}},{key:"triggerStepUpNotification",value:function(e){var t=this;return p.default.callAsync(this.triggerStepUpNotification,function(){var r;return regeneratorRuntime.async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,regeneratorRuntime.awrap(t._client.triggerStepUpNotification(e));case 2:return r=n.sent,n.abrupt("return",r.data.status);case 4:case"end":return n.stop()}},null,t)})}},{key:"triggerBalanceStepUpNotification",value:function(e){var t=this;return p.default.callAsync(this.triggerBalanceStepUpNotification,function(){var r;return regeneratorRuntime.async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,regeneratorRuntime.awrap(t._client.triggerBalanceStepUpNotification(e));case 2:return r=n.sent,n.abrupt("return",r.data.status);case 4:case"end":return n.stop()}},null,t)})}},{key:"triggerTransactionStepUpNotification",value:function(e,t){var r=this;return p.default.callAsync(this.triggerTransactionStepUpNotification,function(){var n;return regeneratorRuntime.async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,regeneratorRuntime.awrap(r._client.triggerTransactionStepUpNotification(e,t));case 2:return n=a.sent,a.abrupt("return",n.data.status);case 4:case"end":return a.stop()}},null,r)})}},{key:"addAddress",value:function(e,t){var r=this;return p.default.callAsync(this.addAddress,function(){var n;return regeneratorRuntime.async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,regeneratorRuntime.awrap(r._client.addAddress(e,t));case 2:return n=a.sent,a.abrupt("return",n.data.address);case 4:case"end":return a.stop()}},null,r)})}},{key:"getAddress",value:function(e){var t=this;return p.default.callAsync(this.getAddress,function(){var r;return regeneratorRuntime.async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,regeneratorRuntime.awrap(t._client.getAddress(e));case 2:return r=n.sent,n.abrupt("return",r.data.address);case 4:case"end":return n.stop()}},null,t)})}},{key:"getAddresses",value:function(){var e=this;return p.default.callAsync(this.getAddresses,function(){var t;return regeneratorRuntime.async(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,regeneratorRuntime.awrap(e._client.getAddresses());case 2:return t=r.sent,r.abrupt("return",void 0===t.data.addresses?[]:t.data.addresses);case 4:case"end":return r.stop()}},null,e)})}},{key:"deleteAddress",value:function(e){var t=this;return p.default.callAsync(this.deleteAddress,function(){return regeneratorRuntime.async(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,regeneratorRuntime.awrap(t._client.deleteAddress(e));case 2:case"end":return r.stop()}},null,t)})}},{key:"setProfile",value:function(e){var t=this;return p.default.callAsync(this.setProfile,function(){var r;return regeneratorRuntime.async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,regeneratorRuntime.awrap(t._client.setProfile(e));case 2:return r=n.sent,n.abrupt("return",r.data.profile);case 4:case"end":return n.stop()}},null,t)})}},{key:"getProfile",value:function(e){var t=this;return p.default.callAsync(this.getProfile,function(){var r;return regeneratorRuntime.async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,regeneratorRuntime.awrap(t._client.getProfile(e));case 2:return r=n.sent,n.abrupt("return",r.data.profile);case 4:case"end":return n.stop()}},null,t)})}},{key:"setProfilePicture",value:function(e,t){var r=this;return p.default.callAsync(this.setProfilePicture,function(){return regeneratorRuntime.async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,regeneratorRuntime.awrap(r._client.setProfilePicture(e,t));
case 2:case"end":return n.stop()}},null,r)})}},{key:"getProfilePicture",value:function(e,t){var r=this;return p.default.callAsync(this.getProfilePicture,function(){var n;return regeneratorRuntime.async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,regeneratorRuntime.awrap(r._client.getProfilePicture(e,t));case 2:return n=a.sent,a.abrupt("return",n.data.blob);case 4:case"end":return a.stop()}},null,r)})}},{key:"setReceiptContact",value:function(e){var t=this;return p.default.callAsync(this.setReceiptContact,function(){return regeneratorRuntime.async(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,regeneratorRuntime.awrap(t._client.setReceiptContact(e));case 2:case"end":return r.stop()}},null,t)})}},{key:"getReceiptContact",value:function(){var e=this;return p.default.callAsync(this.getReceiptContact,function(){var t;return regeneratorRuntime.async(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,regeneratorRuntime.awrap(e._client.getReceiptContact());case 2:return t=r.sent,r.abrupt("return",t.data.contact);case 4:case"end":return r.stop()}},null,e)})}},{key:"storeTokenRequest",value:function(e){var t=this;return p.default.callAsync(this.storeTokenRequest,function(){var r;return regeneratorRuntime.async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,regeneratorRuntime.awrap(t._client.storeTokenRequest(e));case 2:return r=n.sent,n.abrupt("return",r.data.tokenRequest);case 4:case"end":return n.stop()}},null,t)})}},{key:"createAccessToken",value:function(e,t,r){var n=this;return p.default.callAsync(this.createAccessToken,function(){return regeneratorRuntime.async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,regeneratorRuntime.awrap(new g.default(n._client,n,t).setFromId(n.memberId()).setToAlias(e).setToRealm(r).execute());case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}},null,n)})}},{key:"createAccessTokenBuilder",value:function(){var e=this;return p.default.callSync(this.createAccessTokenBuilder,function(){return new g.default(e._client,e,[])})}},{key:"replaceAccessToken",value:function(e,t){var r=this;return p.default.callAsync(this.replaceAccessToken,function(){var n,a;return regeneratorRuntime.async(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,regeneratorRuntime.awrap(r._resolveToken(e));case 2:return n=i.sent,i.next=5,regeneratorRuntime.awrap(r._client.replaceToken(n,t));case 5:return a=i.sent,i.abrupt("return",a.data.result);case 7:case"end":return i.stop()}},null,r)})}},{key:"replaceAndEndorseAccessToken",value:function(e,t){var r=this;return p.default.callAsync(this.replaceAndEndorseAccessToken,function(){var n,a;return regeneratorRuntime.async(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,regeneratorRuntime.awrap(r._resolveToken(e));case 2:return n=i.sent,i.next=5,regeneratorRuntime.awrap(r._client.replaceAndEndorseToken(n,t));case 5:return a=i.sent,i.abrupt("return",a.data.result);case 7:case"end":return i.stop()}},null,r)})}},{key:"createTransferToken",value:function(e,t){var r=this;return p.default.callSync(this.createTransferToken,function(){return new l.default(r._client,r,e,t).setFromId(r.memberId())})}},{key:"createTransferTokenBuilder",value:function(e,t){var r=this;return p.default.callSync(this.createTransferTokenBuilder,function(){return new l.default(r._client,r,e,t)})}},{key:"getToken",value:function(e){var t=this;return p.default.callAsync(this.getToken,function(){var r;return regeneratorRuntime.async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,regeneratorRuntime.awrap(t._client.getToken(e));case 2:return r=n.sent,n.abrupt("return",r.data.token);case 4:case"end":return n.stop()}},null,t)})}},{key:"getActiveAccessToken",value:function(e){var t=this;return p.default.callAsync(this.getActiveAccessToken,function(){var r;return regeneratorRuntime.async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,regeneratorRuntime.awrap(t._client.getActiveAccessToken(e));case 2:return r=n.sent,n.abrupt("return",r.data.token);case 4:case"end":return n.stop()}},null,t)})}},{key:"getTransferTokens",value:function(e,t){var r=this;return p.default.callAsync(this.getTransferTokens,function(){var n,a;return regeneratorRuntime.async(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,regeneratorRuntime.awrap(r._client.getTokens("TRANSFER",e,t));case 2:return n=i.sent,a=void 0===n.data.tokens?[]:n.data.tokens,i.abrupt("return",{data:a,offset:n.data.offset});case 5:case"end":return i.stop()}},null,r)})}},{key:"getAccessTokens",value:function(e,t){var r=this;return p.default.callAsync(this.getAccessTokens,function(){var n,a;return regeneratorRuntime.async(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,regeneratorRuntime.awrap(r._client.getTokens("ACCESS",e,t));case 2:return n=i.sent,a=void 0===n.data.tokens?[]:n.data.tokens,i.abrupt("return",{data:a,offset:n.data.offset});case 5:case"end":return i.stop()}},null,r)})}},{key:"endorseToken",value:function(e){var t=this;return p.default.callAsync(this.endorseToken,function(){var r,n;return regeneratorRuntime.async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,regeneratorRuntime.awrap(t._resolveToken(e));case 2:return r=a.sent,a.next=5,regeneratorRuntime.awrap(t._client.endorseToken(r));case 5:return n=a.sent,"string"==typeof e||e instanceof String||(e.payloadSignatures=n.data.result.token.payloadSignatures),a.abrupt("return",n.data.result);case 8:case"end":return a.stop()}},null,t)})}},{key:"cancelToken",value:function(e){var t=this;return p.default.callAsync(this.cancelToken,function(){var r,n;return regeneratorRuntime.async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,regeneratorRuntime.awrap(t._resolveToken(e));case 2:return r=a.sent,a.next=5,regeneratorRuntime.awrap(t._client.cancelToken(r));case 5:return n=a.sent,"string"==typeof e||e instanceof String||(e.payloadSignatures=n.data.result.token.payloadSignatures),a.abrupt("return",n.data.result);case 8:case"end":return a.stop()}},null,t)})}},{key:"getBlockingCancelTokenFunction",value:function(e){var t=this;return p.default.callAsync(this.getBlockingCancelTokenFunction,function(){var r,n;return regeneratorRuntime.async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,regeneratorRuntime.awrap(t._resolveToken(e));case 2:return r=a.sent,a.next=5,regeneratorRuntime.awrap(t._client.cancelToken(r,!0));case 5:if(n=a.sent,!n||!n.data||"function"!=typeof n.data.dispatchRequest){a.next=8;break}return a.abrupt("return",n.data.dispatchRequest);case 8:case"end":return a.stop()}},null,t)})}},{key:"redeemToken",value:function(e,t,r,n){var a=this,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;return p.default.callAsync(this.redeemToken,function(){var u,s;return regeneratorRuntime.async(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,regeneratorRuntime.awrap(a._resolveToken(e));case 2:if(u=c.sent,void 0===t&&(t=u.payload.transfer.lifetimeAmount),void 0===r&&(r=u.payload.transfer.currency),void 0===n&&(n=u.payload.description),!(p.default.countDecimals(t)>y.default.decimalPrecision)){c.next=8;break}throw new Error("Number of decimals in amount should be at most "+y.default.decimalPrecision);case 8:return c.next=10,regeneratorRuntime.awrap(a._client.redeemToken(u,t,r,n,i,o));case 10:return s=c.sent,c.abrupt("return",s.data.transfer);case 12:case"end":return c.stop()}},null,a)})}},{key:"getTransfer",value:function(e){var t=this;return p.default.callAsync(this.getTransfer,function(){var r;return regeneratorRuntime.async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,regeneratorRuntime.awrap(t._client.getTransfer(e));case 2:return r=n.sent,n.abrupt("return",r.data.transfer);case 4:case"end":return n.stop()}},null,t)})}},{key:"getTransfers",value:function(e,t,r){var n=this;return p.default.callAsync(this.getTransfers,function(){var a,i;return regeneratorRuntime.async(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,regeneratorRuntime.awrap(n._client.getTransfers(e,t,r));case 2:return a=o.sent,i=void 0===a.data.transfers?[]:a.data.transfers,o.abrupt("return",{data:i,offset:a.data.offset});case 5:case"end":return o.stop()}},null,n)})}},{key:"getBalance",value:function(e,t){var r=this;return p.default.callAsync(this.getBalance,function(){var n;return regeneratorRuntime.async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,regeneratorRuntime.awrap(r._client.getBalance(e,t));case 2:return n=a.sent,a.abrupt("return",n.data);case 4:case"end":return a.stop()}},null,r)})}},{key:"getBalances",value:function(e,t){var r=this;return p.default.callAsync(this.getBalances,function(){var n;return regeneratorRuntime.async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,regeneratorRuntime.awrap(r._client.getBalances(e,t));case 2:return n=a.sent,a.abrupt("return",n.data);case 4:case"end":return a.stop()}},null,r)})}},{key:"getTransaction",value:function(e,t,r){var n=this;return p.default.callAsync(this.getTransaction,function(){var a;return regeneratorRuntime.async(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,regeneratorRuntime.awrap(n._client.getTransaction(e,t,r));case 2:return a=i.sent,i.abrupt("return",a.data.transaction);case 4:case"end":return i.stop()}},null,n)})}},{key:"getTransactions",value:function(e,t,r,n){var a=this;return p.default.callAsync(this.getTransactions,function(){var i,o;return regeneratorRuntime.async(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,regeneratorRuntime.awrap(a._client.getTransactions(e,t,r,n));case 2:return i=u.sent,o=void 0===i.data.transactions?[]:i.data.transactions,u.abrupt("return",{data:o,offset:i.data.offset});case 5:case"end":return u.stop()}},null,a)})}},{key:"createBlob",value:function(e,t,r,n){var a=this;return p.default.callAsync(this.createBlob,function(){var i;return regeneratorRuntime.async(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,regeneratorRuntime.awrap(a._client.createBlob(e,t,r,n));case 2:return i=o.sent,o.abrupt("return",{blobId:i.data.blobId,type:t,name:r});case 4:case"end":return o.stop()}},null,a)})}},{key:"getBlob",value:function(e){var t=this;return p.default.callAsync(this.getBlob,function(){var r;return regeneratorRuntime.async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,regeneratorRuntime.awrap(t._client.getBlob(e));case 2:return r=n.sent,n.abrupt("return",r.data.blob);case 4:case"end":return n.stop()}},null,t)})}},{key:"getTokenBlob",value:function(e,t){var r=this;return p.default.callAsync(this.getTokenBlob,function(){var n;return regeneratorRuntime.async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,regeneratorRuntime.awrap(r._client.getTokenBlob(e,t));case 2:return n=a.sent,a.abrupt("return",n.data.blob);case 4:case"end":return a.stop()}},null,r)})}},{key:"signTokenRequestState",value:function(e,t){var r=this;return p.default.callAsync(this.signTokenRequestState,function(){var n;return regeneratorRuntime.async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,regeneratorRuntime.awrap(r._client.signTokenRequestState(e,t));case 2:return n=a.sent,a.abrupt("return",n.data.signature);case 4:case"end":return a.stop()}},null,r)})}},{key:"deleteMember",value:function(){var e=this;return p.default.callAsync(this.deleteMember,function(){return regeneratorRuntime.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(e._client.deleteMember());case 2:case"end":return t.stop()}},null,e)})}},{key:"createTestBankAccount",value:function(e,t){var r=this;return p.default.callAsync(this.createTestBankAccount,function(){var n;return regeneratorRuntime.async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,regeneratorRuntime.awrap(r._client.createTestBankAccount(e,t));case 2:return n=a.sent,a.abrupt("return",n.data.bankAuthorization);case 4:case"end":return a.stop()}},null,r)})}},{key:"createTestBankAccountOauth",value:function(e,t){var r=this;return p.default.callAsync(this.createTestBankAccountOauth,function(){var n;return regeneratorRuntime.async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,regeneratorRuntime.awrap(r._client.createTestBankAccount(e,t));case 2:return n=a.sent,a.abrupt("return",n.data.authorization);case 4:case"end":return a.stop()}},null,r)})}},{key:"getTestBankNotification",value:function(e,t){var r=this;return p.default.callAsync(this.getTestBankNotification,function(){var n;return regeneratorRuntime.async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,regeneratorRuntime.awrap(r._client.getTestBankNotification(e,t));case 2:return n=a.sent,a.abrupt("return",n.data.notification);case 4:case"end":return a.stop()}},null,r)})}},{key:"getTestBankNotifications",value:function(e){var t=this;return p.default.callAsync(this.getTestBankNotifications,function(){var r;return regeneratorRuntime.async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,regeneratorRuntime.awrap(t._client.getTestBankNotifications(e));case 2:return r=n.sent,n.abrupt("return",r.data.notifications);case 4:case"end":return n.stop()}},null,t)})}},{key:"_getPreviousHash",value:function(){var e=this;return p.default.callAsync(this._getPreviousHash,function(){var t;return regeneratorRuntime.async(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,regeneratorRuntime.awrap(e._getMember());case 2:return t=r.sent,r.abrupt("return",t.lastHash);case 4:case"end":return r.stop()}},null,e)})}},{key:"_getMember",value:function(){var e=this;return p.default.callAsync(this._getMember,function(){var t;return regeneratorRuntime.async(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,regeneratorRuntime.awrap(e._unauthenticatedClient.getMember(e._id));case 2:return t=r.sent,r.abrupt("return",t.data.member);case 4:case"end":return r.stop()}},null,e)})}},{key:"_resolveToken",value:function(e){var t=this;return new Promise(function(r,n){"string"==typeof e||e instanceof String?t.getToken(e).then(function(e){return r(e)}):r(e)})}}]),e}();t.default=m},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(5),s=n(u),c=r(11),f=n(c),l=r(40),h=n(l),p=r(42),d=n(p),y=r(41),v=n(y),g=r(43),m=n(g),w=r(44),b=n(w),k=r(45),_=n(k),A=r(13),x=r(6),R=r(46),E=r(68),I=function(){function e(t,r,n,i,o,u,s){if(a(this,e),!v.default.urls[t]&&!s)throw new Error("Invalid environment string. Please use one of: "+JSON.stringify(v.default.urls));this._instance=R.create({baseURL:s||v.default.urls[t]}),u&&f.default.setUpHttpErrorLogging(this._instance),this._memberId=r,this._cryptoEngine=n,this._context=new d.default,this._authHeader=new h.default(s||v.default.urls[t],this),this._developerKey=i,this._resetRequestInterceptor();var c=new m.default(o);this._instance.interceptors.response.use(null,function(e){throw c.handleError(e)})}return o(e,[{key:"getSigner",value:function(e){return regeneratorRuntime.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(e!==v.default.KeyLevel.LOW){t.next=4;break}return t.next=3,regeneratorRuntime.awrap(this._cryptoEngine.createSigner(v.default.KeyLevel.LOW));case 3:return t.abrupt("return",t.sent);case 4:if(e!==v.default.KeyLevel.STANDARD){t.next=16;break}return t.prev=5,t.next=8,regeneratorRuntime.awrap(this._cryptoEngine.createSigner(v.default.KeyLevel.STANDARD));case 8:return t.abrupt("return",t.sent);case 11:return t.prev=11,t.t0=t.catch(5),t.next=15,regeneratorRuntime.awrap(this._cryptoEngine.createSigner(v.default.KeyLevel.LOW));case 15:return t.abrupt("return",t.sent);case 16:if(e!==v.default.KeyLevel.PRIVILEGED){t.next=36;break}return t.prev=17,t.next=20,regeneratorRuntime.awrap(this._cryptoEngine.createSigner(v.default.KeyLevel.PRIVILEGED));case 20:return t.abrupt("return",t.sent);case 23:return t.prev=23,t.t1=t.catch(17),t.prev=25,t.next=28,regeneratorRuntime.awrap(this._cryptoEngine.createSigner(v.default.KeyLevel.STANDARD));case 28:return t.abrupt("return",t.sent);case 31:return t.prev=31,t.t2=t.catch(25),t.next=35,regeneratorRuntime.awrap(this._cryptoEngine.createSigner(v.default.KeyLevel.LOW));case 35:return t.abrupt("return",t.sent);case 36:case"end":return t.stop()}},null,this,[[5,11],[17,23],[25,31]])}},{key:"_resetRequestInterceptor",value:function(){var e=this;this._instance.interceptors.request.eject(this._interceptor);var t=new _.default,r=new b.default(this._developerKey);this._interceptor=this._instance.interceptors.request.use(function(n){return regeneratorRuntime.async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,regeneratorRuntime.awrap(e._authHeader.addAuthorizationHeader(e._memberId,n,e._context));case 2:return t.addVersionHeader(n),r.addDeveloperHeader(n),a.abrupt("return",n);case 5:case"end":return a.stop()}},null,e)})}},{key:"useAccessToken",value:function(e){this._context.onBehalfOf=e,this._resetRequestInterceptor()}},{key:"useKeyLevel",value:function(e){this._context.keyLevel=e,this._resetRequestInterceptor()}},{key:"clearAccessToken",value:function(){this._context.onBehalfOf=void 0,this._resetRequestInterceptor()}},{key:"setCustomerInitiated",value:function(){this._context.customerInitiated=!0}},{key:"subscribeToNotifications",value:function(e,t){var r,n;return regeneratorRuntime.async(function(a){for(;;)switch(a.prev=a.next){case 0:return r={handler:e,handlerInstructions:t},n={method:"post",url:"/subscribers",data:r},a.abrupt("return",this._instance(n));case 3:case"end":return a.stop()}},null,this)}},{key:"getSubscribers",value:function(){var e;return regeneratorRuntime.async(function(t){for(;;)switch(t.prev=t.next){case 0:return e={method:"get",url:"/subscribers"},t.abrupt("return",this._instance(e));case 2:case"end":return t.stop()}},null,this)}},{key:"getSubscriber",value:function(e){var t;return regeneratorRuntime.async(function(r){for(;;)switch(r.prev=r.next){case 0:return t={method:"get",url:"/subscribers/"+e},r.abrupt("return",this._instance(t));case 2:case"end":return r.stop()}},null,this)}},{key:"getNotifications",value:function(e,t){var r;return regeneratorRuntime.async(function(n){for(;;)switch(n.prev=n.next){case 0:return r={method:"get",url:"/notifications?offset="+e+"&limit="+t},n.abrupt("return",this._instance(r));case 2:case"end":return n.stop()}},null,this)}},{key:"getNotification",value:function(e){var t;return regeneratorRuntime.async(function(r){for(;;)switch(r.prev=r.next){case 0:return t={method:"get",url:"/notifications/"+e},r.abrupt("return",this._instance(t));case 2:case"end":return r.stop()}},null,this)}},{key:"unsubscribeFromNotifications",value:function(e){var t;return regeneratorRuntime.async(function(r){for(;;)switch(r.prev=r.next){case 0:return t={method:"delete",url:"/subscribers/"+e},r.abrupt("return",this._instance(t));case 2:case"end":return r.stop()}},null,this)}},{key:"triggerStepUpNotification",value:function(e){var t,r;return regeneratorRuntime.async(function(n){for(;;)switch(n.prev=n.next){case 0:return t={tokenStepUp:e},r={method:"post",url:"/notify/stepup",data:t},n.abrupt("return",this._instance(r));case 3:case"end":return n.stop()}},null,this)}},{key:"triggerBalanceStepUpNotification",value:function(e){var t,r;return regeneratorRuntime.async(function(n){for(;;)switch(n.prev=n.next){case 0:return t={balanceStepUp:{accountId:e}},r={method:"post",url:"/notify/stepup",data:t},n.abrupt("return",this._instance(r));case 3:case"end":return n.stop()}},null,this)}},{key:"triggerTransactionStepUpNotification",value:function(e,t){var r,n;return regeneratorRuntime.async(function(a){for(;;)switch(a.prev=a.next){case 0:return r={transactionStepUp:{accountId:e,transactionId:t}},n={method:"post",url:"/notify/stepup",data:r},a.abrupt("return",this._instance(n));case 3:case"end":return a.stop()}},null,this)}},{key:"addAddress",value:function(e,t){var r,n,a;return regeneratorRuntime.async(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,regeneratorRuntime.awrap(this.getSigner(v.default.KeyLevel.LOW));case 2:return r=i.sent,i.t0=e,i.t1=t,i.t2=this._memberId,i.t3=r.getKeyId(),i.next=9,regeneratorRuntime.awrap(r.signJson(t));case 9:return i.t4=i.sent,i.t5={memberId:i.t2,keyId:i.t3,signature:i.t4},n={name:i.t0,address:i.t1,addressSignature:i.t5},a={method:"post",url:"/addresses",data:n},i.abrupt("return",this._instance(a));case 14:case"end":return i.stop()}},null,this)}},{key:"getAddress",value:function(e){var t;return regeneratorRuntime.async(function(r){for(;;)switch(r.prev=r.next){case 0:return t={method:"get",url:"/addresses/"+e},r.abrupt("return",this._instance(t));case 2:case"end":return r.stop()}},null,this)}},{key:"getAddresses",value:function(){var e;return regeneratorRuntime.async(function(t){for(;;)switch(t.prev=t.next){case 0:return e={method:"get",url:"/addresses"},t.abrupt("return",this._instance(e));case 2:case"end":return t.stop()}},null,this)}},{key:"deleteAddress",value:function(e){var t;return regeneratorRuntime.async(function(r){for(;;)switch(r.prev=r.next){case 0:return t={method:"delete",url:"/addresses/"+e},r.abrupt("return",this._instance(t));case 2:case"end":return r.stop()}},null,this)}},{key:"setProfile",value:function(e){var t,r;return regeneratorRuntime.async(function(n){for(;;)switch(n.prev=n.next){case 0:return t={profile:e},r={method:"put",url:"/profile",data:t},n.abrupt("return",this._instance(r));case 3:case"end":return n.stop()}},null,this)}},{key:"getProfile",value:function(e){var t;return regeneratorRuntime.async(function(r){for(;;)switch(r.prev=r.next){case 0:return t={method:"get",url:"/members/"+e+"/profile"},r.abrupt("return",this._instance(t));case 2:case"end":return r.stop()}},null,this)}},{key:"setProfilePicture",value:function(e,t){var r,n;return regeneratorRuntime.async(function(a){for(;;)switch(a.prev=a.next){case 0:return r={payload:{ownerId:this._memberId,type:e,name:"profile",data:A.fromByteArray(t),accessMode:"PUBLIC"}},n={method:"put",url:"/profilepicture",data:r},a.abrupt("return",this._instance(n));case 3:case"end":return a.stop()}},null,this)}},{key:"getProfilePicture",value:function(e,t){var r;return regeneratorRuntime.async(function(n){for(;;)switch(n.prev=n.next){case 0:return r={method:"get",url:"/members/"+e+"/profilepicture/"+t},n.abrupt("return",this._instance(r));case 2:case"end":return n.stop()}},null,this)}},{key:"setReceiptContact",value:function(e){var t,r;return regeneratorRuntime.async(function(n){for(;;)switch(n.prev=n.next){case 0:return t={contact:e},r={method:"put",url:"/receipt-contact",data:t},n.abrupt("return",this._instance(r));case 3:case"end":return n.stop()}},null,this)}},{key:"getReceiptContact",value:function(){var e;return regeneratorRuntime.async(function(t){for(;;)switch(t.prev=t.next){case 0:return e={method:"get",url:"/receipt-contact"},t.abrupt("return",this._instance(e));case 2:case"end":return t.stop()}},null,this)}},{key:"linkAccounts",value:function(e){var t,r;return regeneratorRuntime.async(function(n){for(;;)switch(n.prev=n.next){case 0:return t={bankAuthorization:e},r={method:"post",url:"/accounts",data:t},n.abrupt("return",this._instance(r));case 3:case"end":return n.stop()}},null,this)}},{key:"linkAccountsOauth",value:function(e){var t,r;return regeneratorRuntime.async(function(n){for(;;)switch(n.prev=n.next){case 0:return t={authorization:e},r={method:"post",url:"/bank-accounts",data:t},n.abrupt("return",this._instance(r));case 3:case"end":return n.stop()}},null,this)}},{key:"unlinkAccounts",value:function(e){var t,r;return regeneratorRuntime.async(function(n){for(;;)switch(n.prev=n.next){case 0:return t={accountIds:e},r={method:"delete",url:"/accounts",data:t},n.abrupt("return",this._instance(r));case 3:case"end":return n.stop()}},null,this)}},{key:"getAccounts",value:function(){var e;return regeneratorRuntime.async(function(t){for(;;)switch(t.prev=t.next){case 0:return e={method:"get",url:"/accounts"},t.abrupt("return",this._instance(e));case 2:case"end":return t.stop()}},null,this)}},{key:"getAccount",value:function(e){var t;return regeneratorRuntime.async(function(r){for(;;)switch(r.prev=r.next){case 0:return t={method:"get",url:"/accounts/"+e},r.abrupt("return",this._instance(t));case 2:case"end":return r.stop()}},null,this)}},{key:"getDefaultAccount",value:function(){var e;return regeneratorRuntime.async(function(t){for(;;)switch(t.prev=t.next){case 0:return e={method:"get",url:"/members/"+this._memberId+"/default-account"},t.abrupt("return",this._instance(e));case 2:case"end":return t.stop()}},null,this)}},{key:"setDefaultAccount",value:function(e){var t,r;return regeneratorRuntime.async(function(n){for(;;)switch(n.prev=n.next){case 0:return t={accountId:e},r={method:"put",url:"/members/"+this._memberId+"/default-account",data:t},n.abrupt("return",this._instance(r));case 3:case"end":return n.stop()}},null,this)}},{key:"setAccountName",value:function(e,t){var r;return regeneratorRuntime.async(function(n){for(;;)switch(n.prev=n.next){case 0:return r={method:"patch",url:"/accounts/"+e+"?name="+t},n.abrupt("return",this._instance(r));case 2:case"end":return n.stop()}},null,this)}},{key:"getBalance",value:function(e,t){var r;return regeneratorRuntime.async(function(n){for(;;)switch(n.prev=n.next){case 0:return this.useKeyLevel(t),r={method:"get",url:"/accounts/"+e+"/balance"},n.abrupt("return",this._instance(r));case 3:case"end":return n.stop()}},null,this)}},{key:"getBalances",value:function(e,t){var r,n;return regeneratorRuntime.async(function(a){for(;;)switch(a.prev=a.next){case 0:return this.useKeyLevel(t),r="/accounts/balance?"+e.map(function(e){return"account_id="+e}).join("&"),n={method:"get",url:r},a.abrupt("return",this._instance(n));case 4:case"end":return a.stop()}},null,this)}},{key:"getTransaction",value:function(e,t,r){var n;return regeneratorRuntime.async(function(a){for(;;)switch(a.prev=a.next){case 0:return this.useKeyLevel(r),n={method:"get",url:"/accounts/"+e+"/transaction/"+t},a.abrupt("return",this._instance(n));case 3:case"end":return a.stop()}},null,this)}},{key:"getTransactions",value:function(e,t,r,n){var a;return regeneratorRuntime.async(function(i){for(;;)switch(i.prev=i.next){case 0:return this.useKeyLevel(n),a={method:"get",url:"/accounts/"+e+"/transactions?offset="+t+"&limit="+r},i.abrupt("return",this._instance(a));case 3:case"end":return i.stop()}},null,this)}},{key:"createBlob",value:function(e,t,r,n){var a,i;return regeneratorRuntime.async(function(o){for(;;)switch(o.prev=o.next){case 0:return a={payload:{ownerId:e,type:t,name:r,data:A.fromByteArray(n)}},i={method:"post",url:"/blobs",data:a},o.abrupt("return",this._instance(i));case 3:case"end":return o.stop()}},null,this)}},{key:"getTokenBlob",value:function(e,t){var r;return regeneratorRuntime.async(function(n){for(;;)switch(n.prev=n.next){case 0:return r={method:"get",url:"tokens/"+e+"/blobs/"+t},n.abrupt("return",this._instance(r));case 2:case"end":return n.stop()}},null,this)}},{key:"getBlob",value:function(e){var t;return regeneratorRuntime.async(function(r){for(;;)switch(r.prev=r.next){case 0:return t={method:"get",url:"/blobs/"+e},r.abrupt("return",this._instance(t));case 2:case"end":return r.stop()}},null,this)}},{key:"getBankInfo",value:function(e){var t;return regeneratorRuntime.async(function(r){for(;;)switch(r.prev=r.next){case 0:return t={method:"get",url:"/banks/"+e+"/info"},r.abrupt("return",this._instance(t));case 2:case"end":return r.stop()}},null,this)}},{key:"storeTokenRequest",value:function(e){var t;return regeneratorRuntime.async(function(r){for(;;)switch(r.prev=r.next){case 0:return t={method:"post",url:"/token-requests",data:e},r.abrupt("return",this._instance(t));case 2:case"end":return r.stop()}},null,this)}},{key:"createTransferToken",value:function(e,t){var r;return regeneratorRuntime.async(function(n){for(;;)switch(n.prev=n.next){case 0:return r={method:"post",url:"/tokens?type=transfer",data:{payload:e,tokenRequestId:t}},n.abrupt("return",this._instance(r));case 2:case"end":return n.stop()}},null,this)}},{key:"createAccessToken",value:function(e,t){var r;return regeneratorRuntime.async(function(n){for(;;)switch(n.prev=n.next){case 0:return r={method:"post",url:"/tokens?type=access",data:{payload:e,tokenRequestId:t}},n.abrupt("return",this._instance(r));case 2:case"end":return n.stop()}},null,this)}},{key:"replaceToken",value:function(e,t){var r,n,a,i;return regeneratorRuntime.async(function(o){for(;;)switch(o.prev=o.next){case 0:return r=e.id,o.next=3,regeneratorRuntime.awrap(this._tokenOperationRequest(e,"cancelled"));case 3:return n=o.sent,a={payload:{from:{id:this._memberId},to:e.payload.to,access:{resources:t},issuer:e.payload.issuer,version:v.default.accessTokenVersion,refId:f.default.generateNonce()}},i={method:"post",url:"/tokens/"+r+"/replace",data:{cancel_token:n,create_token:a}},o.abrupt("return",this._instance(i));case 7:case"end":return o.stop()}},null,this)}},{key:"replaceAndEndorseToken",value:function(e,t){var r,n,a,i,o;return regeneratorRuntime.async(function(u){for(;;)switch(u.prev=u.next){case 0:return r=e.id,u.next=3,regeneratorRuntime.awrap(this._tokenOperationRequest(e,"cancelled"));case 3:return n=u.sent,a={from:{id:this._memberId},to:e.payload.to,access:{resources:t},issuer:e.payload.issuer,version:v.default.accessTokenVersion,refId:f.default.generateNonce()},u.t0=a,u.next=8,regeneratorRuntime.awrap(this._tokenOperationSignature(a,"endorsed"));case 8:return u.t1=u.sent,i={payload:u.t0,payload_signature:u.t1},o={method:"post",url:"/tokens/"+r+"/replace",data:{cancel_token:n,create_token:i}},u.abrupt("return",this._instance(o));case 12:case"end":return u.stop()}},null,this)}},{key:"endorseToken",value:function(e){return regeneratorRuntime.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this._tokenOperation(e,"endorse","endorsed"));case 1:case"end":return t.stop()}},null,this)}},{key:"cancelToken",value:function(e,t){return regeneratorRuntime.async(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",this._tokenOperation(e,"cancel","cancelled",t));case 1:case"end":return r.stop()}},null,this)}},{key:"redeemToken",value:function(e,t,r,n,a,i){var o,u,s,c;return regeneratorRuntime.async(function(l){for(;;)switch(l.prev=l.next){case 0:return i||(i=f.default.generateNonce()),o={refId:i,tokenId:e.id,amount:{value:t.toString(),currency:r}},n&&(o.description=n),void 0!==a&&a.length>0&&(o.destinations=a),l.next=6,regeneratorRuntime.awrap(this.getSigner(v.default.KeyLevel.LOW));case 6:return u=l.sent,l.t0=o,l.t1=this._memberId,l.t2=u.getKeyId(),l.next=12,regeneratorRuntime.awrap(u.signJson(o));case 12:return l.t3=l.sent,l.t4={memberId:l.t1,keyId:l.t2,signature:l.t3},s={payload:l.t0,payloadSignature:l.t4},c={method:"post",url:"/transfers",data:s},l.abrupt("return",this._instance(c));case 17:case"end":return l.stop()}},null,this)}},{key:"getToken",value:function(e){var t;return regeneratorRuntime.async(function(r){for(;;)switch(r.prev=r.next){case 0:return t={method:"get",url:"/tokens/"+e},r.abrupt("return",this._instance(t));case 2:case"end":return r.stop()}},null,this)}},{key:"getActiveAccessToken",value:function(e){var t;return regeneratorRuntime.async(function(r){for(;;)switch(r.prev=r.next){case 0:return t={method:"get",url:"/tokens/active-access-token/"+e},r.abrupt("return",this._instance(t));case 2:case"end":return r.stop()}},null,this);
}},{key:"getTokens",value:function(e,t,r){var n;return regeneratorRuntime.async(function(a){for(;;)switch(a.prev=a.next){case 0:return n={method:"get",url:"/tokens?type="+e+"&offset="+t+"&limit="+r},a.abrupt("return",this._instance(n));case 2:case"end":return a.stop()}},null,this)}},{key:"_tokenOperation",value:function(e,t,r,n){var a,i;return regeneratorRuntime.async(function(o){for(;;)switch(o.prev=o.next){case 0:return a=e.id,o.t0="/tokens/"+a+"/"+t,o.next=4,regeneratorRuntime.awrap(this._tokenOperationRequest(e,r));case 4:return o.t1=o.sent,i={method:"put",url:o.t0,data:o.t1},n&&(i.adapter=E),o.abrupt("return",this._instance(i));case 8:case"end":return o.stop()}},null,this)}},{key:"_tokenOperationRequest",value:function(e,t){return regeneratorRuntime.async(function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=e.id,r.next=3,regeneratorRuntime.awrap(this._tokenOperationSignature(e.payload,t));case 3:return r.t1=r.sent,r.abrupt("return",{tokenId:r.t0,signature:r.t1});case 5:case"end":return r.stop()}},null,this)}},{key:"_tokenOperationSignature",value:function(e,t){var r,n;return regeneratorRuntime.async(function(a){for(;;)switch(a.prev=a.next){case 0:return r=x(e)+("."+t),a.next=3,regeneratorRuntime.awrap(this.getSigner(v.default.KeyLevel.STANDARD));case 3:return n=a.sent,a.t0=this._memberId,a.t1=n.getKeyId(),a.next=8,regeneratorRuntime.awrap(n.sign(r));case 8:return a.t2=a.sent,a.abrupt("return",{memberId:a.t0,keyId:a.t1,signature:a.t2});case 10:case"end":return a.stop()}},null,this)}},{key:"getTransfer",value:function(e){var t;return regeneratorRuntime.async(function(r){for(;;)switch(r.prev=r.next){case 0:return t={method:"get",url:"/transfers/"+e},r.abrupt("return",this._instance(t));case 2:case"end":return r.stop()}},null,this)}},{key:"getTransfers",value:function(e,t,r){var n;return regeneratorRuntime.async(function(a){for(;;)switch(a.prev=a.next){case 0:return n={method:"get",url:"/transfers?tokenId="+e+"&offset="+t+"&limit="+r},a.abrupt("return",this._instance(n));case 2:case"end":return a.stop()}},null,this)}},{key:"approveKey",value:function(e,t){var r;return regeneratorRuntime.async(function(n){for(;;)switch(n.prev=n.next){case 0:return r={memberId:this._memberId,operations:[{addKey:{key:i({id:t.id,publicKey:s.default.strKey(t.publicKey),level:t.level,algorithm:t.algorithm},t.expiresAtMs&&{expiresAtMs:t.expiresAtMs.toString()})}}]},n.abrupt("return",this._memberUpdate(r,e));case 2:case"end":return n.stop()}},null,this)}},{key:"approveKeys",value:function(e,t){var r;return regeneratorRuntime.async(function(n){for(;;)switch(n.prev=n.next){case 0:return r={memberId:this._memberId,operations:t.map(function(e){return{addKey:{key:i({id:e.id,publicKey:s.default.strKey(e.publicKey),level:e.level,algorithm:e.algorithm},e.expiresAtMs&&{expiresAtMs:e.expiresAtMs.toString()})}}})},n.abrupt("return",this._memberUpdate(r,e));case 2:case"end":return n.stop()}},null,this)}},{key:"removeKey",value:function(e,t){var r;return regeneratorRuntime.async(function(n){for(;;)switch(n.prev=n.next){case 0:return r={memberId:this._memberId,operations:[{removeKey:{keyId:t}}]},n.abrupt("return",this._memberUpdate(r,e));case 2:case"end":return n.stop()}},null,this)}},{key:"removeKeys",value:function(e,t){var r;return regeneratorRuntime.async(function(n){for(;;)switch(n.prev=n.next){case 0:return r={memberId:this._memberId,operations:t.map(function(e){return{removeKey:{keyId:e}}})},n.abrupt("return",this._memberUpdate(r,e));case 2:case"end":return n.stop()}},null,this)}},{key:"addAlias",value:function(e,t,r){return regeneratorRuntime.async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",this.addAliases(e,[t],r));case 1:case"end":return n.stop()}},null,this)}},{key:"getAliases",value:function(){var e;return regeneratorRuntime.async(function(t){for(;;)switch(t.prev=t.next){case 0:return e={method:"get",url:"/aliases"},t.abrupt("return",this._instance(e));case 2:case"end":return t.stop()}},null,this)}},{key:"getDefaultRecoveryAgent",value:function(){var e;return regeneratorRuntime.async(function(t){for(;;)switch(t.prev=t.next){case 0:return e={method:"get",url:"/recovery/defaults/agent"},t.abrupt("return",this._instance(e));case 2:case"end":return t.stop()}},null,this)}},{key:"addRecoveryRule",value:function(e,t){var r;return regeneratorRuntime.async(function(n){for(;;)switch(n.prev=n.next){case 0:return r={memberId:this._memberId,operations:[{recoveryRules:t}]},n.abrupt("return",this._memberUpdate(r,e));case 2:case"end":return n.stop()}},null,this)}},{key:"addAliases",value:function(e,t,r){var n,a;return regeneratorRuntime.async(function(i){for(;;)switch(i.prev=i.next){case 0:return n={memberId:this._memberId,operations:t.map(function(e){return{addAlias:{aliasHash:f.default.hashAndSerializeAlias(e),realm:r}}})},a=t.map(function(e){return{addAliasMetadata:{aliasHash:f.default.hashAndSerializeAlias(e),alias:e,realm:r}}}),i.abrupt("return",this._memberUpdate(n,e,a));case 3:case"end":return i.stop()}},null,this)}},{key:"removeAlias",value:function(e,t){return regeneratorRuntime.async(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",this.removeAliases(e,[t]));case 1:case"end":return r.stop()}},null,this)}},{key:"removeAliases",value:function(e,t){var r;return regeneratorRuntime.async(function(n){for(;;)switch(n.prev=n.next){case 0:return r={memberId:this._memberId,operations:t.map(function(e){return{removeAlias:{aliasHash:f.default.hashAndSerializeAlias(e)}}})},n.abrupt("return",this._memberUpdate(r,e));case 2:case"end":return n.stop()}},null,this)}},{key:"_memberUpdate",value:function(e,t,r){var n,a,i;return regeneratorRuntime.async(function(o){for(;;)switch(o.prev=o.next){case 0:return""!==t&&(e.prevHash=t),"undefined"==typeof r&&(r=[]),o.next=4,regeneratorRuntime.awrap(this.getSigner(v.default.KeyLevel.PRIVILEGED));case 4:return n=o.sent,o.t0=e,o.t1=this._memberId,o.t2=n.getKeyId(),o.next=10,regeneratorRuntime.awrap(n.signJson(e));case 10:return o.t3=o.sent,o.t4={memberId:o.t1,keyId:o.t2,signature:o.t3},o.t5=r,a={update:o.t0,updateSignature:o.t4,metadata:o.t5},i={method:"post",url:"/members/"+this._memberId+"/updates",data:a},o.abrupt("return",this._instance(i));case 16:case"end":return o.stop()}},null,this)}},{key:"signTokenRequestState",value:function(e,t){var r,n;return regeneratorRuntime.async(function(a){for(;;)switch(a.prev=a.next){case 0:return r={payload:{tokenId:e,state:t}},n={method:"put",url:"/sign-token-request-state",data:r},a.abrupt("return",this._instance(n));case 3:case"end":return a.stop()}},null,this)}},{key:"deleteMember",value:function(){var e;return regeneratorRuntime.async(function(t){for(;;)switch(t.prev=t.next){case 0:return this.useKeyLevel(v.default.KeyLevel.PRIVILEGED),e={method:"delete",url:"/members"},t.abrupt("return",this._instance(e));case 3:case"end":return t.stop()}},null,this)}},{key:"createTestBankAccount",value:function(e,t){var r,n;return regeneratorRuntime.async(function(a){for(;;)switch(a.prev=a.next){case 0:return r={balance:{currency:t,value:e}},n={method:"post",url:"/test/create-account",data:r},a.abrupt("return",this._instance(n));case 3:case"end":return a.stop()}},null,this)}},{key:"getTestBankNotification",value:function(e,t){var r;return regeneratorRuntime.async(function(n){for(;;)switch(n.prev=n.next){case 0:return r={method:"get",url:"/test/subscribers/"+e+"/notifications/"+t},n.abrupt("return",this._instance(r));case 2:case"end":return n.stop()}},null,this)}},{key:"getTestBankNotifications",value:function(e){var t;return regeneratorRuntime.async(function(r){for(;;)switch(r.prev=r.next){case 0:return t={method:"get",url:"/test/subscribers/"+e+"/notifications"},r.abrupt("return",this._instance(t));case 2:case"end":return r.stop()}},null,this)}}]),e}();t.default=I},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(41),u=n(o),s=r(6),c=function(){function e(t,r){a(this,e),this._baseUrl=t,this._client=r}return i(e,[{key:"addAuthorizationHeader",value:function(t,r,n){var a,i,o,c,f,l;return regeneratorRuntime.async(function(h){for(;;)switch(h.prev=h.next){case 0:return a=(new Date).getTime(),i=r.url.replace(this._baseUrl,""),i="/"===i.substring(0,1)?i:i+"/",i="/"===i.substring(i.length-1)?i.substring(0,i.length-1):i,i.indexOf("?")>=0&&(i=i.substring(0,i.indexOf("?"))),o={method:r.method.toUpperCase(),uriHost:this._baseUrl.replace("http://","").replace("https://",""),uriPath:i,createdAtMs:a.toString()},void 0!==r.data&&""!==r.data&&(o.requestBody=s(r.data)),r.url.indexOf("?")!==-1&&(o.queryString=r.url.substring(r.url.indexOf("?")+1)),h.next=10,regeneratorRuntime.awrap(this._client.getSigner(e._keyLevel(n)));case 10:return c=h.sent,h.next=13,regeneratorRuntime.awrap(c.signJson(o));case 13:f=h.sent,l=u.default.signatureScheme+" member-id="+t+",key-id="+c.getKeyId()+",signature="+f+",created-at-ms="+a+e._onBehalfOfHeader(n)+e._customerInitiated(n),r.headers={Authorization:l};case 16:case"end":return h.stop()}},null,this)}}],[{key:"_onBehalfOfHeader",value:function(e){return void 0!==e&&void 0!==e.onBehalfOf&&""!==e.onBehalfOf?",on-behalf-of="+e.onBehalfOf:""}},{key:"_keyLevel",value:function(e){if(void 0!==e){var t=e.keyLevel;return e.keyLevel=u.default.KeyLevel.LOW,t}return u.default.KeyLevel.LOW}},{key:"_customerInitiated",value:function(e){return e&&e.customerInitiated?(e.customerInitiated=!1,",customer-initiated=true"):""}}]),e}();t.default=c},function(e,t){e.exports={signatureScheme:"Token-Ed25519-SHA512",urls:{local:"http://localhost:8000",dev:"https://api.dev.token.io",stg:"https://api.stg.token.io",sandbox:"https://api.sandbox.token.io",int:"https://api.int.token.io",prd:"https://api.token.io"},webAppUrls:{local:"http://localhost:5000",dev:"https://web-app.dev.token.io",stg:"https://web-app.stg.token.io",sandbox:"https://web-app.sandbox.token.io",int:"https://web-app.int.token.io",prd:"https://web-app.token.io"},transferTokenVersion:"1.0",accessTokenVersion:"1.0",defaultCurrency:"EUR",decimalPrecision:4,corsDomainSuffix:".token.io",KeyLevel:{PRIVILEGED:"PRIVILEGED",STANDARD:"STANDARD",LOW:"LOW"},lowKeyExpiration:12096e5,devKey:{local:"f3982819-5d8d-4123-9601-886df2780f42",dev:"f3982819-5d8d-4123-9601-886df2780f42",stg:"f3982819-5d8d-4123-9601-886df2780f42",sandbox:"f3982819-5d8d-4123-9601-886df2780f42",int:"f3982819-5d8d-4123-9601-886df2780f42",prd:"f3982819-5d8d-4123-9601-886df2780f42"}}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(41),u=n(o),s=function(){function e(){a(this,e),this._onBehalfOf=void 0,this._keyLevel=u.default.KeyLevel.LOW,this._customerInitiated=!1}return i(e,[{key:"onBehalfOf",set:function(e){this._onBehalfOf=e},get:function(){return this._onBehalfOf}},{key:"keyLevel",set:function(e){this._keyLevel=void 0===e?u.default.KeyLevel.LOW:e},get:function(){return this._keyLevel}},{key:"customerInitiated",set:function(e){this._customerInitiated=e},get:function(){return this._customerInitiated}}]),e}();t.default=s},function(e,t){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function(){function e(t){r(this,e),this._globalRpcErrorCallback=t}return n(e,[{key:"handleError",value:function(e){if(e.response&&e.response.headers){var t=e.response.headers["token-error"],r=e.response.headers["token-error-details"];if(r&&console.log("Error details: ",r),this._globalRpcErrorCallback){var n=t?t:"UNKNOWN",a={name:n,message:e.response.data};return this._globalRpcErrorCallback(a),a}}return e}}]),e}();t.default=a},function(e,t){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";r(this,e),this._developerKey=t}return n(e,[{key:"addDeveloperHeader",value:function(e){if(""===this._developerKey)throw new ReferenceError("Please provide a developer key. Contact Token for more details.");e.headers["token-dev-key"]=this._developerKey}}]),e}();t.default=a},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=function(){function e(){n(this,e)}return a(e,[{key:"addVersionHeader",value:function(e){e.headers["token-sdk"]="js",e.headers["token-sdk-version"]="1.5.19"}}]),e}();t.default=i},function(e,t,r){e.exports=r(47)},function(e,t,r){"use strict";function n(e){var t=new o(e),r=i(o.prototype.request,t);return a.extend(r,o.prototype,t),a.extend(r,t),r}var a=r(48),i=r(49),o=r(50),u=n();u.Axios=o,u.create=function(e){return n(e)},u.all=function(e){return Promise.all(e)},u.spread=r(67),e.exports=u,e.exports.default=u},function(e,t,r){"use strict";function n(e){return"[object Array]"===A.call(e)}function a(e){return"[object ArrayBuffer]"===A.call(e)}function i(e){return"undefined"!=typeof FormData&&e instanceof FormData}function o(e){var t;return t="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer}function u(e){return"string"==typeof e}function s(e){return"number"==typeof e}function c(e){return"undefined"==typeof e}function f(e){return null!==e&&"object"==typeof e}function l(e){return"[object Date]"===A.call(e)}function h(e){return"[object File]"===A.call(e)}function p(e){return"[object Blob]"===A.call(e)}function d(e){return"[object Function]"===A.call(e)}function y(e){return f(e)&&d(e.pipe)}function v(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams}function g(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}function m(){return"undefined"!=typeof window&&"undefined"!=typeof document&&"function"==typeof document.createElement}function w(e,t){if(null!==e&&"undefined"!=typeof e)if("object"==typeof e||n(e)||(e=[e]),n(e))for(var r=0,a=e.length;r<a;r++)t.call(null,e[r],r,e);else for(var i in e)e.hasOwnProperty(i)&&t.call(null,e[i],i,e)}function b(){function e(e,r){"object"==typeof t[r]&&"object"==typeof e?t[r]=b(t[r],e):t[r]=e}for(var t={},r=0,n=arguments.length;r<n;r++)w(arguments[r],e);return t}function k(e,t,r){return w(t,function(t,n){r&&"function"==typeof t?e[n]=_(t,r):e[n]=t}),e}var _=r(49),A=Object.prototype.toString;e.exports={isArray:n,isArrayBuffer:a,isFormData:i,isArrayBufferView:o,isString:u,isNumber:s,isObject:f,isUndefined:c,isDate:l,isFile:h,isBlob:p,isFunction:d,isStream:y,isURLSearchParams:v,isStandardBrowserEnv:m,forEach:w,merge:b,extend:k,trim:g}},function(e,t){"use strict";e.exports=function(e,t){return function(){for(var r=new Array(arguments.length),n=0;n<r.length;n++)r[n]=arguments[n];return e.apply(t,r)}}},function(e,t,r){"use strict";function n(e){this.defaults=i.merge(a,e),this.interceptors={request:new o,response:new o}}var a=r(51),i=r(48),o=r(53),u=r(54),s=r(65),c=r(66);n.prototype.request=function(e){"string"==typeof e&&(e=i.merge({url:arguments[0]},arguments[1])),e=i.merge(a,this.defaults,{method:"get"},e),e.baseURL&&!s(e.url)&&(e.url=c(e.baseURL,e.url));var t=[u,void 0],r=Promise.resolve(e);for(this.interceptors.request.forEach(function(e){t.unshift(e.fulfilled,e.rejected)}),this.interceptors.response.forEach(function(e){t.push(e.fulfilled,e.rejected)});t.length;)r=r.then(t.shift(),t.shift());return r},i.forEach(["delete","get","head"],function(e){n.prototype[e]=function(t,r){return this.request(i.merge(r||{},{method:e,url:t}))}}),i.forEach(["post","put","patch"],function(e){n.prototype[e]=function(t,r,n){return this.request(i.merge(n||{},{method:e,url:t,data:r}))}}),e.exports=n},function(e,t,r){"use strict";function n(e,t){!a.isUndefined(e)&&a.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var a=r(48),i=r(52),o=/^\)\]\}',?\n/,u={"Content-Type":"application/x-www-form-urlencoded"};e.exports={transformRequest:[function(e,t){return i(t,"Content-Type"),a.isFormData(e)||a.isArrayBuffer(e)||a.isStream(e)||a.isFile(e)||a.isBlob(e)?e:a.isArrayBufferView(e)?e.buffer:a.isURLSearchParams(e)?(n(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):a.isObject(e)?(n(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e){e=e.replace(o,"");try{e=JSON.parse(e)}catch(e){}}return e}],headers:{common:{Accept:"application/json, text/plain, */*"},patch:a.merge(u),post:a.merge(u),put:a.merge(u)},timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return e>=200&&e<300}}},function(e,t,r){"use strict";var n=r(48);e.exports=function(e,t){n.forEach(e,function(r,n){n!==t&&n.toUpperCase()===t.toUpperCase()&&(e[t]=r,delete e[n])})}},function(e,t,r){"use strict";function n(){this.handlers=[]}var a=r(48);n.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},n.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},n.prototype.forEach=function(e){a.forEach(this.handlers,function(t){null!==t&&e(t)})},e.exports=n},function(e,t,r){(function(t){"use strict";var n=r(48),a=r(55);e.exports=function(e){e.headers=e.headers||{},e.data=a(e.data,e.headers,e.transformRequest),e.headers=n.merge(e.headers.common||{},e.headers[e.method]||{},e.headers||{}),n.forEach(["delete","get","head","post","put","patch","common"],function(t){delete e.headers[t]});var i;return"function"==typeof e.adapter?i=e.adapter:"undefined"!=typeof XMLHttpRequest?i=r(56):"undefined"!=typeof t&&(i=r(56)),Promise.resolve(e).then(i).then(function(t){return t.data=a(t.data,t.headers,e.transformResponse),t},function(t){return t&&t.response&&(t.response.data=a(t.response.data,t.response.headers,e.transformResponse)),Promise.reject(t)})}}).call(t,r(2))},function(e,t,r){"use strict";var n=r(48);e.exports=function(e,t,r){return n.forEach(r,function(r){e=r(e,t)}),e}},function(e,t,r){(function(t){"use strict";var n=r(48),a=r(57),i=r(60),o=r(61),u=r(62),s=r(58),c="undefined"!=typeof window&&window.btoa||r(63);e.exports=function(e){return new Promise(function(f,l){var h=e.data,p=e.headers;n.isFormData(h)&&delete p["Content-Type"];var d=new XMLHttpRequest,y="onreadystatechange",v=!1;if("test"===t.env.NODE_ENV||"undefined"==typeof window||!window.XDomainRequest||"withCredentials"in d||u(e.url)||(d=new window.XDomainRequest,y="onload",v=!0,d.onprogress=function(){},d.ontimeout=function(){}),e.auth){var g=e.auth.username||"",m=e.auth.password||"";p.Authorization="Basic "+c(g+":"+m)}if(d.open(e.method.toUpperCase(),i(e.url,e.params,e.paramsSerializer),!0),d.timeout=e.timeout,d[y]=function(){if(d&&(4===d.readyState||v)&&0!==d.status){var t="getAllResponseHeaders"in d?o(d.getAllResponseHeaders()):null,r=e.responseType&&"text"!==e.responseType?d.response:d.responseText,n={data:r,status:1223===d.status?204:d.status,statusText:1223===d.status?"No Content":d.statusText,headers:t,config:e,request:d};a(f,l,n),d=null}},d.onerror=function(){l(s("Network Error",e)),d=null},d.ontimeout=function(){l(s("timeout of "+e.timeout+"ms exceeded",e,"ECONNABORTED")),d=null},n.isStandardBrowserEnv()){var w=r(64),b=(e.withCredentials||u(e.url))&&e.xsrfCookieName?w.read(e.xsrfCookieName):void 0;b&&(p[e.xsrfHeaderName]=b)}if("setRequestHeader"in d&&n.forEach(p,function(e,t){"undefined"==typeof h&&"content-type"===t.toLowerCase()?delete p[t]:d.setRequestHeader(t,e)}),e.withCredentials&&(d.withCredentials=!0),e.responseType)try{d.responseType=e.responseType}catch(e){if("json"!==d.responseType)throw e}"function"==typeof e.onDownloadProgress&&d.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&d.upload&&d.upload.addEventListener("progress",e.onUploadProgress),void 0===h&&(h=null),d.send(h)})}}).call(t,r(2))},function(e,t,r){"use strict";var n=r(58);e.exports=function(e,t,r){var a=r.config.validateStatus;r.status&&a&&!a(r.status)?t(n("Request failed with status code "+r.status,r.config,null,r)):e(r)}},function(e,t,r){"use strict";var n=r(59);e.exports=function(e,t,r,a){var i=new Error(e);return n(i,t,r,a)}},function(e,t){"use strict";e.exports=function(e,t,r,n){return e.config=t,r&&(e.code=r),e.response=n,e}},function(e,t,r){"use strict";function n(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var a=r(48);e.exports=function(e,t,r){if(!t)return e;var i;if(r)i=r(t);else if(a.isURLSearchParams(t))i=t.toString();else{var o=[];a.forEach(t,function(e,t){null!==e&&"undefined"!=typeof e&&(a.isArray(e)&&(t+="[]"),a.isArray(e)||(e=[e]),a.forEach(e,function(e){a.isDate(e)?e=e.toISOString():a.isObject(e)&&(e=JSON.stringify(e)),o.push(n(t)+"="+n(e))}))}),i=o.join("&")}return i&&(e+=(e.indexOf("?")===-1?"?":"&")+i),e}},function(e,t,r){"use strict";var n=r(48);e.exports=function(e){var t,r,a,i={};return e?(n.forEach(e.split("\n"),function(e){a=e.indexOf(":"),t=n.trim(e.substr(0,a)).toLowerCase(),r=n.trim(e.substr(a+1)),t&&(i[t]=i[t]?i[t]+", "+r:r)}),i):i}},function(e,t,r){"use strict";var n=r(48);e.exports=n.isStandardBrowserEnv()?function(){function e(e){var t=e;return r&&(a.setAttribute("href",t),t=a.href),a.setAttribute("href",t),{href:a.href,protocol:a.protocol?a.protocol.replace(/:$/,""):"",host:a.host,search:a.search?a.search.replace(/^\?/,""):"",hash:a.hash?a.hash.replace(/^#/,""):"",hostname:a.hostname,port:a.port,pathname:"/"===a.pathname.charAt(0)?a.pathname:"/"+a.pathname}}var t,r=/(msie|trident)/i.test(navigator.userAgent),a=document.createElement("a");return t=e(window.location.href),function(r){var a=n.isString(r)?e(r):r;return a.protocol===t.protocol&&a.host===t.host}}():function(){return function(){return!0}}()},function(e,t){"use strict";function r(){this.message="String contains an invalid character"}function n(e){for(var t,n,i=String(e),o="",u=0,s=a;i.charAt(0|u)||(s="=",u%1);o+=s.charAt(63&t>>8-u%1*8)){if(n=i.charCodeAt(u+=.75),n>255)throw new r;t=t<<8|n}return o}var a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";r.prototype=new Error,r.prototype.code=5,r.prototype.name="InvalidCharacterError",e.exports=n},function(e,t,r){"use strict";var n=r(48);e.exports=n.isStandardBrowserEnv()?function(){return{write:function(e,t,r,a,i,o){var u=[];u.push(e+"="+encodeURIComponent(t)),n.isNumber(r)&&u.push("expires="+new Date(r).toGMTString()),n.isString(a)&&u.push("path="+a),n.isString(i)&&u.push("domain="+i),o===!0&&u.push("secure"),document.cookie=u.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()},function(e,t){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},function(e,t){"use strict";e.exports=function(e,t){return e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,"")}},function(e,t){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},function(e,t,r){(function(t){"use strict";var n=r(48),a=r(60),i=r(62),o="undefined"!=typeof window&&window.btoa||r(63);e.exports=function(e){if("undefined"==typeof XMLHttpRequest&&"undefined"!=typeof t)return new Promise(function(e){e({data:{dispatchRequest:function(){throw new Error("BlockingAdapter does not support node.js")}}})});var u=e.data,s=e.headers;n.isFormData(u)&&delete s["Content-Type"];var c=new XMLHttpRequest;if("undefined"==typeof window||!window.XDomainRequest||"withCredentials"in c||i(e.url)||(c=new window.XDomainRequest),e.auth){var f=e.auth.username||"",l=e.auth.password||"";s.Authorization="Basic "+o(f+":"+l)}if(c.open(e.method.toUpperCase(),a(e.url,e.params,e.paramsSerializer),!1),n.isStandardBrowserEnv()){var h=r(64),p=(e.withCredentials||i(e.url))&&e.xsrfCookieName?h.read(e.xsrfCookieName):void 0;p&&(s[e.xsrfHeaderName]=p)}if("setRequestHeader"in c&&n.forEach(s,function(e,t){"undefined"==typeof u&&"content-type"===t.toLowerCase()?delete s[t]:c.setRequestHeader(t,e)}),e.withCredentials&&(c.withCredentials=!0),e.responseType)try{c.responseType=e.responseType}catch(e){if("json"!==c.responseType)throw e}return void 0===u&&(u=null),new Promise(function(e){e({data:{dispatchRequest:function(){var e=c.send(u);return e}}})})}}).call(t,r(2))},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(41),s=n(u),c=r(5),f=n(c),l=r(43),h=n(l),p=r(44),d=n(p),y=r(45),v=n(y),g=r(11),m=n(g),w=r(46),b=function(){function e(t,r,n,i,o){if(a(this,e),!s.default.urls[t]&&!o)throw new Error("Invalid environment string. Please use one of: "+JSON.stringify(s.default.urls));this._instance=w.create({baseURL:o||s.default.urls[t]}),i&&m.default.setUpHttpErrorLogging(this._instance);var u=new v.default,c=new d.default(r);this._instance.interceptors.request.use(function(e){return u.addVersionHeader(e),c.addDeveloperHeader(e),e});var f=new h.default(n);this._instance.interceptors.response.use(null,function(e){throw f.handleError(e)})}return o(e,[{key:"createMemberId",value:function(e){void 0===e&&(e="PERSONAL");var t={memberType:e},r={method:"post",url:"/members",data:t};return this._instance(r)}},{key:"resolveAlias",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r={method:"get",url:"/resolve-alias?value="+e.value+"&type="+e.type+"&realm="+t};return this._instance(r)}},{key:"getMember",value:function(e){var t={method:"get",url:"/members/"+e};return this._instance(t)}},{key:"notify",value:function(e,t,r){var n={alias:e,body:t,realm:r},a={method:"post",url:"/notify",data:n};return this._instance(a)}},{key:"approveFirstKey",value:function(e,t,r){var n,a,o,u;return regeneratorRuntime.async(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,regeneratorRuntime.awrap(r.createSigner(s.default.KeyLevel.PRIVILEGED));case 2:return n=c.sent,a={memberId:e,operations:[{addKey:{key:i({id:t.id,publicKey:f.default.strKey(t.publicKey),level:t.level,algorithm:t.algorithm},t.expiresAtMs&&{expiresAtMs:t.expiresAtMs})}}]},c.t0=a,c.t1=e,c.t2=n.getKeyId(),c.next=9,regeneratorRuntime.awrap(n.signJson(a));case 9:return c.t3=c.sent,c.t4={memberId:c.t1,keyId:c.t2,signature:c.t3},o={update:c.t0,updateSignature:c.t4},u={method:"post",url:"/members/"+e+"/updates",data:o},c.abrupt("return",this._instance(u));case 14:case"end":return c.stop()}},null,this)}},{key:"approveFirstKeys",value:function(e,t,r){var n,a,o,u;return regeneratorRuntime.async(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,regeneratorRuntime.awrap(r.createSigner(s.default.KeyLevel.PRIVILEGED));case 2:return n=c.sent,a={memberId:e,operations:t.map(function(e){return{addKey:{key:i({id:e.id,publicKey:f.default.strKey(e.publicKey),level:e.level,algorithm:e.algorithm},e.expiresAtMs&&{expiresAtMs:e.expiresAtMs})}}})},c.t0=a,c.t1=e,c.t2=n.getKeyId(),c.next=9,regeneratorRuntime.awrap(n.signJson(a));case 9:return c.t3=c.sent,c.t4={memberId:c.t1,keyId:c.t2,signature:c.t3},o={update:c.t0,updateSignature:c.t4},u={method:"post",url:"/members/"+e+"/updates",data:o},c.abrupt("return",this._instance(u));case 14:case"end":return c.stop()}},null,this)}},{key:"notifyPaymentRequest",value:function(e){var t={tokenPayload:e},r={method:"post",url:"/request-transfer",data:t};return this._instance(r)}},{key:"notifyEndorseAndAddKey",value:function(e){var t={endorseAndAddKey:e},r={method:"post",url:"/notify/endorse-and-add-key",data:t};return this._instance(r)}},{key:"invalidateNotification",value:function(e){var t={notificationId:e},r={method:"post",url:"/notify/invalidate-notification",data:t};return this._instance(r)}},{key:"getBanks",value:function(){var e,t,r,n,a,i,o,u,s,c,f,l,h,p,d,y=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return regeneratorRuntime.async(function(v){for(;;)switch(v.prev=v.next){case 0:for(e=Object.assign({},{ids:y.ids||[],search:y.search||"",country:y.country||"",page:y.page,perPage:y.perPage,provider:y.provider||""}),t=e.ids,r=e.search,n=e.country,a=e.page,i=e.perPage,o=e.provider,u="/banks?",s=!0,c=!1,f=void 0,v.prev=6,l=t[Symbol.iterator]();!(s=(h=l.next()).done);s=!0)p=h.value,u+="ids="+encodeURIComponent(p)+"&";v.next=14;break;case 10:v.prev=10,v.t0=v.catch(6),c=!0,f=v.t0;case 14:v.prev=14,v.prev=15,!s&&l.return&&l.return();case 17:if(v.prev=17,!c){v.next=20;break}throw f;case 20:return v.finish(17);case 21:return v.finish(14);case 22:return r&&(u+="search="+encodeURIComponent(r)+"&"),n&&(u+="country="+encodeURIComponent(n)+"&"),a&&(u+="page="+encodeURIComponent(a)+"&"),i&&(u+="perPage="+encodeURIComponent(i)+"&"),o&&(u+="provider="+encodeURIComponent(o)+"&"),d={method:"get",url:u},v.abrupt("return",this._instance(d));case 29:case"end":return v.stop()}},null,this,[[6,10,14,22],[15,,17,21]])}},{key:"retrieveTokenRequest",value:function(e){var t;return regeneratorRuntime.async(function(r){for(;;)switch(r.prev=r.next){case 0:return t={method:"get",url:"/token-requests/"+e},r.abrupt("return",this._instance(t));case 2:case"end":return r.stop()}},null,this)}},{key:"getTokenMember",value:function(){var e,t,r;return regeneratorRuntime.async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,regeneratorRuntime.awrap(this.resolveAlias(m.default.tokenAlias(),m.default.tokenRealm()));case 2:return e=n.sent,t=e.data.member.id,n.next=6,regeneratorRuntime.awrap(this.getMember(t));case 6:return r=n.sent,n.abrupt("return",r.data.member);case 8:case"end":return n.stop()}},null,this)}},{key:"getTokenId",value:function(e){var t;return regeneratorRuntime.async(function(r){for(;;)switch(r.prev=r.next){case 0:return t={method:"get",url:"/token-requests/"+e+"/token_id"},r.abrupt("return",this._instance(t));case 2:case"end":return r.stop()}},null,this)}}]),e}();t.default=b},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e,t){
if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(11),u=n(o),s=r(41),c=n(s),f=function(){function e(t,r,n,i){if(a(this,e),this._client=t,this._member=r,this._blobPayloads=[],this._tokenRequestId="",u.default.countDecimals(n)>c.default.decimalPrecision)throw new Error("Number of decimals in lifetimeAmount should be at most "+c.default.decimalPrecision);this._payload={version:c.default.transferTokenVersion,refId:u.default.generateNonce(),transfer:{currency:i,lifetimeAmount:n.toString(),instructions:{destinations:[],metadata:{}},redeemer:{},attachments:[]}}}return i(e,[{key:"setFromId",value:function(e){return this._payload.from||(this._payload.from={}),this._payload.from.id=e,this}},{key:"setAccountId",value:function(e){return this._payload.transfer.instructions.source={account:{token:{memberId:this._member.memberId(),accountId:e}}},this}},{key:"setCustomAuthorization",value:function(e,t){return this._payload.transfer.instructions.source={account:{custom:{bankId:e,payload:t}}},this}},{key:"setBankAuthorization",value:function(e){return this._payload.transfer.instructions.source={account:{tokenAuthorization:{authorization:e}}},this}},{key:"setExpiresAtMs",value:function(e){return this._payload.expiresAtMs=e,this}},{key:"setEndorseUntilMs",value:function(e){return this._payload.endorseUntilMs=e,this}},{key:"setEffectiveAtMs",value:function(e){return this._payload.effectiveAtMs=e,this}},{key:"setChargeAmount",value:function(e){if(u.default.countDecimals(e)>c.default.decimalPrecision)throw new Error("Number of decimals in amount should be at most "+c.default.decimalPrecision);return this._payload.transfer.amount=e,this}},{key:"setDescription",value:function(e){return this._payload.description=e,this}},{key:"addDestination",value:function(e){return this._payload.transfer.instructions.destinations.push(e),this}},{key:"setRedeemerAlias",value:function(e){return this._payload.transfer.redeemer.alias=e,this}},{key:"setRedeemerRealm",value:function(e){return this._payload.transfer.redeemer.realm=e,this}},{key:"setRedeemerMemberId",value:function(e){return this._payload.transfer.redeemer.id=e,this}},{key:"setToAlias",value:function(e){return this._payload.to||(this._payload.to={}),this._payload.to.alias=e,this}},{key:"setToRealm",value:function(e){return this._payload.to||(this._payload.to={}),this._payload.to.realm=e,this}},{key:"setToMemberId",value:function(e){return this._payload.to||(this._payload.to={}),this._payload.to.id=e,this}},{key:"addAttachment",value:function(e){return this._payload.transfer.attachments.push(e),this}},{key:"addAttachmentData",value:function(e,t,r,n){return this._blobPayloads.push({ownerId:e,type:t,name:r,data:n}),this}},{key:"setPricing",value:function(e){return this._payload.transfer.pricing=e,this}},{key:"setPurposeOfPayment",value:function(e){return this._payload.transfer.instructions.metadata.transferPurpose=e,this}},{key:"setRefId",value:function(e){if(e.length>18)throw new Error("The length of the refId is at most 18, got: "+e.length);return this._payload.refId=e,this}},{key:"setActingAs",value:function(e){return this._payload.actingAs=e,this}},{key:"setTokenRequestId",value:function(e){return this._tokenRequestId=e,this}},{key:"setReceiptRequested",value:function(e){return this._payload.receiptRequested=e,this}},{key:"build",value:function(){return this._payload}},{key:"execute",value:function(){var e=this;return regeneratorRuntime.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",u.default.callAsync(this.execute,function(){var t,r,n,a,i;return regeneratorRuntime.async(function(o){for(;;)switch(o.prev=o.next){case 0:if(e._payload.transfer.instructions.source&&(e._payload.transfer.instructions.source.account.token||e._payload.transfer.instructions.source.account.tokenAuthorization||e._payload.transfer.instructions.source.account.bank||e._payload.transfer.instructions.source.account.custom)){o.next=2;break}throw new Error("No source on token");case 2:if(e._payload.transfer.redeemer.alias||e._payload.transfer.redeemer.id){o.next=4;break}throw new Error("No redeemer on token");case 4:t=0;case 5:if(!(t<e._blobPayloads.length)){o.next=14;break}return r=e._blobPayloads[t],o.next=9,regeneratorRuntime.awrap(e._member.createBlob(r.ownerId,r.type,r.name,r.data));case 9:n=o.sent,e.addAttachment(n);case 11:t++,o.next=5;break;case 14:return o.next=16,regeneratorRuntime.awrap(e._client.createTransferToken(e._payload,e._tokenRequestId));case 16:if(a=o.sent,"FAILURE_EXTERNAL_AUTHORIZATION_REQUIRED"!==a.data.status){o.next=21;break}throw i=new Error("FAILURE_EXTERNAL_AUTHORIZATION_REQUIRED"),i.authorizationDetails=a.data.authorizationDetails,i;case 21:if("SUCCESS"===a.data.status){o.next=23;break}throw new Error(a.data.status);case 23:return o.abrupt("return",a.data.token);case 24:case"end":return o.stop()}},null,e)}));case 1:case"end":return t.stop()}},null,this)}}]),e}();t.default=f},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(11),u=n(o),s=r(41),c=n(s),f=function(){function e(t,r,n){a(this,e),this._client=t,this._member=r,this._tokenRequestId="",this._payload={version:c.default.accessTokenVersion,refId:u.default.generateNonce(),access:{resources:n}}}return i(e,[{key:"setFromId",value:function(e){return this._payload.from||(this._payload.from={}),this._payload.from.id=e,this}},{key:"forAllAddresses",value:function(){return this._payload.access.resources.push({allAddresses:{}}),this}},{key:"forAddress",value:function(e){return this._payload.access.resources.push({address:{addressId:e}}),this}},{key:"forAllAccounts",value:function(){return this._payload.access.resources.push({allAccounts:{}}),this}},{key:"forAllAccountsAtBank",value:function(e){return this._payload.access.resources.push({allAccountsAtBank:{bankId:e}}),this}},{key:"forAccount",value:function(e){return this._payload.access.resources.push({account:{accountId:e}}),this}},{key:"forAllTransactions",value:function(){return this._payload.access.resources.push({allTransactions:{}}),this}},{key:"forAllTransactionsAtbank",value:function(e){return this._payload.access.resources.push({allTransactionsAtBank:{bankId:e}}),this}},{key:"forAccountTransactions",value:function(e){return this._payload.access.resources.push({transactions:{accountId:e}}),this}},{key:"forAllBalances",value:function(){return this._payload.access.resources.push({allBalances:{}}),this}},{key:"forAllBalancesAtBank",value:function(e){return this._payload.access.resources.push({allBalancesAtBank:{bankId:e}}),this}},{key:"forAccountBalances",value:function(e){return this._payload.access.resources.push({balance:{accountId:e}}),this}},{key:"forAll",value:function(){return this.forAllAccounts().forAllAddresses().forAllTransactions().forAllBalances()}},{key:"setExpiresAtMs",value:function(e){return this._payload.expiresAtMs=e,this}},{key:"setEndorseUntilMs",value:function(e){return this._payload.endorseUntilMs=e,this}},{key:"setEffectiveAtMs",value:function(e){return this._payload.effectiveAtMs=e,this}},{key:"setDescription",value:function(e){return this._payload.description=e,this}},{key:"setToAlias",value:function(e){return this._payload.to||(this._payload.to={}),this._payload.to.alias=e,this}},{key:"setToMemberId",value:function(e){return this._payload.to||(this._payload.to={}),this._payload.to.id=e,this}},{key:"setToRealm",value:function(e){return this._payload.to||(this._payload.to={}),this._payload.to.realm=e,this}},{key:"setRefId",value:function(e){return this._payload.refId=e,this}},{key:"setActingAs",value:function(e){return this._payload.actingAs=e,this}},{key:"setTokenRequestId",value:function(e){return this._tokenRequestId=e,this}},{key:"build",value:function(){return this._payload}},{key:"execute",value:function(){var e=this;return regeneratorRuntime.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",u.default.callAsync(this.execute,function(){var t,r;return regeneratorRuntime.async(function(n){for(;;)switch(n.prev=n.next){case 0:if(!(e._payload.access.resources.length<1)){n.next=2;break}throw new Error("Must have at least one resource");case 2:if(e._payload.to&&(e._payload.to.alias||e._payload.to.id)){n.next=4;break}throw new Error("No recipient on token");case 4:return n.next=6,regeneratorRuntime.awrap(e._client.createAccessToken(e._payload,e._tokenRequestId));case 6:if(t=n.sent,"FAILURE_EXTERNAL_AUTHORIZATION_REQUIRED"!==t.data.status){n.next=11;break}throw r=new Error("FAILURE_EXTERNAL_AUTHORIZATION_REQUIRED"),r.authorizationDetails=t.data.authorizationDetails,r;case 11:return n.abrupt("return",t.data.token);case 12:case"end":return n.stop()}},null,e)}));case 1:case"end":return t.stop()}},null,this)}}]),e}();t.default=f},function(e,t){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function(){function e(t){r(this,e),this.payload=t,this.options={}}return n(e,[{key:"setEmail",value:function(e){return this.options.email=e,this}},{key:"setBankId",value:function(e){return this.options.bankId=e,this}},{key:"setRedirectUrl",value:function(e){return this.options.redirectUrl=e,this}}],[{key:"create",value:function(t){return new e(t)}}]),e}();t.default=a},function(e,t,r){(function(t,n){/*!
	 * @overview es6-promise - a tiny implementation of Promises/A+.
	 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
	 * @license   Licensed under MIT license
	 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
	 * @version   3.3.1
	 */
!function(t,r){e.exports=r()}(this,function(){"use strict";function e(e){return"function"==typeof e||"object"==typeof e&&null!==e}function a(e){return"function"==typeof e}function i(e){W=e}function o(e){G=e}function u(){return function(){return t.nextTick(h)}}function s(){return function(){X(h)}}function c(){var e=0,t=new $(h),r=document.createTextNode("");return t.observe(r,{characterData:!0}),function(){r.data=e=++e%2}}function f(){var e=new MessageChannel;return e.port1.onmessage=h,function(){return e.port2.postMessage(0)}}function l(){var e=setTimeout;return function(){return e(h,1)}}function h(){for(var e=0;e<V;e+=2){var t=re[e],r=re[e+1];t(r),re[e]=void 0,re[e+1]=void 0}V=0}function p(){try{var e=r(74);return X=e.runOnLoop||e.runOnContext,s()}catch(e){return l()}}function d(e,t){var r=arguments,n=this,a=new this.constructor(v);void 0===a[ae]&&L(a);var i=n._state;return i?!function(){var e=r[i-1];G(function(){return B(i,a,e,n._result)})}():T(n,a,e,t),a}function y(e){var t=this;if(e&&"object"==typeof e&&e.constructor===t)return e;var r=new t(v);return x(r,e),r}function v(){}function g(){return new TypeError("You cannot resolve a promise with itself")}function m(){return new TypeError("A promises callback cannot return that same promise.")}function w(e){try{return e.then}catch(e){return se.error=e,se}}function b(e,t,r,n){try{e.call(t,r,n)}catch(e){return e}}function k(e,t,r){G(function(e){var n=!1,a=b(r,t,function(r){n||(n=!0,t!==r?x(e,r):E(e,r))},function(t){n||(n=!0,I(e,t))},"Settle: "+(e._label||" unknown promise"));!n&&a&&(n=!0,I(e,a))},e)}function _(e,t){t._state===oe?E(e,t._result):t._state===ue?I(e,t._result):T(t,void 0,function(t){return x(e,t)},function(t){return I(e,t)})}function A(e,t,r){t.constructor===e.constructor&&r===d&&t.constructor.resolve===y?_(e,t):r===se?I(e,se.error):void 0===r?E(e,t):a(r)?k(e,t,r):E(e,t)}function x(t,r){t===r?I(t,g()):e(r)?A(t,r,w(r)):E(t,r)}function R(e){e._onerror&&e._onerror(e._result),S(e)}function E(e,t){e._state===ie&&(e._result=t,e._state=oe,0!==e._subscribers.length&&G(S,e))}function I(e,t){e._state===ie&&(e._state=ue,e._result=t,G(R,e))}function T(e,t,r,n){var a=e._subscribers,i=a.length;e._onerror=null,a[i]=t,a[i+oe]=r,a[i+ue]=n,0===i&&e._state&&G(S,e)}function S(e){var t=e._subscribers,r=e._state;if(0!==t.length){for(var n=void 0,a=void 0,i=e._result,o=0;o<t.length;o+=3)n=t[o],a=t[o+r],n?B(r,n,a,i):a(i);e._subscribers.length=0}}function P(){this.error=null}function U(e,t){try{return e(t)}catch(e){return ce.error=e,ce}}function B(e,t,r,n){var i=a(r),o=void 0,u=void 0,s=void 0,c=void 0;if(i){if(o=U(r,n),o===ce?(c=!0,u=o.error,o=null):s=!0,t===o)return void I(t,m())}else o=n,s=!0;t._state!==ie||(i&&s?x(t,o):c?I(t,u):e===oe?E(t,o):e===ue&&I(t,o))}function O(e,t){try{t(function(t){x(e,t)},function(t){I(e,t)})}catch(t){I(e,t)}}function M(){return fe++}function L(e){e[ae]=fe++,e._state=void 0,e._result=void 0,e._subscribers=[]}function K(e,t){this._instanceConstructor=e,this.promise=new e(v),this.promise[ae]||L(this.promise),J(t)?(this._input=t,this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?E(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&E(this.promise,this._result))):I(this.promise,C())}function C(){return new Error("Array Methods must be provided an Array")}function j(e){return new K(this,e).promise}function D(e){var t=this;return new t(J(e)?function(r,n){for(var a=e.length,i=0;i<a;i++)t.resolve(e[i]).then(r,n)}:function(e,t){return t(new TypeError("You must pass an array to race."))})}function N(e){var t=this,r=new t(v);return I(r,e),r}function Y(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function q(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function F(e){this[ae]=M(),this._result=this._state=void 0,this._subscribers=[],v!==e&&("function"!=typeof e&&Y(),this instanceof F?O(this,e):q())}function H(){var e=void 0;if("undefined"!=typeof n)e=n;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var r=null;try{r=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===r&&!t.cast)return}e.Promise=F}var z=void 0;z=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)};var J=z,V=0,X=void 0,W=void 0,G=function(e,t){re[V]=e,re[V+1]=t,V+=2,2===V&&(W?W(h):ne())},Z="undefined"!=typeof window?window:void 0,Q=Z||{},$=Q.MutationObserver||Q.WebKitMutationObserver,ee="undefined"==typeof self&&"undefined"!=typeof t&&"[object process]"==={}.toString.call(t),te="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,re=new Array(1e3),ne=void 0;ne=ee?u():$?c():te?f():void 0===Z?p():l();var ae=Math.random().toString(36).substring(16),ie=void 0,oe=1,ue=2,se=new P,ce=new P,fe=0;return K.prototype._enumerate=function(){for(var e=this.length,t=this._input,r=0;this._state===ie&&r<e;r++)this._eachEntry(t[r],r)},K.prototype._eachEntry=function(e,t){var r=this._instanceConstructor,n=r.resolve;if(n===y){var a=w(e);if(a===d&&e._state!==ie)this._settledAt(e._state,t,e._result);else if("function"!=typeof a)this._remaining--,this._result[t]=e;else if(r===F){var i=new r(v);A(i,e,a),this._willSettleAt(i,t)}else this._willSettleAt(new r(function(t){return t(e)}),t)}else this._willSettleAt(n(e),t)},K.prototype._settledAt=function(e,t,r){var n=this.promise;n._state===ie&&(this._remaining--,e===ue?I(n,r):this._result[t]=r),0===this._remaining&&E(n,this._result)},K.prototype._willSettleAt=function(e,t){var r=this;T(e,void 0,function(e){return r._settledAt(oe,t,e)},function(e){return r._settledAt(ue,t,e)})},F.all=j,F.race=D,F.resolve=y,F.reject=N,F._setScheduler=i,F._setAsap=o,F._asap=G,F.prototype={constructor:F,then:d,catch:function(e){return this.then(null,e)}},H(),F.polyfill=H,F.Promise=F,F})}).call(t,r(2),function(){return this}())},function(e,t){}])});